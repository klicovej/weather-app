!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class s{constructor(e,t){this._model=e,this._view=t,this._view.bindSearchCity(this.handleSearchCity.bind(this)),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)}handleSearchCity(e){return r(this,void 0,void 0,(function*(){console.log("Handler v controlleru "+e),this._model.cityName=e,yield this._model.initialize(),"200"===this._model.forecast.cod?(console.log("Aktualni mesto: "+this._model.forecast.city.name),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage(`Pro město s názvem '${e}' se nepodařilo najít předpověď.`))}))}}class o{constructor(e,t,n,r){this._temp=e,this._date=new Date(t),this._weatherDescription=n,this._windSpeed=r}get temp(){return Math.round(this._temp)}get date(){return this._date}get weatherDescription(){return this._weatherDescription}get windSpeed(){return this._windSpeed}set date(e){this._date=e}getDayName(){return new Intl.DateTimeFormat("cs-CZ",{weekday:"long"}).format(this.date)}}class i{constructor(e,t,n,r){this._name=e,this._country=t,this._sunrise=n,this._sunset=r}get name(){return this._name}get country(){return this._country}get sunrise(){return this._sunrise}get sunset(){return this._sunset}}class a{constructor(e){if(this._treeHourForecasts=new Array,this._cod=e.cod,"200"===this._cod){for(let t of e.list)this._treeHourForecasts.push(new o(t.main.temp,t.dt_txt,t.weather[0].description,t.wind.speed));this._city=new i(e.city.name,e.city.country,e.city.sunrise,e.city.sunset)}}get cod(){return this._cod}get city(){return this._city}getForecastsWithHighestTempForEveryDay(){const e=this._getForecastsWithoutHours(this._treeHourForecasts);var t;return function(e,t){let n=new Array;for(let r in e){const s=e[r].reduce((e,n)=>e[t]>n[t]?e:n);n.push(s)}return n}((t="date",e.reduce((e,n)=>{let r=n[t];return e[r]||(e[r]=[]),e[r].push(n),e},{})),"temp")}_getForecastsWithoutHours(e){return e.map(e=>(e.date=new Date(`${e.date.getFullYear()}-${e.date.getMonth()+1}-${e.date.getDate()}`),e))}}var c=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};class h{constructor(e,t,n="metric"){this._url=e,this._cityName=t,this._units=n}get forecast(){return this._forecast}set cityName(e){this._cityName=e}initialize(){return c(this,void 0,void 0,(function*(){const e=this._url.concat("&q=",this._cityName,"&units=",this._units),t=yield this.fetchForecast(e);this._forecast=new a(t)}))}fetchForecast(e){return c(this,void 0,void 0,(function*(){const t=yield fetch(e);return yield t.json()}))}}const d=document.createElement("template");d.innerHTML='\n<style>\n    h3 {\n        color: coral;\n    }  \n</style>\n<div class="weather-app__card">\n    <h2><slot name="day" /></h2>\n    <h3><slot name="temp"/></h3>\n    <h3><slot name="description"/><</h3>\n    <h3><slot name="wind"/><</h3>\n</div>\n';class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d.content.cloneNode(!0))}}const p=document.createElement("template");p.innerHTML='\n  <form id="search-form">\n      <input type="text" placeholder="Název hledaného města">\n      <button type="submit">Hledat</button><br>\n  </form>\n';class l extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(p.content.cloneNode(!0)),this._input=this.shadowRoot.querySelector("input")}connectedCallback(){this.shadowRoot.getElementById("search-form").addEventListener("submit",e=>{e.preventDefault();const t=this._input.value;""===t?this.dispatchEvent(new CustomEvent("emptyInput")):this.dispatchEvent(new CustomEvent("searchSubmit",{detail:t}))})}}const m=document.createElement("template");m.innerHTML='\n<div>\n    <weather-app-search></weather-app-search>\n    <h3><slot name="errorMessage"></slot></h3>\n    <h1><slot name="city"></slot></h1>\n    <div class="weather-app__cards">\n      <slot name="weather-app-card"></slot>\n    </div>\n</div>\n';class _ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this._weatherAppSearch=this.shadowRoot.querySelector("weather-app-search")}connectedCallback(){this._weatherAppSearch.addEventListener("emptyInput",e=>{this.dispatchEvent(new CustomEvent("emptyInput",{detail:"Vyplň název města bráško."}))}),this._weatherAppSearch.addEventListener("searchSubmit",e=>{this.dispatchEvent(new CustomEvent("searchSubmit",{detail:e.detail}))})}}class f{constructor(){window.customElements.define("weather-app",_),window.customElements.define("weather-app-search",l),window.customElements.define("weather-app-card",u),this._weatherApp=document.createElement("weather-app"),document.getElementsByTagName("body")[0].append(this._weatherApp),this._weatherApp.addEventListener("emptyInput",e=>{this.removeCityNameAndForecasts(),this.createErrorMessage(e.detail)})}renderForecastsForCity(e,t){this.removeCityNameAndForecasts();const n=this._createTextNodeSetSlotAndInnerHTML("city",""+t.name);this._weatherApp.appendChild(n),this._createWeatherAppCards(e)}removeCityNameAndForecasts(){for(;this._weatherApp.firstChild;)this._weatherApp.removeChild(this._weatherApp.firstChild)}createErrorMessage(e){const t=this._createTextNodeSetSlotAndInnerHTML("errorMessage",e);this._weatherApp.appendChild(t)}_createWeatherAppCards(e){e.forEach(e=>{const t=document.createElement("weather-app-card");t.setAttribute("slot","weather-app-card");const n=this._createTextNodeSetSlotAndInnerHTML("day",e.getDayName()),r=this._createTextNodeSetSlotAndInnerHTML("temp",""+e.temp),s=this._createTextNodeSetSlotAndInnerHTML("description",""+e.weatherDescription),o=this._createTextNodeSetSlotAndInnerHTML("wind",""+e.windSpeed);t.append(n,r,s,o),this._weatherApp.appendChild(t)})}_createTextNodeSetSlotAndInnerHTML(e,t){const n=document.createElement("textNode");return n.setAttribute("slot",e),n.innerHTML=t,n}bindSearchCity(e){this._weatherApp.addEventListener("searchSubmit",t=>{e(t.detail)})}}var w=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){w(this,void 0,void 0,(function*(){const t=new h(e,"Tovačov");yield t.initialize();new s(t,new f)}))}("https://api.openweathermap.org/data/2.5/forecast?&appid=4a710277b41d7da791e44bf515bac6f7&lang=CZ")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9Nb2RlbHMvQ2l0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0ZpdmVEYXlGb3JlY2FzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVscy9XZWF0aGVyQXBwTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXdzL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9XZWF0aGVyQXBwVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlYXRoZXJBcHBDb250cm9sbGVyIiwibW9kZWwiLCJ2aWV3IiwidGhpcyIsIl9tb2RlbCIsIl92aWV3IiwiYmluZFNlYXJjaENpdHkiLCJoYW5kbGVTZWFyY2hDaXR5IiwicmVuZGVyRm9yZWNhc3RzRm9yQ2l0eSIsImZvcmVjYXN0IiwiZ2V0Rm9yZWNhc3RzV2l0aEhpZ2hlc3RUZW1wRm9yRXZlcnlEYXkiLCJjaXR5IiwiY2l0eU5hbWUiLCJjb25zb2xlIiwibG9nIiwiaW5pdGlhbGl6ZSIsImNvZCIsInJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzIiwiY3JlYXRlRXJyb3JNZXNzYWdlIiwiVGhyZWVIb3VyRm9yZWNhc3QiLCJ0ZW1wIiwiZGF0ZSIsIndlYXRoZXJEZXNjcmlwdGlvbiIsIndpbmRTcGVlZCIsIl90ZW1wIiwiX2RhdGUiLCJEYXRlIiwiX3dlYXRoZXJEZXNjcmlwdGlvbiIsIl93aW5kU3BlZWQiLCJNYXRoIiwicm91bmQiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJ3ZWVrZGF5IiwiZm9ybWF0IiwiQ2l0eSIsImNvdW50cnkiLCJzdW5yaXNlIiwic3Vuc2V0IiwiX25hbWUiLCJfY291bnRyeSIsIl9zdW5yaXNlIiwiX3N1bnNldCIsImpzb25PYmplY3QiLCJfdHJlZUhvdXJGb3JlY2FzdHMiLCJBcnJheSIsIl9jb2QiLCJ0aHJlZUhvdXJGb3JlY2FzdCIsImxpc3QiLCJwdXNoIiwibWFpbiIsImR0X3R4dCIsIndlYXRoZXIiLCJkZXNjcmlwdGlvbiIsIndpbmQiLCJzcGVlZCIsIl9jaXR5IiwidGhyZWVIb3VyRm9yZWNhc3RzIiwiX2dldEZvcmVjYXN0c1dpdGhvdXRIb3VycyIsImdyb3VwZWRBcnIiLCJtYXhWYWx1ZXNGcm9tR3JvdXBBcnIiLCJncm91cEtleSIsIm1heCIsInJlZHVjZSIsInByZXYiLCJjdXJyZW50IiwiZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIiLCJhY2MiLCJvYmoiLCJmb3JlY2FzdHNBcnIiLCJtYXAiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsInVybCIsInVuaXRzIiwiX3VybCIsIl9jaXR5TmFtZSIsIl91bml0cyIsIl9mb3JlY2FzdCIsInVybFdpdGhDaXR5TmFtZUFuZFVuaXRzIiwiY29uY2F0IiwiZmV0Y2hGb3JlY2FzdCIsInJlc3BvbnNlIiwiZmV0Y2giLCJqc29uIiwidGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJXZWF0aGVyQXBwQ2FyZCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJhdHRhY2hTaGFkb3ciLCJzaGFkb3dSb290IiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiV2VhdGhlckFwcFNlYXJjaCIsIl9pbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRWYWx1ZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsIldlYXRoZXJBcHAiLCJfd2VhdGhlckFwcFNlYXJjaCIsIndpbmRvdyIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiX3dlYXRoZXJBcHAiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZCIsImZvcmVjYXN0cyIsImNpdHlUZXh0Tm9kZSIsIl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwiLCJfY3JlYXRlV2VhdGhlckFwcENhcmRzIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JNZXNzYWdlU2xvdCIsImZvckVhY2giLCJ3ZWF0aGVyQXBwQ2FyZCIsInNldEF0dHJpYnV0ZSIsImRheVNsb3QiLCJnZXREYXlOYW1lIiwidGVtcFNsb3QiLCJkZXNjU2xvdCIsIndpbmRTbG90Iiwic2xvdE5hbWUiLCJpbm5lckhUTUxWYWx1ZSIsInRleHROb2RlRWxlbWVudCIsImhhbmRsZXIiLCJjcmVhdGVXZWF0aGVyQXBwIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJ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R0FDbkRqSSxLQUFLK0csWUFBWW5CLFlBQVkrQixLQVN6QixtQ0FBbUNPLEVBQWtCQyxHQUMzRCxNQUFNQyxFQUFrQmhELFNBQVNDLGNBQWMsWUFHL0MsT0FGQStDLEVBQWdCUixhQUFhLE9BQVFNLEdBQ3JDRSxFQUFnQjlDLFVBQVk2QyxFQUNyQkMsRUFPRixlQUFlQyxHQUNwQnJJLEtBQUsrRyxZQUFZWixpQkFBaUIsZUFBaUJDLElBQ2pEaUMsRUFBUWpDLEVBQU1LLFcsMlNDbEdwQixTQUFnQ2xDLEcsa0NBQzlCLE1BQU16RSxFQUFRLElBQUksRUFBZ0J5RSxFQUFLLGlCQUNqQ3pFLEVBQU1jLGFBRU8sSUFBSWYsRUFBcUJDLEVBQU8sSUFBSSxNQUd6RHdJLENBYkUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFdlYXRoZXJBcHBNb2RlbCBmcm9tIFwiLi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4uL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSB6YWrDrcWhxaV1asOtY8OtIGtvbXVuaWthY2kgbWV6aSBkYXR5IGEgVUkgYXBsaWthY2VcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDb250cm9sbGVyIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfbW9kZWw6IFdlYXRoZXJBcHBNb2RlbDtcclxuICBwcml2YXRlIF92aWV3OiBXZWF0aGVyQXBwVmlldztcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihtb2RlbDogV2VhdGhlckFwcE1vZGVsLCB2aWV3OiBXZWF0aGVyQXBwVmlldykge1xyXG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuX3ZpZXcgPSB2aWV3O1xyXG5cclxuICAgIHRoaXMuX3ZpZXcuYmluZFNlYXJjaENpdHkodGhpcy5oYW5kbGVTZWFyY2hDaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdmlldy5yZW5kZXJGb3JlY2FzdHNGb3JDaXR5KFxyXG4gICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5nZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpLFxyXG4gICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5jaXR5XHJcbiAgICApO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogUHJvIHphZGFuw70gbsOhemV2IG3Em3N0YSB2eWhsZWTDoSBwxZllZHBvdsSbxI8gYSBwxZlla3Jlc2zDrSBwb2RsZSBuw60gVUlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2l0eU5hbWUgLSBuw6F6ZXYgbcSbc3RhLCBwcm8ga3RlcsOpIHNlIG3DoSB6amlzdGl0IHDFmWVkcG92xJvEj1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVTZWFyY2hDaXR5KGNpdHlOYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiSGFuZGxlciB2IGNvbnRyb2xsZXJ1IFwiICsgY2l0eU5hbWUpO1xyXG5cclxuICAgIHRoaXMuX21vZGVsLmNpdHlOYW1lID0gY2l0eU5hbWU7XHJcbiAgICBhd2FpdCB0aGlzLl9tb2RlbC5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX21vZGVsLmZvcmVjYXN0LmNvZCA9PT0gXCIyMDBcIikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkFrdHVhbG5pIG1lc3RvOiBcIiArIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHkubmFtZSk7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVuZGVyRm9yZWNhc3RzRm9yQ2l0eShcclxuICAgICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5nZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpLFxyXG4gICAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5fdmlldy5jcmVhdGVFcnJvck1lc3NhZ2UoYFBybyBtxJtzdG8gcyBuw6F6dmVtICcke2NpdHlOYW1lfScgc2UgbmVwb2RhxZlpbG8gbmFqw610IHDFmWVkcG92xJvEjy5gKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIHTFmcOtaG9kaW5vdSBwxZllZHBvdsSbxI9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaHJlZUhvdXJGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3RlbXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9kYXRlOiBEYXRlO1xyXG4gIHByaXZhdGUgX3dlYXRoZXJEZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3dpbmRTcGVlZDogbnVtYmVyO1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3Blcmllc1xyXG4gIGdldCB0ZW1wKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLl90ZW1wKTtcclxuICB9XHJcblxyXG4gIGdldCBkYXRlKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGU7XHJcbiAgfVxyXG5cclxuICBnZXQgd2VhdGhlckRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fd2VhdGhlckRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHdpbmRTcGVlZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3dpbmRTcGVlZDtcclxuICB9XHJcblxyXG4gIHNldCBkYXRlKGRhdGU6IERhdGUpIHtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGV0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcih0ZW1wOiBudW1iZXIsIGRhdGU6IHN0cmluZywgd2VhdGhlckRlc2NyaXB0aW9uOiBzdHJpbmcsIHdpbmRTcGVlZDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl90ZW1wID0gdGVtcDtcclxuICAgIHRoaXMuX2RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJEZXNjcmlwdGlvbiA9IHdlYXRoZXJEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3dpbmRTcGVlZCA9IHdpbmRTcGVlZDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIHB1YmxpYyBnZXREYXlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJjcy1DWlwiLCB7IHdlZWtkYXk6IFwibG9uZ1wiIH0pLmZvcm1hdCh0aGlzLmRhdGUpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIG3Em3N0b1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENpdHkge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfY291bnRyeTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3N1bnJpc2U6IG51bWJlcjtcclxuICBwcml2YXRlIF9zdW5zZXQ6IG51bWJlcjtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvdW50cnkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9jb3VudHJ5O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnJpc2UoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9zdW5yaXNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnNldCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N1bnNldDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgY291bnRyeTogc3RyaW5nLCBzdW5yaXNlOiBudW1iZXIsIHN1bnNldDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2NvdW50cnkgPSBjb3VudHJ5O1xyXG4gICAgdGhpcy5fc3VucmlzZSA9IHN1bnJpc2U7XHJcbiAgICB0aGlzLl9zdW5zZXQgPSBzdW5zZXQ7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuL1RocmVlSG91ckZvcmVjYXN0XCI7XHJcbmltcG9ydCB7IENpdHkgfSBmcm9tIFwiLi9DaXR5XCI7XHJcbmltcG9ydCB7IGdyb3VwQXJyQnlQcm9wZXJ0eSwgZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIgfSBmcm9tIFwiLi4vVXRpbHMvYXJyYXktdXRpbHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIDUgZG7DrSwgcG8gMyBob2RpbsOhY2gsIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpdmVEYXlGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX2NvZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3RyZWVIb3VyRm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4gPSBuZXcgQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+KCk7XHJcbiAgcHJpdmF0ZSBfY2l0eTogQ2l0eTtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IGNvZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jb2Q7XHJcbiAgfVxyXG5cclxuICBnZXQgY2l0eSgpOiBDaXR5IHtcclxuICAgIHJldHVybiB0aGlzLl9jaXR5O1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoanNvbk9iamVjdDogYW55KSB7XHJcbiAgICB0aGlzLl9jb2QgPSBqc29uT2JqZWN0LmNvZDtcclxuXHJcbiAgICBpZiAodGhpcy5fY29kID09PSBcIjIwMFwiKSB7XHJcbiAgICAgIGZvciAobGV0IHRocmVlSG91ckZvcmVjYXN0IG9mIGpzb25PYmplY3QubGlzdCkge1xyXG4gICAgICAgIHRoaXMuX3RyZWVIb3VyRm9yZWNhc3RzLnB1c2goXHJcbiAgICAgICAgICBuZXcgVGhyZWVIb3VyRm9yZWNhc3QoXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0Lm1haW4udGVtcCxcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3QuZHRfdHh0LFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC53aW5kLnNwZWVkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY2l0eSA9IG5ldyBDaXR5KFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5uYW1lLFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5jb3VudHJ5LFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5zdW5yaXNlLFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5zdW5zZXRcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIC8qKlxyXG4gICAqIFZyw6F0w60gcG9sZSB0xZnDrWhvZGlub3bDvWNoIHDFmWVkcG92xJtkw60gcyBuZWp2ecWhxaHDrSB0ZXBsb3RvdSBwcm8ga2HFvmTDvSBkZW5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Rm9yZWNhc3RzV2l0aEhpZ2hlc3RUZW1wRm9yRXZlcnlEYXkoKTogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+IHtcclxuICAgIGNvbnN0IHRocmVlSG91ckZvcmVjYXN0cyA9IHRoaXMuX2dldEZvcmVjYXN0c1dpdGhvdXRIb3Vycyh0aGlzLl90cmVlSG91ckZvcmVjYXN0cyk7XHJcbiAgICBjb25zdCB0aHJlZUhvdXJGb3JlY2FzdHNHcm91cGVkQnlEYXRlID0gZ3JvdXBBcnJCeVByb3BlcnR5KHRocmVlSG91ckZvcmVjYXN0cywgXCJkYXRlXCIpO1xyXG4gICAgY29uc3QgdGhyZWVIb3VyRm9yZWNhc3RzV2l0aE1heFRlbXAgPSBnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFycih0aHJlZUhvdXJGb3JlY2FzdHNHcm91cGVkQnlEYXRlLCBcInRlbXBcIik7XHJcblxyXG4gICAgcmV0dXJuIHRocmVlSG91ckZvcmVjYXN0c1dpdGhNYXhUZW1wO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnLDoXTDrSBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrSBqZW4gcyBkYXR1bWVtIGJleiDEjWFzb3bDqWhvIMO6ZGFqZVxyXG4gICAqIEBwYXJhbSB7cG9sZSBvYmpla3TFryB0eXB1IEZvcmVjYXN0fSBmb3JlY2FzdHNBcnJcclxuICAgKi9cclxuICBwcml2YXRlIF9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnMoZm9yZWNhc3RzQXJyOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4pOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4ge1xyXG4gICAgcmV0dXJuIGZvcmVjYXN0c0Fyci5tYXAoKGZvcmVjYXN0KSA9PiB7XHJcbiAgICAgIGZvcmVjYXN0LmRhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgICBgJHtmb3JlY2FzdC5kYXRlLmdldEZ1bGxZZWFyKCl9LSR7Zm9yZWNhc3QuZGF0ZS5nZXRNb250aCgpICsgMX0tJHtmb3JlY2FzdC5kYXRlLmdldERhdGUoKX1gXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBmb3JlY2FzdDtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsIi8qKlxyXG4gKiBTZXNrdXDDrSBwcnZreSBwb2xlIGRvIHNrdXBpbiwga3RlcsOpIG1hasOtIHN0ZWpub3UgaG9kbm90dSB6YWRhbsOpIHByb3BlcnR5XHJcbiAqIEBwYXJhbSB7cG9sZSBvYmpla3TFr30gYXJyXHJcbiAqIEBwYXJhbSB7dmxhc3Rub3N0IG9iamVrdHUgcG9sZX0gcHJvcGVydHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBncm91cEFyckJ5UHJvcGVydHkoYXJyLCBwcm9wZXJ0eSkge1xyXG4gIHJldHVybiBhcnIucmVkdWNlKChhY2MsIG9iaikgPT4ge1xyXG4gICAgbGV0IGtleSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICBpZiAoIWFjY1trZXldKSB7XHJcbiAgICAgIGFjY1trZXldID0gW107XHJcbiAgICB9XHJcbiAgICBhY2Nba2V5XS5wdXNoKG9iaik7XHJcbiAgICByZXR1cm4gYWNjO1xyXG4gIH0sIHt9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFplIHNlc2t1cGVuw6lobyBwb2xlIHZyw6F0w60gcHJvIGthxb5kb3Ugc2t1cGludSBvYmpla3QgcyBuZWp2ecWhxaHDrSBob2Rub3RvdSBwcm9wZXJ0eVxyXG4gKiBAcGFyYW0ge3BvbGUgb2JqZWt0xa8sIGt0ZXLDqSBqc291IHNlc2t1cGVueSBwb2RsZSBqZWRuw6kgeiBwcm9wZXJ0eSBvYmpla3R1fSBncm91cGVkQXJyXHJcbiAqIEBwYXJhbSB7cHJvcGVydHkgb2JqZWt0dSBwb2xlLCBwcm8ga3Rlcm91IHNlIHYga2HFvmTDqSBza3VwaW7EmyBobGVkw6EgbmVqdnnFocWhw60gaG9kbm90YX0gcHJvcGVydHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFycihncm91cGVkQXJyLCBwcm9wZXJ0eSkge1xyXG4gIGxldCBtYXhWYWx1ZXNGcm9tR3JvdXBBcnIgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgZm9yIChsZXQgZ3JvdXBLZXkgaW4gZ3JvdXBlZEFycikge1xyXG4gICAgY29uc3QgbWF4ID0gZ3JvdXBlZEFycltncm91cEtleV0ucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBwcmV2W3Byb3BlcnR5XSA+IGN1cnJlbnRbcHJvcGVydHldID8gcHJldiA6IGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuICAgIG1heFZhbHVlc0Zyb21Hcm91cEFyci5wdXNoKG1heCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWF4VmFsdWVzRnJvbUdyb3VwQXJyO1xyXG59XHJcbiIsImltcG9ydCBGaXZlRGF5Rm9yZWNhc3QgZnJvbSBcIi4vRml2ZURheUZvcmVjYXN0XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSBwcm8gesOtc2vDoW7DrSBhIHByw6FjaSBzIGRhdHksIGt0ZXLDoSB6w61za2FsYSB6IGRhbsOpIFVSTFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcE1vZGVsIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfdXJsOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfY2l0eU5hbWU6IHN0cmluZztcclxuICBwcml2YXRlIF91bml0czogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2ZvcmVjYXN0OiBGaXZlRGF5Rm9yZWNhc3Q7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG4gIGdldCBmb3JlY2FzdCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9mb3JlY2FzdDtcclxuICB9XHJcblxyXG4gIHNldCBjaXR5TmFtZShjaXR5TmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9jaXR5TmFtZSA9IGNpdHlOYW1lO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIGNpdHlOYW1lOiBzdHJpbmcsIHVuaXRzID0gXCJtZXRyaWNcIikge1xyXG4gICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgdGhpcy5fY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICAgIHRoaXMuX3VuaXRzID0gdW5pdHM7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBaw61za8OhIGEgbmFzdGF2w60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIDUgZG7DrSBwcm8gZGFuw6kgbcSbc3RvIGEgamVkbm90a3UsIHZlIGt0ZXLDqSBzZSB6b2JyYXp1amUgdGVwbG90YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCkge1xyXG4gICAgY29uc3QgdXJsV2l0aENpdHlOYW1lQW5kVW5pdHMgPSB0aGlzLl91cmwuY29uY2F0KFwiJnE9XCIsIHRoaXMuX2NpdHlOYW1lLCBcIiZ1bml0cz1cIiwgdGhpcy5fdW5pdHMpO1xyXG4gICAgY29uc3QgZm9yZWNhc3QgPSBhd2FpdCB0aGlzLmZldGNoRm9yZWNhc3QodXJsV2l0aENpdHlOYW1lQW5kVW5pdHMpO1xyXG4gICAgdGhpcy5fZm9yZWNhc3QgPSBuZXcgRml2ZURheUZvcmVjYXN0KGZvcmVjYXN0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5hxI10ZSBwxZllZHBvdsSbZCB6IGRhbsOpIHVybFxyXG4gICAqIEBwYXJhbSB7YWRyZXNhLCB6ZSBrdGVyw6kgc2UgbmHEjcOtdGFqw60gZGF0YX0gdXJsXHJcbiAgICogQHJldHVybnMgcG9sZSBvYmpla3TFryBzIMO6ZGFqaSBvIHDFmWVkcG92xJtkaVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hGb3JlY2FzdCh1cmw6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xyXG4gICAgY29uc3QgZm9yZWNhc3QgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICByZXR1cm4gZm9yZWNhc3Q7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcclxuPHN0eWxlPlxyXG4gICAgaDMge1xyXG4gICAgICAgIGNvbG9yOiBjb3JhbDtcclxuICAgIH0gIFxyXG48L3N0eWxlPlxyXG48ZGl2IGNsYXNzPVwid2VhdGhlci1hcHBfX2NhcmRcIj5cclxuICAgIDxoMj48c2xvdCBuYW1lPVwiZGF5XCIgLz48L2gyPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJ0ZW1wXCIvPjwvaDM+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cImRlc2NyaXB0aW9uXCIvPjw8L2gzPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJ3aW5kXCIvPjw8L2gzPlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gSFRNTEVsZW1lbnQgPHdlYXRoZXItYXBwLWNhcmQ+LCBrdGVyw70gc2xvdcW+w60gcHJvIHpvYnJhemVuw60gcMWZZWRwb3bEm2RpIHBvxI1hc8OtIG5hIDEgZGVuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwQ2FyZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcbn1cclxuIiwiY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcclxuICA8Zm9ybSBpZD1cInNlYXJjaC1mb3JtXCI+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiTsOhemV2IGhsZWRhbsOpaG8gbcSbc3RhXCI+XHJcbiAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkhsZWRhdDwvYnV0dG9uPjxicj5cclxuICA8L2Zvcm0+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcC1zZWFyY2g+LCBrdGVyw70gc2xvdcW+w60gcHJvIHpvYnJhemVuw60gcG9sZSBhIHRsYcSNw610a2EgcHJvIHZ5aGxlZMOhbsOtIG3Em3N0YVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFNlYXJjaCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBLZHnFviAnc2VhcmNoLWZvcm0nIG9kY2h5dMOtIHVkw6Fsb3N0ICdzdWJtaXQnIHZ5dHZvxZnDrSB2bGFzdG7DrSBldmVudCBhIHRlbiBvZGXFoWxlLlxyXG4gICAgICogViBwxZnDrXBhZMSbLCDFvmUgZG8gaW5wdXR1IGJ5bGEgemFkw6FuYSBob2Rub3RhLCB0YWsgcG/FoWxlIGkgamkuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlYXJjaC1mb3JtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gdGhpcy5faW5wdXQudmFsdWU7XHJcbiAgICAgIGlmIChpbnB1dFZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImVtcHR5SW5wdXRcIikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGlucHV0VmFsdWUgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgV2VhdGhlckFwcFNlYXJjaCBmcm9tIFwiLi9XZWF0aGVyQXBwU2VhcmNoXCI7XHJcblxyXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG48ZGl2PlxyXG4gICAgPHdlYXRoZXItYXBwLXNlYXJjaD48L3dlYXRoZXItYXBwLXNlYXJjaD5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwiZXJyb3JNZXNzYWdlXCI+PC9zbG90PjwvaDM+XHJcbiAgICA8aDE+PHNsb3QgbmFtZT1cImNpdHlcIj48L3Nsb3Q+PC9oMT5cclxuICAgIDxkaXYgY2xhc3M9XCJ3ZWF0aGVyLWFwcF9fY2FyZHNcIj5cclxuICAgICAgPHNsb3QgbmFtZT1cIndlYXRoZXItYXBwLWNhcmRcIj48L3Nsb3Q+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcD4sIGt0ZXLDvSB6b2JyYXp1amUgdnlobGVkw6F2YWPDrSBwb2xlIHMgdGxhxI3DrXRrZW0gYSB0YWvDqSBwxZllZHBvdsSbZGkgcG/EjWFzw60gbmEgNSBkbsOtIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHAgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3dlYXRoZXJBcHBTZWFyY2g6IFdlYXRoZXJBcHBTZWFyY2g7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwid2VhdGhlci1hcHAtc2VhcmNoXCIpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAvLyBQb2t1ZCAnd2VhdGhlci1hcHAtc2VhcmNoJyBvZGNoeXTDrSB1ZMOhbG9zdCAnZW1wdHlJbnB1dCcgcG/FoWxlIHVkw6Fsb3N0LCBrdGVyw6kgdnl2b2zDoSBvZHN0cmFuxJtuw60gbsOhenZ1IG3Em3N0YSBhIHDFmWVkcG92xJtkw60gYSBuYXN0YXbDrSBjaHlib3ZvdSBobMOhxaFrdVxyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJlbXB0eUlucHV0XCIsIHsgZGV0YWlsOiBcIlZ5cGzFiCBuw6F6ZXYgbcSbc3RhIGJyw6HFoWtvLlwiIH0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFBva3VkICd3ZWF0aGVyLWFwcC1zZWFyY2gnIG9kY2h5dMOtIHVkw6Fsb3N0ICdzZWFyY2hTdWJtaXQnLCB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQgYSB0ZW4gb2RlxaFsZSBzcG9sdSBzIG7DoXp2ZW0gbcSbc3RhLCBwcm8ga3RlcsOpIHNlIG3DoSB2eWhsZWRhdCBwxZllZHBvdsSbxI9cclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcInNlYXJjaFN1Ym1pdFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGV2ZW50LmRldGFpbCB9KSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuLi9Nb2RlbHMvVGhyZWVIb3VyRm9yZWNhc3RcIjtcclxuaW1wb3J0IHsgQ2l0eSB9IGZyb20gXCIuLi9Nb2RlbHMvQ2l0eVwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcENhcmQgZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcENhcmRcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBTZWFyY2ggZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcFNlYXJjaFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcCBmcm9tIFwiLi9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwXCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSBzZSBzdGFyw6EgbyBVSSBhcGxpa2FjZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFZpZXcge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF93ZWF0aGVyQXBwOiBIVE1MRWxlbWVudDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcFwiLCBXZWF0aGVyQXBwKTtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcC1zZWFyY2hcIiwgV2VhdGhlckFwcFNlYXJjaCk7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwid2VhdGhlci1hcHAtY2FyZFwiLCBXZWF0aGVyQXBwQ2FyZCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ3ZWF0aGVyLWFwcFwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmQodGhpcy5fd2VhdGhlckFwcCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5jcmVhdGVFcnJvck1lc3NhZ2UoZXZlbnQuZGV0YWlsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogVnlrcmVzbMOtIHDFmWVkcG92xJtkaSBwcm8gemFkYW7DqSBtxJtzdG9cclxuICAgKiBAcGFyYW0ge0FycmF5PFRocmVlSG91ckZvcmVjYXN0Pn0gZm9yZWNhc3RzIC0gcG9sZSBwxZllZHBvdsSbZMOtLCBrdGVyw6kgc2UgbWFqw60gdnlrcmVzbGl0XHJcbiAgICogQHBhcmFtIHtDaXR5fSBjaXR5IC0gbcSbc3RvLCBwcm8ga3RlcsOpIHNlIHDFmWVkcG92xJvEjyB2eWtyZXNsdWplXHJcbiAgICovXHJcbiAgcHVibGljIHJlbmRlckZvcmVjYXN0c0ZvckNpdHkoZm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4sIGNpdHk6IENpdHkpIHtcclxuICAgIC8vIE9kc3RyYW7DrSBlbGVtZW50eSBzIG7DoXp2ZW0gbcSbc3RhIGEgcMWZZWRwb3bEm2RpXHJcbiAgICB0aGlzLnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcblxyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnQgcyBuw6F6dmVtIG3Em3N0YSBhIHDFmWlwb2rDrSBobyBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIGNvbnN0IGNpdHlUZXh0Tm9kZSA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImNpdHlcIiwgYCR7Y2l0eS5uYW1lfWApO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hcHBlbmRDaGlsZChjaXR5VGV4dE5vZGUpO1xyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnR5IDx3ZWF0aGVyLWFwcC1jYXJkPiBhIHDFmWlwb2rDrSBqZSBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIHRoaXMuX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2RzdHJhbsOtIGVsZW1lbnR5IHMgbsOhenZlbSBtxJtzdGEgYSBqZWRub3RsaXbDqSBwxZllZHBvdsSbZGlcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKSB7XHJcbiAgICB3aGlsZSAodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKSB7XHJcbiAgICAgIHRoaXMuX3dlYXRoZXJBcHAucmVtb3ZlQ2hpbGQodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5hc3RhdsOtIGVsZW1lbnR1IDx3ZWF0aGVyLWFwcD4gY2h5Ym92b3UgenByw6F2dVxyXG4gICAqIEBwYXJhbSBlcnJvck1lc3NhZ2UgY2h5Ym92w6EgenByw6F2YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZVNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJlcnJvck1lc3NhZ2VcIiwgZXJyb3JNZXNzYWdlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlU2xvdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWeXR2b8WZw60gZWxlbWVudHkgPHdlYXRoZXItYXBwLWNhcmQ+IHpvYnJhenVqw61jw60gZGVuLCB0ZXBsb3R1LCBwb3BpcyBwb8SNYXPDrSBhIHJ5Y2hsb3N0IHbEm3RydVxyXG4gICAqIEthxb5kw70geiB2eXR2b8WZZW7DvWNoIGVsZW1lbnTFryBwxZlpcG9qw60gayA8d2VhdGhlci1hcHA+XHJcbiAgICogQHBhcmFtIGZvcmVjYXN0cyBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHM6IFRocmVlSG91ckZvcmVjYXN0W10pIHtcclxuICAgIGZvcmVjYXN0cy5mb3JFYWNoKChmb3JlY2FzdCkgPT4ge1xyXG4gICAgICAvLyBWeXR2b8WZw60gZWxlbWVudCA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgY29uc3Qgd2VhdGhlckFwcENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwid2VhdGhlci1hcHAtY2FyZFwiKTtcclxuICAgICAgd2VhdGhlckFwcENhcmQuc2V0QXR0cmlidXRlKFwic2xvdFwiLCBcIndlYXRoZXItYXBwLWNhcmRcIik7XHJcblxyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIG7DoXpldiBkbmVcclxuICAgICAgY29uc3QgZGF5U2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImRheVwiLCBmb3JlY2FzdC5nZXREYXlOYW1lKCkpO1xyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIHRlcGxvdHVcclxuICAgICAgY29uc3QgdGVtcFNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJ0ZW1wXCIsIGAke2ZvcmVjYXN0LnRlbXB9YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcG9waXMgcG/EjWFzw61cclxuICAgICAgY29uc3QgZGVzY1Nsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJkZXNjcmlwdGlvblwiLCBgJHtmb3JlY2FzdC53ZWF0aGVyRGVzY3JpcHRpb259YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcnljaGxvc3QgdsSbdHJ1XHJcbiAgICAgIGNvbnN0IHdpbmRTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwid2luZFwiLCBgJHtmb3JlY2FzdC53aW5kU3BlZWR9YCk7XHJcblxyXG4gICAgICAvLyBWxaFlY2hueSB2eXR2b8WZZW7DqSBlbGVtZW50eSBwxZlpcG9qw60gayA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgd2VhdGhlckFwcENhcmQuYXBwZW5kKGRheVNsb3QsIHRlbXBTbG90LCBkZXNjU2xvdCwgd2luZFNsb3QpO1xyXG4gICAgICB0aGlzLl93ZWF0aGVyQXBwLmFwcGVuZENoaWxkKHdlYXRoZXJBcHBDYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnl0dm/FmcOtIGVsZW1lbnQgPHRleHRub2RlPiBzIGRhbm91IGhvZG5vdG91IGF0cmlidXR1ICdzbG90JyBhICdpbm5lckhUTUwnXHJcbiAgICogQHBhcmFtIHNsb3ROYW1lIGhvZG5vdGEgYXRyaWJ1dHUgJ3Nsb3QnXHJcbiAgICogQHBhcmFtIGlubmVySFRNTFZhbHVlIGhvZG5vdGEgJ2lubmVySFRNTCdcclxuICAgKi9cclxuICBwcml2YXRlIF9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoc2xvdE5hbWU6IHN0cmluZywgaW5uZXJIVE1MVmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgdGV4dE5vZGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHROb2RlXCIpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LnNldEF0dHJpYnV0ZShcInNsb3RcIiwgc2xvdE5hbWUpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LmlubmVySFRNTCA9IGlubmVySFRNTFZhbHVlO1xyXG4gICAgcmV0dXJuIHRleHROb2RlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9kY2h5dMOtIHVkw6Fsb3N0IHZ5aGxlZMOhbsOtIG7DoXp2dSBtxJtzdGEgYSBub3bDvSBuw6F6ZXYgcG/FoWxlIGRvIFdlYXRoZXJBcHBDb250cm9sbGVydVxyXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gbWV0b2RhIFdlYXRoZXJBcHBDb250cm9sbGVydSwga3RlcsOhIHNpIG5hIHrDoWtsYWTEmyBuw6F6dnUgbcSbc3RhIHZ5xb7DoWTDoSBub3bDoSBkYXRhIGEgcMWZZWtyZXNsw60gVUlcclxuICAgKi9cclxuICBwdWJsaWMgYmluZFNlYXJjaENpdHkoaGFuZGxlcikge1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwic2VhcmNoU3VibWl0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgaGFuZGxlcihldmVudC5kZXRhaWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiaW1wb3J0IFdlYXRoZXJBcHBDb250cm9sbGVyIGZyb20gXCIuL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlclwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcE1vZGVsIGZyb20gXCIuL01vZGVscy9XZWF0aGVyQXBwTW9kZWxcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBWaWV3IGZyb20gXCIuL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG5jb25zdCBSRVNPVVJDRV9VUkw6IHN0cmluZyA9XHJcbiAgXCJodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3Q/JmFwcGlkPTRhNzEwMjc3YjQxZDdkYTc5MWU0NGJmNTE1YmFjNmY3Jmxhbmc9Q1pcIjtcclxuXHJcbi8qKlxyXG4gKiBWeXR2b8WZw60gYXBsaWthY2kgem9icmF6dWrDrWPDrSBwxZllZHBvdsSbxI8gcG/EjWFzw60gbmEgbsOhc2xlZHVqw61jaCA1IGRuw60geiBkYXQsIGt0ZXLDoSB6w61za8OhIG5hIHphZGFuw6kgVVJMIGFkcmVzZVxyXG4gKiAtIHpuaWNpYWxpenVqZSBNb2RlbCwgQ29udHJvbGxlciBhIFZpZXdcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlYXRoZXJBcHAodXJsOiBzdHJpbmcpIHtcclxuICBjb25zdCBtb2RlbCA9IG5ldyBXZWF0aGVyQXBwTW9kZWwodXJsLCBcIlRvdmHEjW92XCIpO1xyXG4gIGF3YWl0IG1vZGVsLmluaXRpYWxpemUoKTtcclxuXHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBXZWF0aGVyQXBwQ29udHJvbGxlcihtb2RlbCwgbmV3IFdlYXRoZXJBcHBWaWV3KCkpO1xyXG59XHJcblxyXG5jcmVhdGVXZWF0aGVyQXBwKFJFU09VUkNFX1VSTCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=