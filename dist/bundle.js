!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t,e){this._model=t,this._view=e,this._view.bindSearchCity(this.handleSearchCity.bind(this)),this._view.bindGetGeolocation(this.handleGetGeolocation.bind(this)),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)}handleSearchCity(t){return i(this,void 0,void 0,(function*(){this._model.cityName=t,yield this._model.initialize(),this._checkForecastStatusAndRenderUI(`Pro město s názvem '${t}' se napodařilo najít předpověď.`)}))}handleGetGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this)):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Ve vašem prohlížeči není zjištění aktuální polohy podporováno."))}_success(t){return i(this,void 0,void 0,(function*(){this._model.latitude=t.coords.latitude,this._model.longitude=t.coords.longitude,yield this._model.initialize(!1),this._checkForecastStatusAndRenderUI("Pro vaši aktuální polohu se nepodařilo najít předpověď.")}))}_error(){this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Pro vaši aktuální polohu se nepodařilo najít předpověď.")}_checkForecastStatusAndRenderUI(t){"200"===this._model.forecast.cod?this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage(t))}}class r{constructor(t,e,n,i){this._temp=t,this._date=new Date(e),this._weatherDescription=n,this._windSpeed=i}get temp(){return Math.round(this._temp)}get date(){return this._date}get weatherDescription(){return this._weatherDescription}get windSpeed(){return this._windSpeed}set date(t){this._date=t}getDayName(){return new Intl.DateTimeFormat("cs-CZ",{weekday:"long"}).format(this.date)}}class s{constructor(t,e,n,i){this._name=t,this._country=e,this._sunrise=n,this._sunset=i}get name(){return this._name}get country(){return this._country}get sunrise(){return this._sunrise}get sunset(){return this._sunset}}class a{constructor(t){if(this._treeHourForecasts=new Array,this._cod=t.cod,"200"===this._cod){for(let e of t.list)this._treeHourForecasts.push(new r(e.main.temp,e.dt_txt,e.weather[0].description,e.wind.speed));this._city=new s(t.city.name,t.city.country,t.city.sunrise,t.city.sunset)}}get cod(){return this._cod}get city(){return this._city}getForecastsWithHighestTempForEveryDay(){const t=this._getForecastsWithoutHours(this._treeHourForecasts);var e;return function(t,e){let n=new Array;for(let i in t){const o=t[i].reduce((t,n)=>t[e]>n[e]?t:n);n.push(o)}return n}((e="date",t.reduce((t,n)=>{let i=n[e];return t[i]||(t[i]=[]),t[i].push(n),t},{})),"temp")}_getForecastsWithoutHours(t){return t.map(t=>(t.date=new Date(`${t.date.getFullYear()}-${t.date.getMonth()+1}-${t.date.getDate()}`),t))}}var c=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class h{constructor(t,e,n="metric"){this._url=t,this._cityName=e,this._units=n}get forecast(){return this._forecast}set cityName(t){this._cityName=t}set latitude(t){this._latitude=t}set longitude(t){this._longitude=t}initialize(t=!0){return c(this,void 0,void 0,(function*(){let e="";e=t?this._url.concat("&q=",this._cityName,"&units=",this._units):this._url.concat("&lat=",this._latitude,"&lon=",this._longitude,"&units=",this._units);const n=yield this.fetchForecast(e);this._forecast=new a(n)}))}fetchForecast(t){return c(this,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.json()}))}}const d=document.createElement("template");d.innerHTML='\n<style>\n    h3 {\n        color: coral;\n    }  \n</style>\n<div class="weather-app__card">\n    <h2><slot name="day" /></h2>\n    <h3><slot name="temp"/></h3>\n    <h3><slot name="description"/><</h3>\n    <h3><slot name="wind"/><</h3>\n</div>\n';class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d.content.cloneNode(!0))}}const l=document.createElement("template");l.innerHTML='\n  <form id="search-form">\n      <input type="text" placeholder="Název hledaného města">\n      <button type="submit">Hledat</button>\n      <button id="location">Geo lokace</button>\n  </form>\n';class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this._input=this.shadowRoot.querySelector("input")}connectedCallback(){this.shadowRoot.getElementById("location").addEventListener("click",t=>{t.preventDefault(),this.dispatchEvent(new CustomEvent("getGeolocation"))}),this.shadowRoot.getElementById("search-form").addEventListener("submit",t=>{t.preventDefault();const e=this._input.value;""===e?this.dispatchEvent(new CustomEvent("emptyInput")):(this._input.value="",this.dispatchEvent(new CustomEvent("searchSubmit",{detail:e})))})}}const m=document.createElement("template");m.innerHTML='\n<div>\n    <weather-app-search></weather-app-search>\n    <h3><slot name="errorMessage"></slot></h3>\n    <h1><slot name="city"></slot></h1>\n    <div class="weather-app__cards">\n      <slot name="weather-app-card"></slot>\n    </div>\n</div>\n';class _ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this._weatherAppSearch=this.shadowRoot.querySelector("weather-app-search")}connectedCallback(){this._weatherAppSearch.addEventListener("emptyInput",t=>{this.dispatchEvent(new CustomEvent("emptyInput",{detail:"Vyplň název města bráško."}))}),this._weatherAppSearch.addEventListener("searchSubmit",t=>{this.dispatchEvent(new CustomEvent("searchSubmit",{detail:t.detail}))}),this._weatherAppSearch.addEventListener("getGeolocation",t=>{this.dispatchEvent(new CustomEvent("getGeolocation"))})}}class v{constructor(){window.customElements.define("weather-app",_),window.customElements.define("weather-app-search",p),window.customElements.define("weather-app-card",u),this._weatherApp=document.createElement("weather-app"),document.getElementsByTagName("body")[0].append(this._weatherApp),this._weatherApp.addEventListener("emptyInput",t=>{this.removeCityNameAndForecasts(),this.createErrorMessage(t.detail)})}renderForecastsForCity(t,e){this.removeCityNameAndForecasts();const n=this._createTextNodeSetSlotAndInnerHTML("city",""+e.name);this._weatherApp.appendChild(n),this._createWeatherAppCards(t)}removeCityNameAndForecasts(){for(;this._weatherApp.firstChild;)this._weatherApp.removeChild(this._weatherApp.firstChild)}createErrorMessage(t){const e=this._createTextNodeSetSlotAndInnerHTML("errorMessage",t);this._weatherApp.appendChild(e)}_createWeatherAppCards(t){t.forEach(t=>{const e=document.createElement("weather-app-card");e.setAttribute("slot","weather-app-card");const n=this._createTextNodeSetSlotAndInnerHTML("day",t.getDayName()),i=this._createTextNodeSetSlotAndInnerHTML("temp",""+t.temp),o=this._createTextNodeSetSlotAndInnerHTML("description",""+t.weatherDescription),r=this._createTextNodeSetSlotAndInnerHTML("wind",""+t.windSpeed);e.append(n,i,o,r),this._weatherApp.appendChild(e)})}_createTextNodeSetSlotAndInnerHTML(t,e){const n=document.createElement("textNode");return n.setAttribute("slot",t),n.innerHTML=e,n}bindSearchCity(t){this._weatherApp.addEventListener("searchSubmit",e=>{t(e.detail)})}bindGetGeolocation(t){this._weatherApp.addEventListener("getGeolocation",e=>{t()})}}var w=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){w(this,void 0,void 0,(function*(){const e=new h(t,"Tovačov");yield e.initialize();new o(e,new v)}))}("https://api.openweathermap.org/data/2.5/forecast?&appid=4a710277b41d7da791e44bf515bac6f7&lang=CZ")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9Nb2RlbHMvQ2l0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0ZpdmVEYXlGb3JlY2FzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVscy9XZWF0aGVyQXBwTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXdzL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9XZWF0aGVyQXBwVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlYXRoZXJBcHBDb250cm9sbGVyIiwibW9kZWwiLCJ2aWV3IiwidGhpcyIsIl9tb2RlbCIsIl92aWV3IiwiYmluZFNlYXJjaENpdHkiLCJoYW5kbGVTZWFyY2hDaXR5IiwiYmluZEdldEdlb2xvY2F0aW9uIiwiaGFuZGxlR2V0R2VvbG9jYXRpb24iLCJyZW5kZXJGb3JlY2FzdHNGb3JDaXR5IiwiZm9yZWNhc3QiLCJnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSIsImNpdHkiLCJjaXR5TmFtZSIsImluaXRpYWxpemUiLCJfY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJfc3VjY2VzcyIsIl9lcnJvciIsInJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzIiwiY3JlYXRlRXJyb3JNZXNzYWdlIiwicG9zaXRpb24iLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImVycm9yTWVzc2FnZSIsImNvZCIsIlRocmVlSG91ckZvcmVjYXN0IiwidGVtcCIsImRhdGUiLCJ3ZWF0aGVyRGVzY3JpcHRpb24iLCJ3aW5kU3BlZWQiLCJfdGVtcCIsIl9kYXRlIiwiRGF0ZSIsIl93ZWF0aGVyRGVzY3JpcHRpb24iLCJfd2luZFNwZWVkIiwiTWF0aCIsInJvdW5kIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0Iiwid2Vla2RheSIsImZvcm1hdCIsIkNpdHkiLCJjb3VudHJ5Iiwic3VucmlzZSIsInN1bnNldCIsIl9uYW1lIiwiX2NvdW50cnkiLCJfc3VucmlzZSIsIl9zdW5zZXQiLCJqc29uT2JqZWN0IiwiX3RyZWVIb3VyRm9yZWNhc3RzIiwiQXJyYXkiLCJfY29kIiwidGhyZWVIb3VyRm9yZWNhc3QiLCJsaXN0IiwicHVzaCIsIm1haW4iLCJkdF90eHQiLCJ3ZWF0aGVyIiwiZGVzY3JpcHRpb24iLCJ3aW5kIiwic3BlZWQiLCJfY2l0eSIsInRocmVlSG91ckZvcmVjYXN0cyIsIl9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnMiLCJncm91cGVkQXJyIiwibWF4VmFsdWVzRnJvbUdyb3VwQXJyIiwiZ3JvdXBLZXkiLCJtYXgiLCJyZWR1Y2UiLCJwcmV2IiwiY3VycmVudCIsImdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyIiwiYWNjIiwib2JqIiwiZm9yZWNhc3RzQXJyIiwibWFwIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ1cmwiLCJ1bml0cyIsIl91cmwiLCJfY2l0eU5hbWUiLCJfdW5pdHMiLCJfZm9yZWNhc3QiLCJfbGF0aXR1ZGUiLCJfbG9uZ2l0dWRlIiwiaW5pdGlhbGl6ZUJ5Q2l0eU5hbWUiLCJyZXN1bHRVcmwiLCJjb25jYXQiLCJmZXRjaEZvcmVjYXN0IiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIldlYXRoZXJBcHBDYXJkIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsImF0dGFjaFNoYWRvdyIsInNoYWRvd1Jvb3QiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJXZWF0aGVyQXBwU2VhcmNoIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJpbnB1dFZhbHVlIiwiZGV0YWlsIiwiV2VhdGhlckFwcCIsIl93ZWF0aGVyQXBwU2VhcmNoIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJfd2VhdGhlckFwcCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kIiwiZm9yZWNhc3RzIiwiY2l0eVRleHROb2RlIiwiX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTCIsIl9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlcnJvck1lc3NhZ2VTbG90IiwiZm9yRWFjaCIsIndlYXRoZXJBcHBDYXJkIiwic2V0QXR0cmlidXRlIiwiZGF5U2xvdCIsImdldERheU5hbWUiLCJ0ZW1wU2xvdCIsImRlc2NTbG90Iiwid2luZFNsb3QiLCJzbG90TmFtZSIsImlubmVySFRNTFZhbHVlIiwidGV4dE5vZGVFbGVtZW50IiwiaGFuZGxlciIsImNyZWF0ZVdlYXRoZXJBcHAiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gs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RXlHLEVBQWVULE9BQU9XLEVBQVNFLEVBQVVDLEVBQVVDLEdBQ25EOUksS0FBSzZILFlBQVluQixZQUFZOEIsS0FTekIsbUNBQW1DTyxFQUFrQkMsR0FDM0QsTUFBTUMsRUFBa0IvQyxTQUFTQyxjQUFjLFlBRy9DLE9BRkE4QyxFQUFnQlIsYUFBYSxPQUFRTSxHQUNyQ0UsRUFBZ0I3QyxVQUFZNEMsRUFDckJDLEVBT0YsZUFBZUMsR0FDcEJsSixLQUFLNkgsWUFBWVosaUJBQWlCLGVBQWlCQyxJQUNqRGdDLEVBQVFoQyxFQUFNSyxVQVFYLG1CQUFtQjJCLEdBQ3hCbEosS0FBSzZILFlBQVlaLGlCQUFpQixpQkFBbUJDLElBQ25EZ0MsTywyU0M1R04sU0FBZ0NoRSxHLGtDQUM5QixNQUFNcEYsRUFBUSxJQUFJLEVBQWdCb0YsRUFBSyxpQkFDakNwRixFQUFNYyxhQUVPLElBQUlmLEVBQXFCQyxFQUFPLElBQUksTUFHekRxSixDQWJFIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCBXZWF0aGVyQXBwTW9kZWwgZnJvbSBcIi4uL01vZGVscy9XZWF0aGVyQXBwTW9kZWxcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBWaWV3IGZyb20gXCIuLi9WaWV3cy9XZWF0aGVyQXBwVmlld1wiO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgemFqw63FocWldWrDrWPDrSBrb211bmlrYWNpIG1lemkgZGF0eSBhIFVJIGFwbGlrYWNlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwQ29udHJvbGxlciB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX21vZGVsOiBXZWF0aGVyQXBwTW9kZWw7XHJcbiAgcHJpdmF0ZSBfdmlldzogV2VhdGhlckFwcFZpZXc7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IobW9kZWw6IFdlYXRoZXJBcHBNb2RlbCwgdmlldzogV2VhdGhlckFwcFZpZXcpIHtcclxuICAgIHRoaXMuX21vZGVsID0gbW9kZWw7XHJcbiAgICB0aGlzLl92aWV3ID0gdmlldztcclxuXHJcbiAgICB0aGlzLl92aWV3LmJpbmRTZWFyY2hDaXR5KHRoaXMuaGFuZGxlU2VhcmNoQ2l0eS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3ZpZXcuYmluZEdldEdlb2xvY2F0aW9uKHRoaXMuaGFuZGxlR2V0R2VvbG9jYXRpb24uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5fdmlldy5yZW5kZXJGb3JlY2FzdHNGb3JDaXR5KFxyXG4gICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5nZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpLFxyXG4gICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5jaXR5XHJcbiAgICApO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogUHJvIHphZGFuw70gbsOhemV2IG3Em3N0YSB2eWhsZWTDoSBwxZllZHBvdsSbxI8gYSBwxZlla3Jlc2zDrSBwb2RsZSBuw60gVUlcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2l0eU5hbWUgLSBuw6F6ZXYgbcSbc3RhLCBwcm8ga3RlcsOpIHNlIG3DoSB6amlzdGl0IHDFmWVkcG92xJvEj1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBoYW5kbGVTZWFyY2hDaXR5KGNpdHlOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX21vZGVsLmNpdHlOYW1lID0gY2l0eU5hbWU7XHJcbiAgICBhd2FpdCB0aGlzLl9tb2RlbC5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgdGhpcy5fY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJKGBQcm8gbcSbc3RvIHMgbsOhenZlbSAnJHtjaXR5TmFtZX0nIHNlIG5hcG9kYcWZaWxvIG5hasOtdCBwxZllZHBvdsSbxI8uYCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBaamlzdMOtIGFrdHXDoWxuw60gcG9sb2h1IGEgdnlobGVkw6EgcG9kbGUgbsOtIHDFmWVkcG92xJvEjyBhIG7DoXNsZWRuxJsgcMWZZWtyZXNsw60gVUkuXHJcbiAgICogViBwxZnDrXBhZMSbLCDFvmUgc2UgcG9sb2hhIG5lcG9kYcWZw60gemppc3RpdCBqZSB2eXBzw6FuYSBjaHlib3bDoSBobMOhxaFrYS5cclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlR2V0R2VvbG9jYXRpb24oKSB7XHJcbiAgICBpZiAoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xyXG4gICAgICB0aGlzLl92aWV3LnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcbiAgICAgIHRoaXMuX3ZpZXcuY3JlYXRlRXJyb3JNZXNzYWdlKFwiVmUgdmHFoWVtIHByb2hsw63FvmXEjWkgbmVuw60gemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHkgcG9kcG9yb3bDoW5vLlwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24odGhpcy5fc3VjY2Vzcy5iaW5kKHRoaXMpLCB0aGlzLl9lcnJvci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFYgcMWZw61wYWTEmyBuYWxlemVuw60gYWt0dcOhbG7DrSBwb2xvaHkgdnl2b2zDoSB6amnFoXTEm27DrSBwxZllZHBvdsSbZGlcclxuICAgKiBAcGFyYW0gcG9zaXRpb24gb2JqZWt0IHR5cHUgR2VvbG9jYXRpb25Qb3NpdGlvblxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgX3N1Y2Nlc3MocG9zaXRpb24pIHtcclxuICAgIHRoaXMuX21vZGVsLmxhdGl0dWRlID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xyXG4gICAgdGhpcy5fbW9kZWwubG9uZ2l0dWRlID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLl9tb2RlbC5pbml0aWFsaXplKGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLl9jaGVja0ZvcmVjYXN0U3RhdHVzQW5kUmVuZGVyVUkoXCJQcm8gdmHFoWkgYWt0dcOhbG7DrSBwb2xvaHUgc2UgbmVwb2RhxZlpbG8gbmFqw610IHDFmWVkcG92xJvEjy5cIik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWIHDFmcOtcGFkxJsgbmVuYWxlemVuw60gYWt0dcOhbG7DrSBwb2xvaHkgbmFzdGF2w60gY2h5Ym92b3UgaGzDocWha3VcclxuICAgKi9cclxuICBwcml2YXRlIF9lcnJvcigpIHtcclxuICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgIHRoaXMuX3ZpZXcuY3JlYXRlRXJyb3JNZXNzYWdlKFwiUHJvIHZhxaFpIGFrdHXDoWxuw60gcG9sb2h1IHNlIG5lcG9kYcWZaWxvIG5hasOtdCBwxZllZHBvdsSbxI8uXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3bEm8WZw60sIHpkYSBieWxhIG5hbGV6ZW5hIHDFmWVkcG92xJvEjywgcG9rdWQgYW5vIHDFmWVrcmVzbMOtIFVJLCBwb2t1ZCBuZSB6b2JyYXrDrSBjaHlib3ZvdSB6cHLDoXZvdVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NoZWNrRm9yZWNhc3RTdGF0dXNBbmRSZW5kZXJVSShlcnJvck1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuX21vZGVsLmZvcmVjYXN0LmNvZCA9PT0gXCIyMDBcIikge1xyXG4gICAgICB0aGlzLl92aWV3LnJlbmRlckZvcmVjYXN0c0ZvckNpdHkoXHJcbiAgICAgICAgdGhpcy5fbW9kZWwuZm9yZWNhc3QuZ2V0Rm9yZWNhc3RzV2l0aEhpZ2hlc3RUZW1wRm9yRXZlcnlEYXkoKSxcclxuICAgICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5jaXR5XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl92aWV3LnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcbiAgICAgIHRoaXMuX3ZpZXcuY3JlYXRlRXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSB0xZnDrWhvZGlub3UgcMWZZWRwb3bEm8SPXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGhyZWVIb3VyRm9yZWNhc3Qge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF90ZW1wOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfZGF0ZTogRGF0ZTtcclxuICBwcml2YXRlIF93ZWF0aGVyRGVzY3JpcHRpb246IHN0cmluZztcclxuICBwcml2YXRlIF93aW5kU3BlZWQ6IG51bWJlcjtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJpZXNcclxuICBnZXQgdGVtcCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fdGVtcCk7XHJcbiAgfVxyXG5cclxuICBnZXQgZGF0ZSgpOiBEYXRlIHtcclxuICAgIHJldHVybiB0aGlzLl9kYXRlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHdlYXRoZXJEZXNjcmlwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX3dlYXRoZXJEZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIGdldCB3aW5kU3BlZWQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl93aW5kU3BlZWQ7XHJcbiAgfVxyXG5cclxuICBzZXQgZGF0ZShkYXRlOiBEYXRlKSB7XHJcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BldGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IodGVtcDogbnVtYmVyLCBkYXRlOiBzdHJpbmcsIHdlYXRoZXJEZXNjcmlwdGlvbjogc3RyaW5nLCB3aW5kU3BlZWQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5fdGVtcCA9IHRlbXA7XHJcbiAgICB0aGlzLl9kYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICB0aGlzLl93ZWF0aGVyRGVzY3JpcHRpb24gPSB3ZWF0aGVyRGVzY3JpcHRpb247XHJcbiAgICB0aGlzLl93aW5kU3BlZWQgPSB3aW5kU3BlZWQ7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICBwdWJsaWMgZ2V0RGF5TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiY3MtQ1pcIiwgeyB3ZWVrZGF5OiBcImxvbmdcIiB9KS5mb3JtYXQodGhpcy5kYXRlKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuIiwiLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDaXR5IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2NvdW50cnk6IHN0cmluZztcclxuICBwcml2YXRlIF9zdW5yaXNlOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfc3Vuc2V0OiBudW1iZXI7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICB9XHJcblxyXG4gIGdldCBjb3VudHJ5KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fY291bnRyeTtcclxuICB9XHJcblxyXG4gIGdldCBzdW5yaXNlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3VucmlzZTtcclxuICB9XHJcblxyXG4gIGdldCBzdW5zZXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9zdW5zZXQ7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGNvdW50cnk6IHN0cmluZywgc3VucmlzZTogbnVtYmVyLCBzdW5zZXQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9jb3VudHJ5ID0gY291bnRyeTtcclxuICAgIHRoaXMuX3N1bnJpc2UgPSBzdW5yaXNlO1xyXG4gICAgdGhpcy5fc3Vuc2V0ID0gc3Vuc2V0O1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcbn1cclxuIiwiaW1wb3J0IHsgVGhyZWVIb3VyRm9yZWNhc3QgfSBmcm9tIFwiLi9UaHJlZUhvdXJGb3JlY2FzdFwiO1xyXG5pbXBvcnQgeyBDaXR5IH0gZnJvbSBcIi4vQ2l0eVwiO1xyXG5pbXBvcnQgeyBncm91cEFyckJ5UHJvcGVydHksIGdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyIH0gZnJvbSBcIi4uL1V0aWxzL2FycmF5LXV0aWxzXCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIHDFmWVkcG92xJvEjyBwb8SNYXPDrSBuYSA1IGRuw60sIHBvIDMgaG9kaW7DoWNoLCBwcm8gZGFuw6kgbcSbc3RvXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXZlRGF5Rm9yZWNhc3Qge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF9jb2Q6IHN0cmluZztcclxuICBwcml2YXRlIF90cmVlSG91ckZvcmVjYXN0czogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+ID0gbmV3IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PigpO1xyXG4gIHByaXZhdGUgX2NpdHk6IENpdHk7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG4gIGdldCBjb2QoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9jb2Q7XHJcbiAgfVxyXG5cclxuICBnZXQgY2l0eSgpOiBDaXR5IHtcclxuICAgIHJldHVybiB0aGlzLl9jaXR5O1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoanNvbk9iamVjdDogYW55KSB7XHJcbiAgICB0aGlzLl9jb2QgPSBqc29uT2JqZWN0LmNvZDtcclxuXHJcbiAgICBpZiAodGhpcy5fY29kID09PSBcIjIwMFwiKSB7XHJcbiAgICAgIGZvciAobGV0IHRocmVlSG91ckZvcmVjYXN0IG9mIGpzb25PYmplY3QubGlzdCkge1xyXG4gICAgICAgIHRoaXMuX3RyZWVIb3VyRm9yZWNhc3RzLnB1c2goXHJcbiAgICAgICAgICBuZXcgVGhyZWVIb3VyRm9yZWNhc3QoXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0Lm1haW4udGVtcCxcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3QuZHRfdHh0LFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC53aW5kLnNwZWVkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5fY2l0eSA9IG5ldyBDaXR5KFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5uYW1lLFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5jb3VudHJ5LFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5zdW5yaXNlLFxyXG4gICAgICAgIGpzb25PYmplY3QuY2l0eS5zdW5zZXRcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIC8qKlxyXG4gICAqIFZyw6F0w60gcG9sZSB0xZnDrWhvZGlub3bDvWNoIHDFmWVkcG92xJtkw60gcyBuZWp2ecWhxaHDrSB0ZXBsb3RvdSBwcm8ga2HFvmTDvSBkZW5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Rm9yZWNhc3RzV2l0aEhpZ2hlc3RUZW1wRm9yRXZlcnlEYXkoKTogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+IHtcclxuICAgIGNvbnN0IHRocmVlSG91ckZvcmVjYXN0cyA9IHRoaXMuX2dldEZvcmVjYXN0c1dpdGhvdXRIb3Vycyh0aGlzLl90cmVlSG91ckZvcmVjYXN0cyk7XHJcbiAgICBjb25zdCB0aHJlZUhvdXJGb3JlY2FzdHNHcm91cGVkQnlEYXRlID0gZ3JvdXBBcnJCeVByb3BlcnR5KHRocmVlSG91ckZvcmVjYXN0cywgXCJkYXRlXCIpO1xyXG4gICAgY29uc3QgdGhyZWVIb3VyRm9yZWNhc3RzV2l0aE1heFRlbXAgPSBnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFycih0aHJlZUhvdXJGb3JlY2FzdHNHcm91cGVkQnlEYXRlLCBcInRlbXBcIik7XHJcblxyXG4gICAgcmV0dXJuIHRocmVlSG91ckZvcmVjYXN0c1dpdGhNYXhUZW1wO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnLDoXTDrSBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrSBqZW4gcyBkYXR1bWVtIGJleiDEjWFzb3bDqWhvIMO6ZGFqZVxyXG4gICAqIEBwYXJhbSB7cG9sZSBvYmpla3TFryB0eXB1IEZvcmVjYXN0fSBmb3JlY2FzdHNBcnJcclxuICAgKi9cclxuICBwcml2YXRlIF9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnMoZm9yZWNhc3RzQXJyOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4pOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4ge1xyXG4gICAgcmV0dXJuIGZvcmVjYXN0c0Fyci5tYXAoKGZvcmVjYXN0KSA9PiB7XHJcbiAgICAgIGZvcmVjYXN0LmRhdGUgPSBuZXcgRGF0ZShcclxuICAgICAgICBgJHtmb3JlY2FzdC5kYXRlLmdldEZ1bGxZZWFyKCl9LSR7Zm9yZWNhc3QuZGF0ZS5nZXRNb250aCgpICsgMX0tJHtmb3JlY2FzdC5kYXRlLmdldERhdGUoKX1gXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiBmb3JlY2FzdDtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsIi8qKlxyXG4gKiBTZXNrdXDDrSBwcnZreSBwb2xlIGRvIHNrdXBpbiwga3RlcsOpIG1hasOtIHN0ZWpub3UgaG9kbm90dSB6YWRhbsOpIHByb3BlcnR5XHJcbiAqIEBwYXJhbSB7cG9sZSBvYmpla3TFr30gYXJyXHJcbiAqIEBwYXJhbSB7dmxhc3Rub3N0IG9iamVrdHUgcG9sZX0gcHJvcGVydHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBncm91cEFyckJ5UHJvcGVydHkoYXJyLCBwcm9wZXJ0eSkge1xyXG4gIHJldHVybiBhcnIucmVkdWNlKChhY2MsIG9iaikgPT4ge1xyXG4gICAgbGV0IGtleSA9IG9ialtwcm9wZXJ0eV07XHJcbiAgICBpZiAoIWFjY1trZXldKSB7XHJcbiAgICAgIGFjY1trZXldID0gW107XHJcbiAgICB9XHJcbiAgICBhY2Nba2V5XS5wdXNoKG9iaik7XHJcbiAgICByZXR1cm4gYWNjO1xyXG4gIH0sIHt9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFplIHNlc2t1cGVuw6lobyBwb2xlIHZyw6F0w60gcHJvIGthxb5kb3Ugc2t1cGludSBvYmpla3QgcyBuZWp2ecWhxaHDrSBob2Rub3RvdSBwcm9wZXJ0eVxyXG4gKiBAcGFyYW0ge3BvbGUgb2JqZWt0xa8sIGt0ZXLDqSBqc291IHNlc2t1cGVueSBwb2RsZSBqZWRuw6kgeiBwcm9wZXJ0eSBvYmpla3R1fSBncm91cGVkQXJyXHJcbiAqIEBwYXJhbSB7cHJvcGVydHkgb2JqZWt0dSBwb2xlLCBwcm8ga3Rlcm91IHNlIHYga2HFvmTDqSBza3VwaW7EmyBobGVkw6EgbmVqdnnFocWhw60gaG9kbm90YX0gcHJvcGVydHlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFycihncm91cGVkQXJyLCBwcm9wZXJ0eSkge1xyXG4gIGxldCBtYXhWYWx1ZXNGcm9tR3JvdXBBcnIgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgZm9yIChsZXQgZ3JvdXBLZXkgaW4gZ3JvdXBlZEFycikge1xyXG4gICAgY29uc3QgbWF4ID0gZ3JvdXBlZEFycltncm91cEtleV0ucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBwcmV2W3Byb3BlcnR5XSA+IGN1cnJlbnRbcHJvcGVydHldID8gcHJldiA6IGN1cnJlbnQ7XHJcbiAgICB9KTtcclxuICAgIG1heFZhbHVlc0Zyb21Hcm91cEFyci5wdXNoKG1heCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWF4VmFsdWVzRnJvbUdyb3VwQXJyO1xyXG59XHJcbiIsImltcG9ydCBGaXZlRGF5Rm9yZWNhc3QgZnJvbSBcIi4vRml2ZURheUZvcmVjYXN0XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSBwcm8gesOtc2vDoW7DrSBhIHByw6FjaSBzIGRhdHksIGt0ZXLDoSB6w61za2FsYSB6IGRhbsOpIFVSTFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcE1vZGVsIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfdXJsOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfY2l0eU5hbWU6IHN0cmluZztcclxuICBwcml2YXRlIF91bml0czogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2xhdGl0dWRlOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfbG9uZ2l0dWRlOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfZm9yZWNhc3Q6IEZpdmVEYXlGb3JlY2FzdDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IGZvcmVjYXN0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZvcmVjYXN0O1xyXG4gIH1cclxuXHJcbiAgc2V0IGNpdHlOYW1lKGNpdHlOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX2NpdHlOYW1lID0gY2l0eU5hbWU7XHJcbiAgfVxyXG5cclxuICBzZXQgbGF0aXR1ZGUobGF0aXR1ZGU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbGF0aXR1ZGUgPSBsYXRpdHVkZTtcclxuICB9XHJcblxyXG4gIHNldCBsb25naXR1ZGUobG9uZ2l0dWRlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX2xvbmdpdHVkZSA9IGxvbmdpdHVkZTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBjaXR5TmFtZTogc3RyaW5nLCB1bml0cyA9IFwibWV0cmljXCIpIHtcclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuICAgIHRoaXMuX2NpdHlOYW1lID0gY2l0eU5hbWU7XHJcbiAgICB0aGlzLl91bml0cyA9IHVuaXRzO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogWsOtc2vDoSBhIG5hc3RhdsOtIHDFmWVkcG92xJvEjyBwb8SNYXPDrSBuYSA1IGRuw60gcHJvIGRhbsOpIG3Em3N0byBuZWJvIHBvbG9odSBhIGplZG5vdGt5LCB2ZSBrdGVyw6kgc2Ugem9icmF6dWplIHRlcGxvdGFcclxuICAgKi9cclxuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZShpbml0aWFsaXplQnlDaXR5TmFtZSA9IHRydWUpIHtcclxuICAgIGxldCByZXN1bHRVcmwgPSBcIlwiO1xyXG5cclxuICAgIGlmIChpbml0aWFsaXplQnlDaXR5TmFtZSkge1xyXG4gICAgICByZXN1bHRVcmwgPSB0aGlzLl91cmwuY29uY2F0KFwiJnE9XCIsIHRoaXMuX2NpdHlOYW1lLCBcIiZ1bml0cz1cIiwgdGhpcy5fdW5pdHMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzdWx0VXJsID0gdGhpcy5fdXJsLmNvbmNhdChcIiZsYXQ9XCIsIHRoaXMuX2xhdGl0dWRlLCBcIiZsb249XCIsIHRoaXMuX2xvbmdpdHVkZSwgXCImdW5pdHM9XCIsIHRoaXMuX3VuaXRzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGZvcmVjYXN0ID0gYXdhaXQgdGhpcy5mZXRjaEZvcmVjYXN0KHJlc3VsdFVybCk7XHJcbiAgICB0aGlzLl9mb3JlY2FzdCA9IG5ldyBGaXZlRGF5Rm9yZWNhc3QoZm9yZWNhc3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTmHEjXRlIHDFmWVkcG92xJtkIHogZGFuw6kgdXJsXHJcbiAgICogQHBhcmFtIHthZHJlc2EsIHplIGt0ZXLDqSBzZSBuYcSNw610YWrDrSBkYXRhfSB1cmxcclxuICAgKiBAcmV0dXJucyBwb2xlIG9iamVrdMWvIHMgw7pkYWppIG8gcMWZZWRwb3bEm2RpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBmZXRjaEZvcmVjYXN0KHVybDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICBjb25zdCBmb3JlY2FzdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIHJldHVybiBmb3JlY2FzdDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG48c3R5bGU+XHJcbiAgICBoMyB7XHJcbiAgICAgICAgY29sb3I6IGNvcmFsO1xyXG4gICAgfSAgXHJcbjwvc3R5bGU+XHJcbjxkaXYgY2xhc3M9XCJ3ZWF0aGVyLWFwcF9fY2FyZFwiPlxyXG4gICAgPGgyPjxzbG90IG5hbWU9XCJkYXlcIiAvPjwvaDI+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cInRlbXBcIi8+PC9oMz5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwiZGVzY3JpcHRpb25cIi8+PDwvaDM+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cIndpbmRcIi8+PDwvaDM+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBIVE1MRWxlbWVudCA8d2VhdGhlci1hcHAtY2FyZD4sIGt0ZXLDvSBzbG91xb7DrSBwcm8gem9icmF6ZW7DrSBwxZllZHBvdsSbZGkgcG/EjWFzw60gbmEgMSBkZW5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxufVxyXG4iLCJjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG4gIDxmb3JtIGlkPVwic2VhcmNoLWZvcm1cIj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJOw6F6ZXYgaGxlZGFuw6lobyBtxJtzdGFcIj5cclxuICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+SGxlZGF0PC9idXR0b24+XHJcbiAgICAgIDxidXR0b24gaWQ9XCJsb2NhdGlvblwiPkdlbyBsb2thY2U8L2J1dHRvbj5cclxuICA8L2Zvcm0+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcC1zZWFyY2g+LCBrdGVyw70gc2xvdcW+w60gcHJvIHpvYnJhemVuw60gcG9sZSBhIHRsYcSNw610a2EgcHJvIHZ5aGxlZMOhbsOtIG3Em3N0YVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFNlYXJjaCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQbyBrbGlrbnV0w60gbmEgPGJ1dHRvbj4gcyBpZD1cImxvY2F0aW9uXCIgZG9qZGUgayBvZGVzbMOhbsOtIHZsYXN0bsOtaG8gZXZlbnR1LCBrdGVyw70gdnl2b2zDoSB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeVxyXG4gICAgICovXHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhdGlvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJnZXRHZW9sb2NhdGlvblwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEtkecW+ICdzZWFyY2gtZm9ybScgb2RjaHl0w60gdWTDoWxvc3QgJ3N1Ym1pdCcgdnl0dm/FmcOtIHZsYXN0bsOtIGV2ZW50IGEgdGVuIG9kZcWhbGUuXHJcbiAgICAgKiBWIHDFmcOtcGFkxJssIMW+ZSBkbyBpbnB1dHUgYnlsYSB6YWTDoW5hIGhvZG5vdGEsIHRhayBwb8WhbGUgaSBqaS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSB0aGlzLl9pbnB1dC52YWx1ZTtcclxuICAgICAgaWYgKGlucHV0VmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZW1wdHlJbnB1dFwiKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGlucHV0VmFsdWUgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgV2VhdGhlckFwcFNlYXJjaCBmcm9tIFwiLi9XZWF0aGVyQXBwU2VhcmNoXCI7XHJcblxyXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG48ZGl2PlxyXG4gICAgPHdlYXRoZXItYXBwLXNlYXJjaD48L3dlYXRoZXItYXBwLXNlYXJjaD5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwiZXJyb3JNZXNzYWdlXCI+PC9zbG90PjwvaDM+XHJcbiAgICA8aDE+PHNsb3QgbmFtZT1cImNpdHlcIj48L3Nsb3Q+PC9oMT5cclxuICAgIDxkaXYgY2xhc3M9XCJ3ZWF0aGVyLWFwcF9fY2FyZHNcIj5cclxuICAgICAgPHNsb3QgbmFtZT1cIndlYXRoZXItYXBwLWNhcmRcIj48L3Nsb3Q+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcD4sIGt0ZXLDvSB6b2JyYXp1amUgdnlobGVkw6F2YWPDrSBwb2xlIHMgdGxhxI3DrXRrZW0gYSB0YWvDqSBwxZllZHBvdsSbZGkgcG/EjWFzw60gbmEgNSBkbsOtIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHAgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3dlYXRoZXJBcHBTZWFyY2g6IFdlYXRoZXJBcHBTZWFyY2g7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwid2VhdGhlci1hcHAtc2VhcmNoXCIpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAvLyBQb2t1ZCA8d2VhdGhlci1hcHAtc2VhcmNoPiBvZGNoeXTDrSB1ZMOhbG9zdCAnZW1wdHlJbnB1dCcgcG/FoWxlIHVkw6Fsb3N0LCBrdGVyw6kgdnl2b2zDoSBvZHN0cmFuxJtuw60gbsOhenZ1IG3Em3N0YSBhIHDFmWVkcG92xJtkw60gYSBuYXN0YXbDrSBjaHlib3ZvdSBobMOhxaFrdVxyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJlbXB0eUlucHV0XCIsIHsgZGV0YWlsOiBcIlZ5cGzFiCBuw6F6ZXYgbcSbc3RhIGJyw6HFoWtvLlwiIH0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFBva3VkIDx3ZWF0aGVyLWFwcC1zZWFyY2g+IG9kY2h5dMOtIHVkw6Fsb3N0ICdzZWFyY2hTdWJtaXQnLCB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQgYSB0ZW4gb2RlxaFsZSBzcG9sdSBzIG7DoXp2ZW0gbcSbc3RhLCBwcm8ga3RlcsOpIHNlIG3DoSB2eWhsZWRhdCBwxZllZHBvdsSbxI9cclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcInNlYXJjaFN1Ym1pdFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGV2ZW50LmRldGFpbCB9KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQb2t1ZDwgd2VhdGhlci1hcHAtc2VhcmNoPiBvZGNoeXTDrSB1ZMOhbG9zdCAnZ2V0R2VvbG9jYXRpb24nLCB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQsIGt0ZXLDvSB2eXZvbMOhIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJnZXRHZW9sb2NhdGlvblwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJnZXRHZW9sb2NhdGlvblwiKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuLi9Nb2RlbHMvVGhyZWVIb3VyRm9yZWNhc3RcIjtcclxuaW1wb3J0IHsgQ2l0eSB9IGZyb20gXCIuLi9Nb2RlbHMvQ2l0eVwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcENhcmQgZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcENhcmRcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBTZWFyY2ggZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcFNlYXJjaFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcCBmcm9tIFwiLi9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwXCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSBzZSBzdGFyw6EgbyBVSSBhcGxpa2FjZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFZpZXcge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF93ZWF0aGVyQXBwOiBIVE1MRWxlbWVudDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcFwiLCBXZWF0aGVyQXBwKTtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcC1zZWFyY2hcIiwgV2VhdGhlckFwcFNlYXJjaCk7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwid2VhdGhlci1hcHAtY2FyZFwiLCBXZWF0aGVyQXBwQ2FyZCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ3ZWF0aGVyLWFwcFwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmQodGhpcy5fd2VhdGhlckFwcCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5jcmVhdGVFcnJvck1lc3NhZ2UoZXZlbnQuZGV0YWlsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogVnlrcmVzbMOtIHDFmWVkcG92xJtkaSBwcm8gemFkYW7DqSBtxJtzdG9cclxuICAgKiBAcGFyYW0ge0FycmF5PFRocmVlSG91ckZvcmVjYXN0Pn0gZm9yZWNhc3RzIC0gcG9sZSBwxZllZHBvdsSbZMOtLCBrdGVyw6kgc2UgbWFqw60gdnlrcmVzbGl0XHJcbiAgICogQHBhcmFtIHtDaXR5fSBjaXR5IC0gbcSbc3RvLCBwcm8ga3RlcsOpIHNlIHDFmWVkcG92xJvEjyB2eWtyZXNsdWplXHJcbiAgICovXHJcbiAgcHVibGljIHJlbmRlckZvcmVjYXN0c0ZvckNpdHkoZm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4sIGNpdHk6IENpdHkpIHtcclxuICAgIC8vIE9kc3RyYW7DrSBlbGVtZW50eSBzIG7DoXp2ZW0gbcSbc3RhIGEgcMWZZWRwb3bEm2RpXHJcbiAgICB0aGlzLnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcblxyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnQgcyBuw6F6dmVtIG3Em3N0YSBhIHDFmWlwb2rDrSBobyBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIGNvbnN0IGNpdHlUZXh0Tm9kZSA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImNpdHlcIiwgYCR7Y2l0eS5uYW1lfWApO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hcHBlbmRDaGlsZChjaXR5VGV4dE5vZGUpO1xyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnR5IDx3ZWF0aGVyLWFwcC1jYXJkPiBhIHDFmWlwb2rDrSBqZSBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIHRoaXMuX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2RzdHJhbsOtIGVsZW1lbnR5IHMgbsOhenZlbSBtxJtzdGEgYSBqZWRub3RsaXbDqSBwxZllZHBvdsSbZGlcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKSB7XHJcbiAgICB3aGlsZSAodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKSB7XHJcbiAgICAgIHRoaXMuX3dlYXRoZXJBcHAucmVtb3ZlQ2hpbGQodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5hc3RhdsOtIGVsZW1lbnR1IDx3ZWF0aGVyLWFwcD4gY2h5Ym92b3UgenByw6F2dVxyXG4gICAqIEBwYXJhbSBlcnJvck1lc3NhZ2UgY2h5Ym92w6EgenByw6F2YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZVNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJlcnJvck1lc3NhZ2VcIiwgZXJyb3JNZXNzYWdlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlU2xvdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWeXR2b8WZw60gZWxlbWVudHkgPHdlYXRoZXItYXBwLWNhcmQ+IHpvYnJhenVqw61jw60gZGVuLCB0ZXBsb3R1LCBwb3BpcyBwb8SNYXPDrSBhIHJ5Y2hsb3N0IHbEm3RydVxyXG4gICAqIEthxb5kw70geiB2eXR2b8WZZW7DvWNoIGVsZW1lbnTFryBwxZlpcG9qw60gayA8d2VhdGhlci1hcHA+XHJcbiAgICogQHBhcmFtIGZvcmVjYXN0cyBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHM6IFRocmVlSG91ckZvcmVjYXN0W10pIHtcclxuICAgIGZvcmVjYXN0cy5mb3JFYWNoKChmb3JlY2FzdCkgPT4ge1xyXG4gICAgICAvLyBWeXR2b8WZw60gZWxlbWVudCA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgY29uc3Qgd2VhdGhlckFwcENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwid2VhdGhlci1hcHAtY2FyZFwiKTtcclxuICAgICAgd2VhdGhlckFwcENhcmQuc2V0QXR0cmlidXRlKFwic2xvdFwiLCBcIndlYXRoZXItYXBwLWNhcmRcIik7XHJcblxyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIG7DoXpldiBkbmVcclxuICAgICAgY29uc3QgZGF5U2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImRheVwiLCBmb3JlY2FzdC5nZXREYXlOYW1lKCkpO1xyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIHRlcGxvdHVcclxuICAgICAgY29uc3QgdGVtcFNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJ0ZW1wXCIsIGAke2ZvcmVjYXN0LnRlbXB9YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcG9waXMgcG/EjWFzw61cclxuICAgICAgY29uc3QgZGVzY1Nsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJkZXNjcmlwdGlvblwiLCBgJHtmb3JlY2FzdC53ZWF0aGVyRGVzY3JpcHRpb259YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcnljaGxvc3QgdsSbdHJ1XHJcbiAgICAgIGNvbnN0IHdpbmRTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwid2luZFwiLCBgJHtmb3JlY2FzdC53aW5kU3BlZWR9YCk7XHJcblxyXG4gICAgICAvLyBWxaFlY2hueSB2eXR2b8WZZW7DqSBlbGVtZW50eSBwxZlpcG9qw60gayA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgd2VhdGhlckFwcENhcmQuYXBwZW5kKGRheVNsb3QsIHRlbXBTbG90LCBkZXNjU2xvdCwgd2luZFNsb3QpO1xyXG4gICAgICB0aGlzLl93ZWF0aGVyQXBwLmFwcGVuZENoaWxkKHdlYXRoZXJBcHBDYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnl0dm/FmcOtIGVsZW1lbnQgPHRleHRub2RlPiBzIGRhbm91IGhvZG5vdG91IGF0cmlidXR1ICdzbG90JyBhICdpbm5lckhUTUwnXHJcbiAgICogQHBhcmFtIHNsb3ROYW1lIGhvZG5vdGEgYXRyaWJ1dHUgJ3Nsb3QnXHJcbiAgICogQHBhcmFtIGlubmVySFRNTFZhbHVlIGhvZG5vdGEgJ2lubmVySFRNTCdcclxuICAgKi9cclxuICBwcml2YXRlIF9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoc2xvdE5hbWU6IHN0cmluZywgaW5uZXJIVE1MVmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgdGV4dE5vZGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHROb2RlXCIpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LnNldEF0dHJpYnV0ZShcInNsb3RcIiwgc2xvdE5hbWUpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LmlubmVySFRNTCA9IGlubmVySFRNTFZhbHVlO1xyXG4gICAgcmV0dXJuIHRleHROb2RlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9kY2h5dMOtIHVkw6Fsb3N0IHZ5aGxlZMOhbsOtIG7DoXp2dSBtxJtzdGEgYSBub3bDvSBuw6F6ZXYgcG/FoWxlIGRvIFdlYXRoZXJBcHBDb250cm9sbGVydVxyXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gbWV0b2RhIFdlYXRoZXJBcHBDb250cm9sbGVydSwga3RlcsOhIHNpIG5hIHrDoWtsYWTEmyBuw6F6dnUgbcSbc3RhIHZ5xb7DoWTDoSBub3bDoSBkYXRhIGEgcMWZZWtyZXNsw60gVUlcclxuICAgKi9cclxuICBwdWJsaWMgYmluZFNlYXJjaENpdHkoaGFuZGxlcikge1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwic2VhcmNoU3VibWl0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgaGFuZGxlcihldmVudC5kZXRhaWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPZGNoeXTDrSB1ZMOhbG9zdCBwcm8gemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHkgYSBuw6FzbGVkbsSbIHDFmWVrcmVzbMOtIFVJXHJcbiAgICogQHBhcmFtIGhhbmRsZXIgbWV0b2RhIFdlYXRoZXJBcHBDb250cm9sbGVydSwga3RlcsOhIHZ5dm9sw6EgemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHkgYSBuw6FzbGVkbsSbIHDFmWVrcmVzbGVuw60gVUlcclxuICAgKi9cclxuICBwdWJsaWMgYmluZEdldEdlb2xvY2F0aW9uKGhhbmRsZXIpIHtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYWRkRXZlbnRMaXN0ZW5lcihcImdldEdlb2xvY2F0aW9uXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBoYW5kbGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgV2VhdGhlckFwcENvbnRyb2xsZXIgZnJvbSBcIi4vQ29udHJvbGxlci9XZWF0aGVyQXBwQ29udHJvbGVyXCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwTW9kZWwgZnJvbSBcIi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4vVmlld3MvV2VhdGhlckFwcFZpZXdcIjtcclxuXHJcbmNvbnN0IFJFU09VUkNFX1VSTDogc3RyaW5nID1cclxuICBcImh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD8mYXBwaWQ9NGE3MTAyNzdiNDFkN2RhNzkxZTQ0YmY1MTViYWM2ZjcmbGFuZz1DWlwiO1xyXG5cclxuLyoqXHJcbiAqIFZ5dHZvxZnDrSBhcGxpa2FjaSB6b2JyYXp1asOtY8OtIHDFmWVkcG92xJvEjyBwb8SNYXPDrSBuYSBuw6FzbGVkdWrDrWNoIDUgZG7DrSB6IGRhdCwga3RlcsOhIHrDrXNrw6EgbmEgemFkYW7DqSBVUkwgYWRyZXNlXHJcbiAqIC0gem5pY2lhbGl6dWplIE1vZGVsLCBDb250cm9sbGVyIGEgVmlld1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2VhdGhlckFwcCh1cmw6IHN0cmluZykge1xyXG4gIGNvbnN0IG1vZGVsID0gbmV3IFdlYXRoZXJBcHBNb2RlbCh1cmwsIFwiVG92YcSNb3ZcIik7XHJcbiAgYXdhaXQgbW9kZWwuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICBjb25zdCBjb250cm9sbGVyID0gbmV3IFdlYXRoZXJBcHBDb250cm9sbGVyKG1vZGVsLCBuZXcgV2VhdGhlckFwcFZpZXcoKSk7XHJcbn1cclxuXHJcbmNyZWF0ZVdlYXRoZXJBcHAoUkVTT1VSQ0VfVVJMKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==