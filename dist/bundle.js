!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t,e){this._model=t,this._view=e,this._view.bindSearchCity(this.handleSearchCity.bind(this)),this._view.bindGetGeolocation(this.handleGetGeolocation.bind(this)),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)}handleSearchCity(t){return i(this,void 0,void 0,(function*(){this._model.cityName=t,yield this._model.initialize(),this._checkForecastStatusAndRenderUI(`Pro město s názvem '${t}' se napodařilo najít předpověď.`)}))}handleGetGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this)):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Ve vašem prohlížeči není zjištění aktuální polohy podporováno."))}_success(t){return i(this,void 0,void 0,(function*(){this._model.latitude=t.coords.latitude,this._model.longitude=t.coords.longitude,yield this._model.initialize(!1),this._checkForecastStatusAndRenderUI("Pro vaši aktuální polohu se nepodařilo najít předpověď.")}))}_error(){this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Pro vaši aktuální polohu se nepodařilo najít předpověď.")}_checkForecastStatusAndRenderUI(t){"200"===this._model.forecast.cod?this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage(t))}}class r{constructor(t,e,n,i){this._temp=t,this._date=new Date(e),this._weatherDescription=n,this._windSpeed=i}get temp(){return Math.round(this._temp)}get date(){return this._date}get weatherDescription(){return this._weatherDescription}get windSpeed(){return this._windSpeed}set date(t){this._date=t}getDayName(){return new Intl.DateTimeFormat("cs-CZ",{weekday:"long"}).format(this.date)}}class s{constructor(t,e,n,i){this._name=t,this._country=e,this._sunrise=n,this._sunset=i}get name(){return this._name}get country(){return this._country}get sunrise(){return this._sunrise}get sunset(){return this._sunset}}class a{constructor(t){if(this._treeHourForecasts=new Array,this._cod=t.cod,"200"===this._cod){for(let e of t.list)this._treeHourForecasts.push(new r(e.main.temp,e.dt_txt,e.weather[0].description,e.wind.speed));this._city=new s(t.city.name,t.city.country,t.city.sunrise,t.city.sunset)}}get cod(){return this._cod}get city(){return this._city}getForecastsWithHighestTempForEveryDay(){const t=this._getForecastsWithoutHours(this._treeHourForecasts);var e;return function(t,e){let n=new Array;for(let i in t){const o=t[i].reduce((t,n)=>t[e]>n[e]?t:n);n.push(o)}return n}((e="date",t.reduce((t,n)=>{let i=n[e];return t[i]||(t[i]=[]),t[i].push(n),t},{})),"temp")}_getForecastsWithoutHours(t){return t.map(t=>(t.date=new Date(`${t.date.getFullYear()}-${t.date.getMonth()+1}-${t.date.getDate()}`),t))}}var c=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class h{constructor(t,e,n="metric"){this._url=t,this._cityName=e,this._units=n}get forecast(){return this._forecast}set cityName(t){this._cityName=t}set latitude(t){this._latitude=t}set longitude(t){this._longitude=t}initialize(t=!0){return c(this,void 0,void 0,(function*(){let e="";e=t?this._url.concat("&q=",this._cityName,"&units=",this._units):this._url.concat("&lat=",this._latitude,"&lon=",this._longitude,"&units=",this._units);const n=yield this.fetchForecast(e);this._forecast=new a(n)}))}fetchForecast(t){return c(this,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.json()}))}}const d=document.createElement("template");d.innerHTML='\n<style>\n    h3 {\n        color: coral;\n    }  \n</style>\n<div class="weather-app__card">\n    <h2><slot name="day" /></h2>\n    <h3><slot name="temp"/></h3>\n    <h3><slot name="description"/><</h3>\n    <h3><slot name="wind"/><</h3>\n</div>\n';class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d.content.cloneNode(!0))}}const l=document.createElement("template");l.innerHTML='\n  <form id="search-form">\n      <input type="text" placeholder="Název hledaného města">\n      <button type="submit">Hledat</button>\n      <button id="location">Geo lokace</button>\n  </form>\n';class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this._input=this.shadowRoot.querySelector("input")}connectedCallback(){this.shadowRoot.getElementById("location").addEventListener("click",t=>{t.preventDefault(),this.dispatchEvent(new CustomEvent("getGeolocation"))}),this.shadowRoot.getElementById("search-form").addEventListener("submit",t=>{t.preventDefault();const e=this._input.value;""===e?this.dispatchEvent(new CustomEvent("emptyInput")):this.dispatchEvent(new CustomEvent("searchSubmit",{detail:e}))})}}const m=document.createElement("template");m.innerHTML='\n<div>\n    <weather-app-search></weather-app-search>\n    <h3><slot name="errorMessage"></slot></h3>\n    <h1><slot name="city"></slot></h1>\n    <div class="weather-app__cards">\n      <slot name="weather-app-card"></slot>\n    </div>\n</div>\n';class _ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this._weatherAppSearch=this.shadowRoot.querySelector("weather-app-search")}connectedCallback(){this._weatherAppSearch.addEventListener("emptyInput",t=>{this.dispatchEvent(new CustomEvent("emptyInput",{detail:"Vyplň název města bráško."}))}),this._weatherAppSearch.addEventListener("searchSubmit",t=>{this.dispatchEvent(new CustomEvent("searchSubmit",{detail:t.detail}))}),this._weatherAppSearch.addEventListener("getGeolocation",t=>{this.dispatchEvent(new CustomEvent("getGeolocation"))})}}class v{constructor(){window.customElements.define("weather-app",_),window.customElements.define("weather-app-search",p),window.customElements.define("weather-app-card",u),this._weatherApp=document.createElement("weather-app"),document.getElementsByTagName("body")[0].append(this._weatherApp),this._weatherApp.addEventListener("emptyInput",t=>{this.removeCityNameAndForecasts(),this.createErrorMessage(t.detail)})}renderForecastsForCity(t,e){this.removeCityNameAndForecasts();const n=this._createTextNodeSetSlotAndInnerHTML("city",""+e.name);this._weatherApp.appendChild(n),this._createWeatherAppCards(t)}removeCityNameAndForecasts(){for(;this._weatherApp.firstChild;)this._weatherApp.removeChild(this._weatherApp.firstChild)}createErrorMessage(t){const e=this._createTextNodeSetSlotAndInnerHTML("errorMessage",t);this._weatherApp.appendChild(e)}_createWeatherAppCards(t){t.forEach(t=>{const e=document.createElement("weather-app-card");e.setAttribute("slot","weather-app-card");const n=this._createTextNodeSetSlotAndInnerHTML("day",t.getDayName()),i=this._createTextNodeSetSlotAndInnerHTML("temp",""+t.temp),o=this._createTextNodeSetSlotAndInnerHTML("description",""+t.weatherDescription),r=this._createTextNodeSetSlotAndInnerHTML("wind",""+t.windSpeed);e.append(n,i,o,r),this._weatherApp.appendChild(e)})}_createTextNodeSetSlotAndInnerHTML(t,e){const n=document.createElement("textNode");return n.setAttribute("slot",t),n.innerHTML=e,n}bindSearchCity(t){this._weatherApp.addEventListener("searchSubmit",e=>{t(e.detail)})}bindGetGeolocation(t){this._weatherApp.addEventListener("getGeolocation",e=>{t()})}}var w=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){w(this,void 0,void 0,(function*(){const e=new h(t,"Tovačov");yield e.initialize();new o(e,new v)}))}("https://api.openweathermap.org/data/2.5/forecast?&appid=4a710277b41d7da791e44bf515bac6f7&lang=CZ")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9Nb2RlbHMvQ2l0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0ZpdmVEYXlGb3JlY2FzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVscy9XZWF0aGVyQXBwTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXdzL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9XZWF0aGVyQXBwVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlYXRoZXJBcHBDb250cm9sbGVyIiwibW9kZWwiLCJ2aWV3IiwidGhpcyIsIl9tb2RlbCIsIl92aWV3IiwiYmluZFNlYXJjaENpdHkiLCJoYW5kbGVTZWFyY2hDaXR5IiwiYmluZEdldEdlb2xvY2F0aW9uIiwiaGFuZGxlR2V0R2VvbG9jYXRpb24iLCJyZW5kZXJGb3JlY2FzdHNGb3JDaXR5IiwiZm9yZWNhc3QiLCJnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSIsImNpdHkiLCJjaXR5TmFtZSIsImluaXRpYWxpemUiLCJfY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJfc3VjY2VzcyIsIl9lcnJvciIsInJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzIiwiY3JlYXRlRXJyb3JNZXNzYWdlIiwicG9zaXRpb24iLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImVycm9yTWVzc2FnZSIsImNvZCIsIlRocmVlSG91ckZvcmVjYXN0IiwidGVtcCIsImRhdGUiLCJ3ZWF0aGVyRGVzY3JpcHRpb24iLCJ3aW5kU3BlZWQiLCJfdGVtcCIsIl9kYXRlIiwiRGF0ZSIsIl93ZWF0aGVyRGVzY3JpcHRpb24iLCJfd2luZFNwZWVkIiwiTWF0aCIsInJvdW5kIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0Iiwid2Vla2RheSIsImZvcm1hdCIsIkNpdHkiLCJjb3VudHJ5Iiwic3VucmlzZSIsInN1bnNldCIsIl9uYW1lIiwiX2NvdW50cnkiLCJfc3VucmlzZSIsIl9zdW5zZXQiLCJqc29uT2JqZWN0IiwiX3RyZWVIb3VyRm9yZWNhc3RzIiwiQXJyYXkiLCJfY29kIiwidGhyZWVIb3VyRm9yZWNhc3QiLCJsaXN0IiwicHVzaCIsIm1haW4iLCJkdF90eHQiLCJ3ZWF0aGVyIiwiZGVzY3JpcHRpb24iLCJ3aW5kIiwic3BlZWQiLCJfY2l0eSIsInRocmVlSG91ckZvcmVjYXN0cyIsIl9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnMiLCJncm91cGVkQXJyIiwibWF4VmFsdWVzRnJvbUdyb3VwQXJyIiwiZ3JvdXBLZXkiLCJtYXgiLCJyZWR1Y2UiLCJwcmV2IiwiY3VycmVudCIsImdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyIiwiYWNjIiwib2JqIiwiZm9yZWNhc3RzQXJyIiwibWFwIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ1cmwiLCJ1bml0cyIsIl91cmwiLCJfY2l0eU5hbWUiLCJfdW5pdHMiLCJfZm9yZWNhc3QiLCJfbGF0aXR1ZGUiLCJfbG9uZ2l0dWRlIiwiaW5pdGlhbGl6ZUJ5Q2l0eU5hbWUiLCJyZXN1bHRVcmwiLCJjb25jYXQiLCJmZXRjaEZvcmVjYXN0IiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIldlYXRoZXJBcHBDYXJkIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsImF0dGFjaFNoYWRvdyIsInNoYWRvd1Jvb3QiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJXZWF0aGVyQXBwU2VhcmNoIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJpbnB1dFZhbHVlIiwiZGV0YWlsIiwiV2VhdGhlckFwcCIsIl93ZWF0aGVyQXBwU2VhcmNoIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJfd2VhdGhlckFwcCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kIiwiZm9yZWNhc3RzIiwiY2l0eVRleHROb2RlIiwiX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTCIsIl9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlcnJvck1lc3NhZ2VTbG90IiwiZm9yRWFjaCIsIndlYXRoZXJBcHBDYXJkIiwic2V0QXR0cmlidXRlIiwiZGF5U2xvdCIsImdldERheU5hbWUiLCJ0ZW1wU2xvdCIsImRlc2NTbG90Iiwid2luZFNsb3QiLCJzbG90TmFtZSIsImlubmVySFRNTFZhbHVlIiwidGV4dE5vZGVFbGVtZW50IiwiaGFuZGxlciIsImNyZWF0ZVdlYXRoZXJBcHAiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gs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RUFBVUMsR0FDbkQ5SSxLQUFLNkgsWUFBWW5CLFlBQVk4QixLQVN6QixtQ0FBbUNPLEVBQWtCQyxHQUMzRCxNQUFNQyxFQUFrQi9DLFNBQVNDLGNBQWMsWUFHL0MsT0FGQThDLEVBQWdCUixhQUFhLE9BQVFNLEdBQ3JDRSxFQUFnQjdDLFVBQVk0QyxFQUNyQkMsRUFPRixlQUFlQyxHQUNwQmxKLEtBQUs2SCxZQUFZWixpQkFBaUIsZUFBaUJDLElBQ2pEZ0MsRUFBUWhDLEVBQU1LLFVBUVgsbUJBQW1CMkIsR0FDeEJsSixLQUFLNkgsWUFBWVosaUJBQWlCLGlCQUFtQkMsSUFDbkRnQyxPLDJTQzVHTixTQUFnQ2hFLEcsa0NBQzlCLE1BQU1wRixFQUFRLElBQUksRUFBZ0JvRixFQUFLLGlCQUNqQ3BGLEVBQU1jLGFBRU8sSUFBSWYsRUFBcUJDLEVBQU8sSUFBSSxNQUd6RHFKLENBYkUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFdlYXRoZXJBcHBNb2RlbCBmcm9tIFwiLi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4uL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSB6YWrDrcWhxaV1asOtY8OtIGtvbXVuaWthY2kgbWV6aSBkYXR5IGEgVUkgYXBsaWthY2VcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDb250cm9sbGVyIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfbW9kZWw6IFdlYXRoZXJBcHBNb2RlbDtcclxuICBwcml2YXRlIF92aWV3OiBXZWF0aGVyQXBwVmlldztcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihtb2RlbDogV2VhdGhlckFwcE1vZGVsLCB2aWV3OiBXZWF0aGVyQXBwVmlldykge1xyXG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuX3ZpZXcgPSB2aWV3O1xyXG5cclxuICAgIHRoaXMuX3ZpZXcuYmluZFNlYXJjaENpdHkodGhpcy5oYW5kbGVTZWFyY2hDaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdmlldy5iaW5kR2V0R2VvbG9jYXRpb24odGhpcy5oYW5kbGVHZXRHZW9sb2NhdGlvbi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl92aWV3LnJlbmRlckZvcmVjYXN0c0ZvckNpdHkoXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmdldEZvcmVjYXN0c1dpdGhIaWdoZXN0VGVtcEZvckV2ZXJ5RGF5KCksXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBQcm8gemFkYW7DvSBuw6F6ZXYgbcSbc3RhIHZ5aGxlZMOhIHDFmWVkcG92xJvEjyBhIHDFmWVrcmVzbMOtIHBvZGxlIG7DrSBVSVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaXR5TmFtZSAtIG7DoXpldiBtxJtzdGEsIHBybyBrdGVyw6kgc2UgbcOhIHpqaXN0aXQgcMWZZWRwb3bEm8SPXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGhhbmRsZVNlYXJjaENpdHkoY2l0eU5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbW9kZWwuY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICAgIGF3YWl0IHRoaXMuX21vZGVsLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICB0aGlzLl9jaGVja0ZvcmVjYXN0U3RhdHVzQW5kUmVuZGVyVUkoYFBybyBtxJtzdG8gcyBuw6F6dmVtICcke2NpdHlOYW1lfScgc2UgbmFwb2RhxZlpbG8gbmFqw610IHDFmWVkcG92xJvEjy5gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFpqaXN0w60gYWt0dcOhbG7DrSBwb2xvaHUgYSB2eWhsZWTDoSBwb2RsZSBuw60gcMWZZWRwb3bEm8SPIGEgbsOhc2xlZG7EmyBwxZlla3Jlc2zDrSBVSS5cclxuICAgKiBWIHDFmcOtcGFkxJssIMW+ZSBzZSBwb2xvaGEgbmVwb2RhxZnDrSB6amlzdGl0IGplIHZ5cHPDoW5hIGNoeWJvdsOhIGhsw6HFoWthLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVHZXRHZW9sb2NhdGlvbigpIHtcclxuICAgIGlmICghbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5fdmlldy5jcmVhdGVFcnJvck1lc3NhZ2UoXCJWZSB2YcWhZW0gcHJvaGzDrcW+ZcSNaSBuZW7DrSB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeSBwb2Rwb3JvdsOhbm8uXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbih0aGlzLl9zdWNjZXNzLmJpbmQodGhpcyksIHRoaXMuX2Vycm9yLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogViBwxZnDrXBhZMSbIG5hbGV6ZW7DrSBha3R1w6FsbsOtIHBvbG9oeSB2eXZvbMOhIHpqacWhdMSbbsOtIHDFmWVkcG92xJtkaVxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiBvYmpla3QgdHlwdSBHZW9sb2NhdGlvblBvc2l0aW9uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBfc3VjY2Vzcyhwb3NpdGlvbikge1xyXG4gICAgdGhpcy5fbW9kZWwubGF0aXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XHJcbiAgICB0aGlzLl9tb2RlbC5sb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xyXG5cclxuICAgIGF3YWl0IHRoaXMuX21vZGVsLmluaXRpYWxpemUoZmFsc2UpO1xyXG5cclxuICAgIHRoaXMuX2NoZWNrRm9yZWNhc3RTdGF0dXNBbmRSZW5kZXJVSShcIlBybyB2YcWhaSBha3R1w6FsbsOtIHBvbG9odSBzZSBuZXBvZGHFmWlsbyBuYWrDrXQgcMWZZWRwb3bEm8SPLlwiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFYgcMWZw61wYWTEmyBuZW5hbGV6ZW7DrSBha3R1w6FsbsOtIHBvbG9oeSBuYXN0YXbDrSBjaHlib3ZvdSBobMOhxaFrdVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2Vycm9yKCkge1xyXG4gICAgdGhpcy5fdmlldy5yZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpO1xyXG4gICAgdGhpcy5fdmlldy5jcmVhdGVFcnJvck1lc3NhZ2UoXCJQcm8gdmHFoWkgYWt0dcOhbG7DrSBwb2xvaHUgc2UgbmVwb2RhxZlpbG8gbmFqw610IHDFmWVkcG92xJvEjy5cIik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPdsSbxZnDrSwgemRhIGJ5bGEgbmFsZXplbmEgcMWZZWRwb3bEm8SPLCBwb2t1ZCBhbm8gcMWZZWtyZXNsw60gVUksIHBva3VkIG5lIHpvYnJhesOtIGNoeWJvdm91IHpwcsOhdm91XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJKGVycm9yTWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5fbW9kZWwuZm9yZWNhc3QuY29kID09PSBcIjIwMFwiKSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVuZGVyRm9yZWNhc3RzRm9yQ2l0eShcclxuICAgICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5nZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpLFxyXG4gICAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5fdmlldy5jcmVhdGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIHTFmcOtaG9kaW5vdSBwxZllZHBvdsSbxI9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaHJlZUhvdXJGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3RlbXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9kYXRlOiBEYXRlO1xyXG4gIHByaXZhdGUgX3dlYXRoZXJEZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3dpbmRTcGVlZDogbnVtYmVyO1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3Blcmllc1xyXG4gIGdldCB0ZW1wKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLl90ZW1wKTtcclxuICB9XHJcblxyXG4gIGdldCBkYXRlKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGU7XHJcbiAgfVxyXG5cclxuICBnZXQgd2VhdGhlckRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fd2VhdGhlckRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHdpbmRTcGVlZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3dpbmRTcGVlZDtcclxuICB9XHJcblxyXG4gIHNldCBkYXRlKGRhdGU6IERhdGUpIHtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGV0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcih0ZW1wOiBudW1iZXIsIGRhdGU6IHN0cmluZywgd2VhdGhlckRlc2NyaXB0aW9uOiBzdHJpbmcsIHdpbmRTcGVlZDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl90ZW1wID0gdGVtcDtcclxuICAgIHRoaXMuX2RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJEZXNjcmlwdGlvbiA9IHdlYXRoZXJEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3dpbmRTcGVlZCA9IHdpbmRTcGVlZDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIHB1YmxpYyBnZXREYXlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJjcy1DWlwiLCB7IHdlZWtkYXk6IFwibG9uZ1wiIH0pLmZvcm1hdCh0aGlzLmRhdGUpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIG3Em3N0b1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENpdHkge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfY291bnRyeTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3N1bnJpc2U6IG51bWJlcjtcclxuICBwcml2YXRlIF9zdW5zZXQ6IG51bWJlcjtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvdW50cnkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9jb3VudHJ5O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnJpc2UoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9zdW5yaXNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnNldCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N1bnNldDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgY291bnRyeTogc3RyaW5nLCBzdW5yaXNlOiBudW1iZXIsIHN1bnNldDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2NvdW50cnkgPSBjb3VudHJ5O1xyXG4gICAgdGhpcy5fc3VucmlzZSA9IHN1bnJpc2U7XHJcbiAgICB0aGlzLl9zdW5zZXQgPSBzdW5zZXQ7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuL1RocmVlSG91ckZvcmVjYXN0XCI7XHJcbmltcG9ydCB7IENpdHkgfSBmcm9tIFwiLi9DaXR5XCI7XHJcbmltcG9ydCB7IGdyb3VwQXJyQnlQcm9wZXJ0eSwgZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIgfSBmcm9tIFwiLi4vVXRpbHMvYXJyYXktdXRpbHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIDUgZG7DrSwgcG8gMyBob2RpbsOhY2gsIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpdmVEYXlGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX2NvZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3RyZWVIb3VyRm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4gPSBuZXcgQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+KCk7XHJcbiAgcHJpdmF0ZSBfY2l0eTogQ2l0eTtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IGNvZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvZDtcclxuICB9XHJcblxyXG4gIGdldCBjaXR5KCk6IENpdHkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NpdHk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihqc29uT2JqZWN0OiBhbnkpIHtcclxuICAgIHRoaXMuX2NvZCA9IGpzb25PYmplY3QuY29kO1xyXG5cclxuICAgIGlmICh0aGlzLl9jb2QgPT09IFwiMjAwXCIpIHtcclxuICAgICAgZm9yIChsZXQgdGhyZWVIb3VyRm9yZWNhc3Qgb2YganNvbk9iamVjdC5saXN0KSB7XHJcbiAgICAgICAgdGhpcy5fdHJlZUhvdXJGb3JlY2FzdHMucHVzaChcclxuICAgICAgICAgIG5ldyBUaHJlZUhvdXJGb3JlY2FzdChcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3QubWFpbi50ZW1wLFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC5kdF90eHQsXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0LndlYXRoZXJbMF0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0LndpbmQuc3BlZWRcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9jaXR5ID0gbmV3IENpdHkoXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5Lm5hbWUsXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LmNvdW50cnksXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LnN1bnJpc2UsXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LnN1bnNldFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogVnLDoXTDrSBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrSBzIG5lanZ5xaHFocOtIHRlcGxvdG91IHBybyBrYcW+ZMO9IGRlblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4ge1xyXG4gICAgY29uc3QgdGhyZWVIb3VyRm9yZWNhc3RzID0gdGhpcy5fZ2V0Rm9yZWNhc3RzV2l0aG91dEhvdXJzKHRoaXMuX3RyZWVIb3VyRm9yZWNhc3RzKTtcclxuICAgIGNvbnN0IHRocmVlSG91ckZvcmVjYXN0c0dyb3VwZWRCeURhdGUgPSBncm91cEFyckJ5UHJvcGVydHkodGhyZWVIb3VyRm9yZWNhc3RzLCBcImRhdGVcIik7XHJcbiAgICBjb25zdCB0aHJlZUhvdXJGb3JlY2FzdHNXaXRoTWF4VGVtcCA9IGdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyKHRocmVlSG91ckZvcmVjYXN0c0dyb3VwZWRCeURhdGUsIFwidGVtcFwiKTtcclxuXHJcbiAgICByZXR1cm4gdGhyZWVIb3VyRm9yZWNhc3RzV2l0aE1heFRlbXA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWcsOhdMOtIHBvbGUgdMWZw61ob2Rpbm92w71jaCBwxZllZHBvdsSbZMOtIGplbiBzIGRhdHVtZW0gYmV6IMSNYXNvdsOpaG8gw7pkYWplXHJcbiAgICogQHBhcmFtIHtwb2xlIG9iamVrdMWvIHR5cHUgRm9yZWNhc3R9IGZvcmVjYXN0c0FyclxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2dldEZvcmVjYXN0c1dpdGhvdXRIb3Vycyhmb3JlY2FzdHNBcnI6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0Pik6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PiB7XHJcbiAgICByZXR1cm4gZm9yZWNhc3RzQXJyLm1hcCgoZm9yZWNhc3QpID0+IHtcclxuICAgICAgZm9yZWNhc3QuZGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgIGAke2ZvcmVjYXN0LmRhdGUuZ2V0RnVsbFllYXIoKX0tJHtmb3JlY2FzdC5kYXRlLmdldE1vbnRoKCkgKyAxfS0ke2ZvcmVjYXN0LmRhdGUuZ2V0RGF0ZSgpfWBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGZvcmVjYXN0O1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiLyoqXHJcbiAqIFNlc2t1cMOtIHBydmt5IHBvbGUgZG8gc2t1cGluLCBrdGVyw6kgbWFqw60gc3Rlam5vdSBob2Rub3R1IHphZGFuw6kgcHJvcGVydHlcclxuICogQHBhcmFtIHtwb2xlIG9iamVrdMWvfSBhcnJcclxuICogQHBhcmFtIHt2bGFzdG5vc3Qgb2JqZWt0dSBwb2xlfSBwcm9wZXJ0eVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQXJyQnlQcm9wZXJ0eShhcnIsIHByb3BlcnR5KSB7XHJcbiAgcmV0dXJuIGFyci5yZWR1Y2UoKGFjYywgb2JqKSA9PiB7XHJcbiAgICBsZXQga2V5ID0gb2JqW3Byb3BlcnR5XTtcclxuICAgIGlmICghYWNjW2tleV0pIHtcclxuICAgICAgYWNjW2tleV0gPSBbXTtcclxuICAgIH1cclxuICAgIGFjY1trZXldLnB1c2gob2JqKTtcclxuICAgIHJldHVybiBhY2M7XHJcbiAgfSwge30pO1xyXG59XHJcblxyXG4vKipcclxuICogWmUgc2Vza3VwZW7DqWhvIHBvbGUgdnLDoXTDrSBwcm8ga2HFvmRvdSBza3VwaW51IG9iamVrdCBzIG5lanZ5xaHFocOtIGhvZG5vdG91IHByb3BlcnR5XHJcbiAqIEBwYXJhbSB7cG9sZSBvYmpla3TFrywga3RlcsOpIGpzb3Ugc2Vza3VwZW55IHBvZGxlIGplZG7DqSB6IHByb3BlcnR5IG9iamVrdHV9IGdyb3VwZWRBcnJcclxuICogQHBhcmFtIHtwcm9wZXJ0eSBvYmpla3R1IHBvbGUsIHBybyBrdGVyb3Ugc2UgdiBrYcW+ZMOpIHNrdXBpbsSbIGhsZWTDoSBuZWp2ecWhxaHDrSBob2Rub3RhfSBwcm9wZXJ0eVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyKGdyb3VwZWRBcnIsIHByb3BlcnR5KSB7XHJcbiAgbGV0IG1heFZhbHVlc0Zyb21Hcm91cEFyciA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBmb3IgKGxldCBncm91cEtleSBpbiBncm91cGVkQXJyKSB7XHJcbiAgICBjb25zdCBtYXggPSBncm91cGVkQXJyW2dyb3VwS2V5XS5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHByZXZbcHJvcGVydHldID4gY3VycmVudFtwcm9wZXJ0eV0gPyBwcmV2IDogY3VycmVudDtcclxuICAgIH0pO1xyXG4gICAgbWF4VmFsdWVzRnJvbUdyb3VwQXJyLnB1c2gobWF4KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXhWYWx1ZXNGcm9tR3JvdXBBcnI7XHJcbn1cclxuIiwiaW1wb3J0IEZpdmVEYXlGb3JlY2FzdCBmcm9tIFwiLi9GaXZlRGF5Rm9yZWNhc3RcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHBybyB6w61za8OhbsOtIGEgcHLDoWNpIHMgZGF0eSwga3RlcsOhIHrDrXNrYWxhIHogZGFuw6kgVVJMXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwTW9kZWwge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF91cmw6IHN0cmluZztcclxuICBwcml2YXRlIF9jaXR5TmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3VuaXRzOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfbGF0aXR1ZGU6IHN0cmluZztcclxuICBwcml2YXRlIF9sb25naXR1ZGU6IHN0cmluZztcclxuICBwcml2YXRlIF9mb3JlY2FzdDogRml2ZURheUZvcmVjYXN0O1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3BlcnRpZXNcclxuICBnZXQgZm9yZWNhc3QoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9yZWNhc3Q7XHJcbiAgfVxyXG5cclxuICBzZXQgY2l0eU5hbWUoY2l0eU5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICB9XHJcblxyXG4gIHNldCBsYXRpdHVkZShsYXRpdHVkZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9sYXRpdHVkZSA9IGxhdGl0dWRlO1xyXG4gIH1cclxuXHJcbiAgc2V0IGxvbmdpdHVkZShsb25naXR1ZGU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIGNpdHlOYW1lOiBzdHJpbmcsIHVuaXRzID0gXCJtZXRyaWNcIikge1xyXG4gICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgdGhpcy5fY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICAgIHRoaXMuX3VuaXRzID0gdW5pdHM7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBaw61za8OhIGEgbmFzdGF2w60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIDUgZG7DrSBwcm8gZGFuw6kgbcSbc3RvIG5lYm8gcG9sb2h1IGEgamVkbm90a3ksIHZlIGt0ZXLDqSBzZSB6b2JyYXp1amUgdGVwbG90YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKGluaXRpYWxpemVCeUNpdHlOYW1lID0gdHJ1ZSkge1xyXG4gICAgbGV0IHJlc3VsdFVybCA9IFwiXCI7XHJcblxyXG4gICAgaWYgKGluaXRpYWxpemVCeUNpdHlOYW1lKSB7XHJcbiAgICAgIHJlc3VsdFVybCA9IHRoaXMuX3VybC5jb25jYXQoXCImcT1cIiwgdGhpcy5fY2l0eU5hbWUsIFwiJnVuaXRzPVwiLCB0aGlzLl91bml0cyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHRVcmwgPSB0aGlzLl91cmwuY29uY2F0KFwiJmxhdD1cIiwgdGhpcy5fbGF0aXR1ZGUsIFwiJmxvbj1cIiwgdGhpcy5fbG9uZ2l0dWRlLCBcIiZ1bml0cz1cIiwgdGhpcy5fdW5pdHMpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZm9yZWNhc3QgPSBhd2FpdCB0aGlzLmZldGNoRm9yZWNhc3QocmVzdWx0VXJsKTtcclxuICAgIHRoaXMuX2ZvcmVjYXN0ID0gbmV3IEZpdmVEYXlGb3JlY2FzdChmb3JlY2FzdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBOYcSNdGUgcMWZZWRwb3bEm2QgeiBkYW7DqSB1cmxcclxuICAgKiBAcGFyYW0ge2FkcmVzYSwgemUga3RlcsOpIHNlIG5hxI3DrXRhasOtIGRhdGF9IHVybFxyXG4gICAqIEByZXR1cm5zIHBvbGUgb2JqZWt0xa8gcyDDumRhamkgbyBwxZllZHBvdsSbZGlcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGZldGNoRm9yZWNhc3QodXJsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcclxuICAgIGNvbnN0IGZvcmVjYXN0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgcmV0dXJuIGZvcmVjYXN0O1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG50ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXHJcbjxzdHlsZT5cclxuICAgIGgzIHtcclxuICAgICAgICBjb2xvcjogY29yYWw7XHJcbiAgICB9ICBcclxuPC9zdHlsZT5cclxuPGRpdiBjbGFzcz1cIndlYXRoZXItYXBwX19jYXJkXCI+XHJcbiAgICA8aDI+PHNsb3QgbmFtZT1cImRheVwiIC8+PC9oMj5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwidGVtcFwiLz48L2gzPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJkZXNjcmlwdGlvblwiLz48PC9oMz5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwid2luZFwiLz48PC9oMz5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcC1jYXJkPiwga3RlcsO9IHNsb3XFvsOtIHBybyB6b2JyYXplbsOtIHDFmWVkcG92xJtkaSBwb8SNYXPDrSBuYSAxIGRlblxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcENhcmQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG59XHJcbiIsImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG50ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXHJcbiAgPGZvcm0gaWQ9XCJzZWFyY2gtZm9ybVwiPlxyXG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIk7DoXpldiBobGVkYW7DqWhvIG3Em3N0YVwiPlxyXG4gICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5IbGVkYXQ8L2J1dHRvbj5cclxuICAgICAgPGJ1dHRvbiBpZD1cImxvY2F0aW9uXCI+R2VvIGxva2FjZTwvYnV0dG9uPlxyXG4gIDwvZm9ybT5cclxuYDtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gSFRNTEVsZW1lbnQgPHdlYXRoZXItYXBwLXNlYXJjaD4sIGt0ZXLDvSBzbG91xb7DrSBwcm8gem9icmF6ZW7DrSBwb2xlIGEgdGxhxI3DrXRrYSBwcm8gdnlobGVkw6Fuw60gbcSbc3RhXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwU2VhcmNoIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF9pbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcblxyXG4gICAgdGhpcy5faW5wdXQgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAvKipcclxuICAgICAqIFBvIGtsaWtudXTDrSBuYSA8YnV0dG9uPiBzIGlkPVwibG9jYXRpb25cIiBkb2pkZSBrIG9kZXNsw6Fuw60gdmxhc3Ruw61obyBldmVudHUsIGt0ZXLDvSB2eXZvbMOhIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5XHJcbiAgICAgKi9cclxuICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImdldEdlb2xvY2F0aW9uXCIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogS2R5xb4gJ3NlYXJjaC1mb3JtJyBvZGNoeXTDrSB1ZMOhbG9zdCAnc3VibWl0JyB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQgYSB0ZW4gb2RlxaFsZS5cclxuICAgICAqIFYgcMWZw61wYWTEmywgxb5lIGRvIGlucHV0dSBieWxhIHphZMOhbmEgaG9kbm90YSwgdGFrIHBvxaFsZSBpIGppLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2gtZm9ybVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgY29uc3QgaW5wdXRWYWx1ZSA9IHRoaXMuX2lucHV0LnZhbHVlO1xyXG4gICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gXCJcIikge1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJlbXB0eUlucHV0XCIpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwic2VhcmNoU3VibWl0XCIsIHsgZGV0YWlsOiBpbnB1dFZhbHVlIH0pKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiaW1wb3J0IFdlYXRoZXJBcHBTZWFyY2ggZnJvbSBcIi4vV2VhdGhlckFwcFNlYXJjaFwiO1xyXG5cclxuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcclxuPGRpdj5cclxuICAgIDx3ZWF0aGVyLWFwcC1zZWFyY2g+PC93ZWF0aGVyLWFwcC1zZWFyY2g+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cImVycm9yTWVzc2FnZVwiPjwvc2xvdD48L2gzPlxyXG4gICAgPGgxPjxzbG90IG5hbWU9XCJjaXR5XCI+PC9zbG90PjwvaDE+XHJcbiAgICA8ZGl2IGNsYXNzPVwid2VhdGhlci1hcHBfX2NhcmRzXCI+XHJcbiAgICAgIDxzbG90IG5hbWU9XCJ3ZWF0aGVyLWFwcC1jYXJkXCI+PC9zbG90PlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBIVE1MRWxlbWVudCA8d2VhdGhlci1hcHA+LCBrdGVyw70gem9icmF6dWplIHZ5aGxlZMOhdmFjw60gcG9sZSBzIHRsYcSNw610a2VtIGEgdGFrw6kgcMWZZWRwb3bEm2RpIHBvxI1hc8OtIG5hIDUgZG7DrSBwcm8gZGFuw6kgbcSbc3RvXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF93ZWF0aGVyQXBwU2VhcmNoOiBXZWF0aGVyQXBwU2VhcmNoO1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2ggPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIndlYXRoZXItYXBwLXNlYXJjaFwiKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgLy8gUG9rdWQgPHdlYXRoZXItYXBwLXNlYXJjaD4gb2RjaHl0w60gdWTDoWxvc3QgJ2VtcHR5SW5wdXQnIHBvxaFsZSB1ZMOhbG9zdCwga3RlcsOpIHZ5dm9sw6Egb2RzdHJhbsSbbsOtIG7DoXp2dSBtxJtzdGEgYSBwxZllZHBvdsSbZMOtIGEgbmFzdGF2w60gY2h5Ym92b3UgaGzDocWha3VcclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImVtcHR5SW5wdXRcIiwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZW1wdHlJbnB1dFwiLCB7IGRldGFpbDogXCJWeXBsxYggbsOhemV2IG3Em3N0YSBicsOhxaFrby5cIiB9KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQb2t1ZCA8d2VhdGhlci1hcHAtc2VhcmNoPiBvZGNoeXTDrSB1ZMOhbG9zdCAnc2VhcmNoU3VibWl0Jywgdnl0dm/FmcOtIHZsYXN0bsOtIGV2ZW50IGEgdGVuIG9kZcWhbGUgc3BvbHUgcyBuw6F6dmVtIG3Em3N0YSwgcHJvIGt0ZXLDqSBzZSBtw6EgdnlobGVkYXQgcMWZZWRwb3bEm8SPXHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWFyY2hTdWJtaXRcIiwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwic2VhcmNoU3VibWl0XCIsIHsgZGV0YWlsOiBldmVudC5kZXRhaWwgfSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUG9rdWQ8IHdlYXRoZXItYXBwLXNlYXJjaD4gb2RjaHl0w60gdWTDoWxvc3QgJ2dldEdlb2xvY2F0aW9uJywgdnl0dm/FmcOtIHZsYXN0bsOtIGV2ZW50LCBrdGVyw70gdnl2b2zDoSB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeVxyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZ2V0R2VvbG9jYXRpb25cIiwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZ2V0R2VvbG9jYXRpb25cIikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiaW1wb3J0IHsgVGhyZWVIb3VyRm9yZWNhc3QgfSBmcm9tIFwiLi4vTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0XCI7XHJcbmltcG9ydCB7IENpdHkgfSBmcm9tIFwiLi4vTW9kZWxzL0NpdHlcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBDYXJkIGZyb20gXCIuL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkXCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwU2VhcmNoIGZyb20gXCIuL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBTZWFyY2hcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHAgZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcFwiO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgc2Ugc3RhcsOhIG8gVUkgYXBsaWthY2VcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBWaWV3IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfd2VhdGhlckFwcDogSFRNTEVsZW1lbnQ7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwid2VhdGhlci1hcHBcIiwgV2VhdGhlckFwcCk7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwid2VhdGhlci1hcHAtc2VhcmNoXCIsIFdlYXRoZXJBcHBTZWFyY2gpO1xyXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShcIndlYXRoZXItYXBwLWNhcmRcIiwgV2VhdGhlckFwcENhcmQpO1xyXG5cclxuICAgIHRoaXMuX3dlYXRoZXJBcHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwid2VhdGhlci1hcHBcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kKHRoaXMuX3dlYXRoZXJBcHApO1xyXG5cclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYWRkRXZlbnRMaXN0ZW5lcihcImVtcHR5SW5wdXRcIiwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcbiAgICAgIHRoaXMuY3JlYXRlRXJyb3JNZXNzYWdlKGV2ZW50LmRldGFpbCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIC8qKlxyXG4gICAqIFZ5a3Jlc2zDrSBwxZllZHBvdsSbZGkgcHJvIHphZGFuw6kgbcSbc3RvXHJcbiAgICogQHBhcmFtIHtBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD59IGZvcmVjYXN0cyAtIHBvbGUgcMWZZWRwb3bEm2TDrSwga3RlcsOpIHNlIG1hasOtIHZ5a3Jlc2xpdFxyXG4gICAqIEBwYXJhbSB7Q2l0eX0gY2l0eSAtIG3Em3N0bywgcHJvIGt0ZXLDqSBzZSBwxZllZHBvdsSbxI8gdnlrcmVzbHVqZVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW5kZXJGb3JlY2FzdHNGb3JDaXR5KGZvcmVjYXN0czogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+LCBjaXR5OiBDaXR5KSB7XHJcbiAgICAvLyBPZHN0cmFuw60gZWxlbWVudHkgcyBuw6F6dmVtIG3Em3N0YSBhIHDFmWVkcG92xJtkaVxyXG4gICAgdGhpcy5yZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpO1xyXG5cclxuICAgIC8vIFZ5dHZvxZnDrSBlbGVtZW50IHMgbsOhenZlbSBtxJtzdGEgYSBwxZlpcG9qw60gaG8gayA8d2VhdGhlci1hcHA+XHJcbiAgICBjb25zdCBjaXR5VGV4dE5vZGUgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJjaXR5XCIsIGAke2NpdHkubmFtZX1gKTtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYXBwZW5kQ2hpbGQoY2l0eVRleHROb2RlKTtcclxuICAgIC8vIFZ5dHZvxZnDrSBlbGVtZW50eSA8d2VhdGhlci1hcHAtY2FyZD4gYSBwxZlpcG9qw60gamUgayA8d2VhdGhlci1hcHA+XHJcbiAgICB0aGlzLl9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMoZm9yZWNhc3RzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9kc3RyYW7DrSBlbGVtZW50eSBzIG7DoXp2ZW0gbcSbc3RhIGEgamVkbm90bGl2w6kgcMWZZWRwb3bEm2RpXHJcbiAgICovXHJcbiAgcHVibGljIHJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCkge1xyXG4gICAgd2hpbGUgKHRoaXMuX3dlYXRoZXJBcHAuZmlyc3RDaGlsZCkge1xyXG4gICAgICB0aGlzLl93ZWF0aGVyQXBwLnJlbW92ZUNoaWxkKHRoaXMuX3dlYXRoZXJBcHAuZmlyc3RDaGlsZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBOYXN0YXbDrSBlbGVtZW50dSA8d2VhdGhlci1hcHA+IGNoeWJvdm91IHpwcsOhdnVcclxuICAgKiBAcGFyYW0gZXJyb3JNZXNzYWdlIGNoeWJvdsOhIHpwcsOhdmFcclxuICAgKi9cclxuICBwdWJsaWMgY3JlYXRlRXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwiZXJyb3JNZXNzYWdlXCIsIGVycm9yTWVzc2FnZSk7XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwLmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZVNsb3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnl0dm/FmcOtIGVsZW1lbnR5IDx3ZWF0aGVyLWFwcC1jYXJkPiB6b2JyYXp1asOtY8OtIGRlbiwgdGVwbG90dSwgcG9waXMgcG/EjWFzw60gYSByeWNobG9zdCB2xJt0cnVcclxuICAgKiBLYcW+ZMO9IHogdnl0dm/FmWVuw71jaCBlbGVtZW50xa8gcMWZaXBvasOtIGsgPHdlYXRoZXItYXBwPlxyXG4gICAqIEBwYXJhbSBmb3JlY2FzdHMgcG9sZSB0xZnDrWhvZGlub3bDvWNoIHDFmWVkcG92xJtkw61cclxuICAgKi9cclxuICBwcml2YXRlIF9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMoZm9yZWNhc3RzOiBUaHJlZUhvdXJGb3JlY2FzdFtdKSB7XHJcbiAgICBmb3JlY2FzdHMuZm9yRWFjaCgoZm9yZWNhc3QpID0+IHtcclxuICAgICAgLy8gVnl0dm/FmcOtIGVsZW1lbnQgPHdlYXRoZXItYXBwLWNhcmQ+XHJcbiAgICAgIGNvbnN0IHdlYXRoZXJBcHBDYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIndlYXRoZXItYXBwLWNhcmRcIik7XHJcbiAgICAgIHdlYXRoZXJBcHBDYXJkLnNldEF0dHJpYnV0ZShcInNsb3RcIiwgXCJ3ZWF0aGVyLWFwcC1jYXJkXCIpO1xyXG5cclxuICAgICAgLy8gVnl0dm/FmcOtIDx0ZXh0bm9kZT4gem9icmF6dWrDrWPDrSBuw6F6ZXYgZG5lXHJcbiAgICAgIGNvbnN0IGRheVNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJkYXlcIiwgZm9yZWNhc3QuZ2V0RGF5TmFtZSgpKTtcclxuICAgICAgLy8gVnl0dm/FmcOtIDx0ZXh0bm9kZT4gem9icmF6dWrDrWPDrSB0ZXBsb3R1XHJcbiAgICAgIGNvbnN0IHRlbXBTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwidGVtcFwiLCBgJHtmb3JlY2FzdC50ZW1wfWApO1xyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIHBvcGlzIHBvxI1hc8OtXHJcbiAgICAgIGNvbnN0IGRlc2NTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwiZGVzY3JpcHRpb25cIiwgYCR7Zm9yZWNhc3Qud2VhdGhlckRlc2NyaXB0aW9ufWApO1xyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIHJ5Y2hsb3N0IHbEm3RydVxyXG4gICAgICBjb25zdCB3aW5kU2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcIndpbmRcIiwgYCR7Zm9yZWNhc3Qud2luZFNwZWVkfWApO1xyXG5cclxuICAgICAgLy8gVsWhZWNobnkgdnl0dm/FmWVuw6kgZWxlbWVudHkgcMWZaXBvasOtIGsgPHdlYXRoZXItYXBwLWNhcmQ+XHJcbiAgICAgIHdlYXRoZXJBcHBDYXJkLmFwcGVuZChkYXlTbG90LCB0ZW1wU2xvdCwgZGVzY1Nsb3QsIHdpbmRTbG90KTtcclxuICAgICAgdGhpcy5fd2VhdGhlckFwcC5hcHBlbmRDaGlsZCh3ZWF0aGVyQXBwQ2FyZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZ5dHZvxZnDrSBlbGVtZW50IDx0ZXh0bm9kZT4gcyBkYW5vdSBob2Rub3RvdSBhdHJpYnV0dSAnc2xvdCcgYSAnaW5uZXJIVE1MJ1xyXG4gICAqIEBwYXJhbSBzbG90TmFtZSBob2Rub3RhIGF0cmlidXR1ICdzbG90J1xyXG4gICAqIEBwYXJhbSBpbm5lckhUTUxWYWx1ZSBob2Rub3RhICdpbm5lckhUTUwnXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKHNsb3ROYW1lOiBzdHJpbmcsIGlubmVySFRNTFZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHRleHROb2RlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0Tm9kZVwiKTtcclxuICAgIHRleHROb2RlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzbG90XCIsIHNsb3ROYW1lKTtcclxuICAgIHRleHROb2RlRWxlbWVudC5pbm5lckhUTUwgPSBpbm5lckhUTUxWYWx1ZTtcclxuICAgIHJldHVybiB0ZXh0Tm9kZUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPZGNoeXTDrSB1ZMOhbG9zdCB2eWhsZWTDoW7DrSBuw6F6dnUgbcSbc3RhIGEgbm92w70gbsOhemV2IHBvxaFsZSBkbyBXZWF0aGVyQXBwQ29udHJvbGxlcnVcclxuICAgKiBAcGFyYW0gaGFuZGxlciAtIG1ldG9kYSBXZWF0aGVyQXBwQ29udHJvbGxlcnUsIGt0ZXLDoSBzaSBuYSB6w6FrbGFkxJsgbsOhenZ1IG3Em3N0YSB2ecW+w6Fkw6Egbm92w6EgZGF0YSBhIHDFmWVrcmVzbMOtIFVJXHJcbiAgICovXHJcbiAgcHVibGljIGJpbmRTZWFyY2hDaXR5KGhhbmRsZXIpIHtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYWRkRXZlbnRMaXN0ZW5lcihcInNlYXJjaFN1Ym1pdFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIGhhbmRsZXIoZXZlbnQuZGV0YWlsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2RjaHl0w60gdWTDoWxvc3QgcHJvIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5IGEgbsOhc2xlZG7EmyBwxZlla3Jlc2zDrSBVSVxyXG4gICAqIEBwYXJhbSBoYW5kbGVyIG1ldG9kYSBXZWF0aGVyQXBwQ29udHJvbGxlcnUsIGt0ZXLDoSB2eXZvbMOhIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5IGEgbsOhc2xlZG7EmyBwxZlla3Jlc2xlbsOtIFVJXHJcbiAgICovXHJcbiAgcHVibGljIGJpbmRHZXRHZW9sb2NhdGlvbihoYW5kbGVyKSB7XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwLmFkZEV2ZW50TGlzdGVuZXIoXCJnZXRHZW9sb2NhdGlvblwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaGFuZGxlcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiaW1wb3J0IFdlYXRoZXJBcHBDb250cm9sbGVyIGZyb20gXCIuL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlclwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcE1vZGVsIGZyb20gXCIuL01vZGVscy9XZWF0aGVyQXBwTW9kZWxcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBWaWV3IGZyb20gXCIuL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG5jb25zdCBSRVNPVVJDRV9VUkw6IHN0cmluZyA9XHJcbiAgXCJodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvZm9yZWNhc3Q/JmFwcGlkPTRhNzEwMjc3YjQxZDdkYTc5MWU0NGJmNTE1YmFjNmY3Jmxhbmc9Q1pcIjtcclxuXHJcbi8qKlxyXG4gKiBWeXR2b8WZw60gYXBsaWthY2kgem9icmF6dWrDrWPDrSBwxZllZHBvdsSbxI8gcG/EjWFzw60gbmEgbsOhc2xlZHVqw61jaCA1IGRuw60geiBkYXQsIGt0ZXLDoSB6w61za8OhIG5hIHphZGFuw6kgVVJMIGFkcmVzZVxyXG4gKiAtIHpuaWNpYWxpenVqZSBNb2RlbCwgQ29udHJvbGxlciBhIFZpZXdcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlYXRoZXJBcHAodXJsOiBzdHJpbmcpIHtcclxuICBjb25zdCBtb2RlbCA9IG5ldyBXZWF0aGVyQXBwTW9kZWwodXJsLCBcIlRvdmHEjW92XCIpO1xyXG4gIGF3YWl0IG1vZGVsLmluaXRpYWxpemUoKTtcclxuXHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBXZWF0aGVyQXBwQ29udHJvbGxlcihtb2RlbCwgbmV3IFdlYXRoZXJBcHBWaWV3KCkpO1xyXG59XHJcblxyXG5jcmVhdGVXZWF0aGVyQXBwKFJFU09VUkNFX1VSTCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=