!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t,e){this._model=t,this._view=e,this._view.bindSearchCity(this.handleSearchCity.bind(this)),this._view.bindGetGeolocation(this.handleGetGeolocation.bind(this)),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)}handleSearchCity(t){return i(this,void 0,void 0,(function*(){this._model.cityName=t,yield this._model.initialize(),this._checkForecastStatusAndRenderUI(t)}))}handleGetGeolocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this)):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Ve vašem prohlížeči není zjištění aktuální polohy podporováno."))}_success(t){return i(this,void 0,void 0,(function*(){this._model.latitude=t.coords.latitude,this._model.longitude=t.coords.longitude,yield this._model.initialize(!1),this._checkForecastStatusAndRenderUI()}))}_error(){this._view.removeCityNameAndForecasts(),this._view.createErrorMessage("Pro vaši aktuální polohu se nepodařilo najít předpověď.")}_checkForecastStatusAndRenderUI(t=""){"200"===this._model.forecast.cod?this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage(`Pro město s názvem '${t}' se nepodařilo najít předpověď.`))}}class r{constructor(t,e,n,i){this._temp=t,this._date=new Date(e),this._weatherDescription=n,this._windSpeed=i}get temp(){return Math.round(this._temp)}get date(){return this._date}get weatherDescription(){return this._weatherDescription}get windSpeed(){return this._windSpeed}set date(t){this._date=t}getDayName(){return new Intl.DateTimeFormat("cs-CZ",{weekday:"long"}).format(this.date)}}class s{constructor(t,e,n,i){this._name=t,this._country=e,this._sunrise=n,this._sunset=i}get name(){return this._name}get country(){return this._country}get sunrise(){return this._sunrise}get sunset(){return this._sunset}}class a{constructor(t){if(this._treeHourForecasts=new Array,this._cod=t.cod,"200"===this._cod){for(let e of t.list)this._treeHourForecasts.push(new r(e.main.temp,e.dt_txt,e.weather[0].description,e.wind.speed));this._city=new s(t.city.name,t.city.country,t.city.sunrise,t.city.sunset)}}get cod(){return this._cod}get city(){return this._city}getForecastsWithHighestTempForEveryDay(){const t=this._getForecastsWithoutHours(this._treeHourForecasts);var e;return function(t,e){let n=new Array;for(let i in t){const o=t[i].reduce((t,n)=>t[e]>n[e]?t:n);n.push(o)}return n}((e="date",t.reduce((t,n)=>{let i=n[e];return t[i]||(t[i]=[]),t[i].push(n),t},{})),"temp")}_getForecastsWithoutHours(t){return t.map(t=>(t.date=new Date(`${t.date.getFullYear()}-${t.date.getMonth()+1}-${t.date.getDate()}`),t))}}var c=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class h{constructor(t,e,n="metric"){this._url=t,this._cityName=e,this._units=n}get forecast(){return this._forecast}set cityName(t){this._cityName=t}set latitude(t){this._latitude=t}set longitude(t){this._longitude=t}initialize(t=!0){return c(this,void 0,void 0,(function*(){let e="";e=t?this._url.concat("&q=",this._cityName,"&units=",this._units):this._url.concat("&lat=",this._latitude,"&lon=",this._longitude,"&units=",this._units);const n=yield this.fetchForecast(e);this._forecast=new a(n)}))}fetchForecast(t){return c(this,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.json()}))}}const d=document.createElement("template");d.innerHTML='\n<style>\n    h3 {\n        color: coral;\n    }  \n</style>\n<div class="weather-app__card">\n    <h2><slot name="day" /></h2>\n    <h3><slot name="temp"/></h3>\n    <h3><slot name="description"/><</h3>\n    <h3><slot name="wind"/><</h3>\n</div>\n';class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d.content.cloneNode(!0))}}const l=document.createElement("template");l.innerHTML='\n  <form id="search-form">\n      <input type="text" placeholder="Název hledaného města">\n      <button type="submit">Hledat</button>\n      <button id="location">Geo lokace</button>\n  </form>\n';class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this._input=this.shadowRoot.querySelector("input")}connectedCallback(){this.shadowRoot.getElementById("location").addEventListener("click",t=>{t.preventDefault(),this.dispatchEvent(new CustomEvent("getGeolocation"))}),this.shadowRoot.getElementById("search-form").addEventListener("submit",t=>{t.preventDefault();const e=this._input.value;""===e?this.dispatchEvent(new CustomEvent("emptyInput")):this.dispatchEvent(new CustomEvent("searchSubmit",{detail:e}))})}}const m=document.createElement("template");m.innerHTML='\n<div>\n    <weather-app-search></weather-app-search>\n    <h3><slot name="errorMessage"></slot></h3>\n    <h1><slot name="city"></slot></h1>\n    <div class="weather-app__cards">\n      <slot name="weather-app-card"></slot>\n    </div>\n</div>\n';class _ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this._weatherAppSearch=this.shadowRoot.querySelector("weather-app-search")}connectedCallback(){this._weatherAppSearch.addEventListener("emptyInput",t=>{this.dispatchEvent(new CustomEvent("emptyInput",{detail:"Vyplň název města bráško."}))}),this._weatherAppSearch.addEventListener("searchSubmit",t=>{this.dispatchEvent(new CustomEvent("searchSubmit",{detail:t.detail}))}),this._weatherAppSearch.addEventListener("getGeolocation",t=>{this.dispatchEvent(new CustomEvent("getGeolocation"))})}}class w{constructor(){window.customElements.define("weather-app",_),window.customElements.define("weather-app-search",p),window.customElements.define("weather-app-card",u),this._weatherApp=document.createElement("weather-app"),document.getElementsByTagName("body")[0].append(this._weatherApp),this._weatherApp.addEventListener("emptyInput",t=>{this.removeCityNameAndForecasts(),this.createErrorMessage(t.detail)})}renderForecastsForCity(t,e){this.removeCityNameAndForecasts();const n=this._createTextNodeSetSlotAndInnerHTML("city",""+e.name);this._weatherApp.appendChild(n),this._createWeatherAppCards(t)}removeCityNameAndForecasts(){for(;this._weatherApp.firstChild;)this._weatherApp.removeChild(this._weatherApp.firstChild)}createErrorMessage(t){const e=this._createTextNodeSetSlotAndInnerHTML("errorMessage",t);this._weatherApp.appendChild(e)}_createWeatherAppCards(t){t.forEach(t=>{const e=document.createElement("weather-app-card");e.setAttribute("slot","weather-app-card");const n=this._createTextNodeSetSlotAndInnerHTML("day",t.getDayName()),i=this._createTextNodeSetSlotAndInnerHTML("temp",""+t.temp),o=this._createTextNodeSetSlotAndInnerHTML("description",""+t.weatherDescription),r=this._createTextNodeSetSlotAndInnerHTML("wind",""+t.windSpeed);e.append(n,i,o,r),this._weatherApp.appendChild(e)})}_createTextNodeSetSlotAndInnerHTML(t,e){const n=document.createElement("textNode");return n.setAttribute("slot",t),n.innerHTML=e,n}bindSearchCity(t){this._weatherApp.addEventListener("searchSubmit",e=>{t(e.detail)})}bindGetGeolocation(t){this._weatherApp.addEventListener("getGeolocation",e=>{t()})}}var v=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){v(this,void 0,void 0,(function*(){const e=new h(t,"Tovačov");yield e.initialize();new o(e,new w)}))}("https://api.openweathermap.org/data/2.5/forecast?&appid=4a710277b41d7da791e44bf515bac6f7&lang=CZ")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9Nb2RlbHMvQ2l0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0ZpdmVEYXlGb3JlY2FzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVscy9XZWF0aGVyQXBwTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXdzL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9XZWF0aGVyQXBwVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlYXRoZXJBcHBDb250cm9sbGVyIiwibW9kZWwiLCJ2aWV3IiwidGhpcyIsIl9tb2RlbCIsIl92aWV3IiwiYmluZFNlYXJjaENpdHkiLCJoYW5kbGVTZWFyY2hDaXR5IiwiYmluZEdldEdlb2xvY2F0aW9uIiwiaGFuZGxlR2V0R2VvbG9jYXRpb24iLCJyZW5kZXJGb3JlY2FzdHNGb3JDaXR5IiwiZm9yZWNhc3QiLCJnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSIsImNpdHkiLCJjaXR5TmFtZSIsImluaXRpYWxpemUiLCJfY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJfc3VjY2VzcyIsIl9lcnJvciIsInJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzIiwiY3JlYXRlRXJyb3JNZXNzYWdlIiwicG9zaXRpb24iLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImNvZCIsIlRocmVlSG91ckZvcmVjYXN0IiwidGVtcCIsImRhdGUiLCJ3ZWF0aGVyRGVzY3JpcHRpb24iLCJ3aW5kU3BlZWQiLCJfdGVtcCIsIl9kYXRlIiwiRGF0ZSIsIl93ZWF0aGVyRGVzY3JpcHRpb24iLCJfd2luZFNwZWVkIiwiTWF0aCIsInJvdW5kIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0Iiwid2Vla2RheSIsImZvcm1hdCIsIkNpdHkiLCJjb3VudHJ5Iiwic3VucmlzZSIsInN1bnNldCIsIl9uYW1lIiwiX2NvdW50cnkiLCJfc3VucmlzZSIsIl9zdW5zZXQiLCJqc29uT2JqZWN0IiwiX3RyZWVIb3VyRm9yZWNhc3RzIiwiQXJyYXkiLCJfY29kIiwidGhyZWVIb3VyRm9yZWNhc3QiLCJsaXN0IiwicHVzaCIsIm1haW4iLCJkdF90eHQiLCJ3ZWF0aGVyIiwiZGVzY3JpcHRpb24iLCJ3aW5kIiwic3BlZWQiLCJfY2l0eSIsInRocmVlSG91ckZvcmVjYXN0cyIsIl9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnMiLCJncm91cGVkQXJyIiwibWF4VmFsdWVzRnJvbUdyb3VwQXJyIiwiZ3JvdXBLZXkiLCJtYXgiLCJyZWR1Y2UiLCJwcmV2IiwiY3VycmVudCIsImdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyIiwiYWNjIiwib2JqIiwiZm9yZWNhc3RzQXJyIiwibWFwIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJ1cmwiLCJ1bml0cyIsIl91cmwiLCJfY2l0eU5hbWUiLCJfdW5pdHMiLCJfZm9yZWNhc3QiLCJfbGF0aXR1ZGUiLCJfbG9uZ2l0dWRlIiwiaW5pdGlhbGl6ZUJ5Q2l0eU5hbWUiLCJyZXN1bHRVcmwiLCJjb25jYXQiLCJmZXRjaEZvcmVjYXN0IiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIldlYXRoZXJBcHBDYXJkIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsImF0dGFjaFNoYWRvdyIsInNoYWRvd1Jvb3QiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJXZWF0aGVyQXBwU2VhcmNoIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJpbnB1dFZhbHVlIiwiZGV0YWlsIiwiV2VhdGhlckFwcCIsIl93ZWF0aGVyQXBwU2VhcmNoIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJfd2VhdGhlckFwcCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kIiwiZm9yZWNhc3RzIiwiY2l0eVRleHROb2RlIiwiX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTCIsIl9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VTbG90IiwiZm9yRWFjaCIsIndlYXRoZXJBcHBDYXJkIiwic2V0QXR0cmlidXRlIiwiZGF5U2xvdCIsImdldERheU5hbWUiLCJ0ZW1wU2xvdCIsImRlc2NTbG90Iiwid2luZFNsb3QiLCJzbG90TmFtZSIsImlubmVySFRNTFZhbHVlIiwidGV4dE5vZGVFbGVtZW50IiwiaGFuZGxlciIsImNyZWF0ZVdlYXRoZXJBcHAiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gs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R0FDbkQ5SSxLQUFLNEgsWUFBWW5CLFlBQVkrQixLQVN6QixtQ0FBbUNPLEVBQWtCQyxHQUMzRCxNQUFNQyxFQUFrQmhELFNBQVNDLGNBQWMsWUFHL0MsT0FGQStDLEVBQWdCUixhQUFhLE9BQVFNLEdBQ3JDRSxFQUFnQjlDLFVBQVk2QyxFQUNyQkMsRUFPRixlQUFlQyxHQUNwQmxKLEtBQUs0SCxZQUFZWixpQkFBaUIsZUFBaUJDLElBQ2pEaUMsRUFBUWpDLEVBQU1LLFVBUVgsbUJBQW1CNEIsR0FDeEJsSixLQUFLNEgsWUFBWVosaUJBQWlCLGlCQUFtQkMsSUFDbkRpQyxPLDJTQzVHTixTQUFnQ2pFLEcsa0NBQzlCLE1BQU1uRixFQUFRLElBQUksRUFBZ0JtRixFQUFLLGlCQUNqQ25GLEVBQU1jLGFBRU8sSUFBSWYsRUFBcUJDLEVBQU8sSUFBSSxNQUd6RHFKLENBYkUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFdlYXRoZXJBcHBNb2RlbCBmcm9tIFwiLi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4uL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSB6YWrDrcWhxaV1asOtY8OtIGtvbXVuaWthY2kgbWV6aSBkYXR5IGEgVUkgYXBsaWthY2VcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDb250cm9sbGVyIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfbW9kZWw6IFdlYXRoZXJBcHBNb2RlbDtcclxuICBwcml2YXRlIF92aWV3OiBXZWF0aGVyQXBwVmlldztcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihtb2RlbDogV2VhdGhlckFwcE1vZGVsLCB2aWV3OiBXZWF0aGVyQXBwVmlldykge1xyXG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuX3ZpZXcgPSB2aWV3O1xyXG5cclxuICAgIHRoaXMuX3ZpZXcuYmluZFNlYXJjaENpdHkodGhpcy5oYW5kbGVTZWFyY2hDaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdmlldy5iaW5kR2V0R2VvbG9jYXRpb24odGhpcy5oYW5kbGVHZXRHZW9sb2NhdGlvbi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl92aWV3LnJlbmRlckZvcmVjYXN0c0ZvckNpdHkoXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmdldEZvcmVjYXN0c1dpdGhIaWdoZXN0VGVtcEZvckV2ZXJ5RGF5KCksXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBQcm8gemFkYW7DvSBuw6F6ZXYgbcSbc3RhIHZ5aGxlZMOhIHDFmWVkcG92xJvEjyBhIHDFmWVrcmVzbMOtIHBvZGxlIG7DrSBVSVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaXR5TmFtZSAtIG7DoXpldiBtxJtzdGEsIHBybyBrdGVyw6kgc2UgbcOhIHpqaXN0aXQgcMWZZWRwb3bEm8SPXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGhhbmRsZVNlYXJjaENpdHkoY2l0eU5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbW9kZWwuY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICAgIGF3YWl0IHRoaXMuX21vZGVsLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICB0aGlzLl9jaGVja0ZvcmVjYXN0U3RhdHVzQW5kUmVuZGVyVUkoY2l0eU5hbWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogWmppc3TDrSBha3R1w6FsbsOtIHBvbG9odSBhIHZ5aGxlZMOhIHBvZGxlIG7DrSBwxZllZHBvdsSbxI8gYSBuw6FzbGVkbsSbIHDFmWVrcmVzbMOtIFVJLlxyXG4gICAqIFYgcMWZw61wYWTEmywgxb5lIHNlIHBvbG9oYSBuZXBvZGHFmcOtIHpqaXN0aXQgamUgdnlwc8OhbmEgY2h5Ym92w6EgaGzDocWha2EuXHJcbiAgICovXHJcbiAgcHVibGljIGhhbmRsZUdldEdlb2xvY2F0aW9uKCkge1xyXG4gICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcclxuICAgICAgdGhpcy5fdmlldy5yZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpO1xyXG4gICAgICB0aGlzLl92aWV3LmNyZWF0ZUVycm9yTWVzc2FnZShcIlZlIHZhxaFlbSBwcm9obMOtxb5lxI1pIG5lbsOtIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5IHBvZHBvcm92w6Fuby5cIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHRoaXMuX3N1Y2Nlc3MuYmluZCh0aGlzKSwgdGhpcy5fZXJyb3IuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWIHDFmcOtcGFkxJsgbmFsZXplbsOtIGFrdHXDoWxuw60gcG9sb2h5IHZ5dm9sw6EgemppxaF0xJtuw60gcMWZZWRwb3bEm2RpXHJcbiAgICogQHBhcmFtIHBvc2l0aW9uIG9iamVrdCB0eXB1IEdlb2xvY2F0aW9uUG9zaXRpb25cclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIF9zdWNjZXNzKHBvc2l0aW9uKSB7XHJcbiAgICB0aGlzLl9tb2RlbC5sYXRpdHVkZSA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcclxuICAgIHRoaXMuX21vZGVsLmxvbmdpdHVkZSA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5fbW9kZWwuaW5pdGlhbGl6ZShmYWxzZSk7XHJcblxyXG4gICAgdGhpcy5fY2hlY2tGb3JlY2FzdFN0YXR1c0FuZFJlbmRlclVJKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWIHDFmcOtcGFkxJsgbmVuYWxlemVuw60gYWt0dcOhbG7DrSBwb2xvaHkgbmFzdGF2w60gY2h5Ym92b3UgaGzDocWha3VcclxuICAgKi9cclxuICBwcml2YXRlIF9lcnJvcigpIHtcclxuICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgIHRoaXMuX3ZpZXcuY3JlYXRlRXJyb3JNZXNzYWdlKFwiUHJvIHZhxaFpIGFrdHXDoWxuw60gcG9sb2h1IHNlIG5lcG9kYcWZaWxvIG5hasOtdCBwxZllZHBvdsSbxI8uXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3bEm8WZw60sIHpkYSBieWxhIG5hbGV6ZW5hIHDFmWVkcG92xJvEjywgcG9rdWQgYW5vIHDFmWVrcmVzbMOtIFVJLCBwb2t1ZCBuZSB6b2JyYXrDrSBjaHlib3ZvdSB6cHLDoXZvdVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NoZWNrRm9yZWNhc3RTdGF0dXNBbmRSZW5kZXJVSShjaXR5TmFtZSA9IFwiXCIpIHtcclxuICAgIGlmICh0aGlzLl9tb2RlbC5mb3JlY2FzdC5jb2QgPT09IFwiMjAwXCIpIHtcclxuICAgICAgdGhpcy5fdmlldy5yZW5kZXJGb3JlY2FzdHNGb3JDaXR5KFxyXG4gICAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmdldEZvcmVjYXN0c1dpdGhIaWdoZXN0VGVtcEZvckV2ZXJ5RGF5KCksXHJcbiAgICAgICAgdGhpcy5fbW9kZWwuZm9yZWNhc3QuY2l0eVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fdmlldy5yZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpO1xyXG4gICAgICB0aGlzLl92aWV3LmNyZWF0ZUVycm9yTWVzc2FnZShgUHJvIG3Em3N0byBzIG7DoXp2ZW0gJyR7Y2l0eU5hbWV9JyBzZSBuZXBvZGHFmWlsbyBuYWrDrXQgcMWZZWRwb3bEm8SPLmApO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsIi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gdMWZw61ob2Rpbm91IHDFmWVkcG92xJvEj1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRocmVlSG91ckZvcmVjYXN0IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfdGVtcDogbnVtYmVyO1xyXG4gIHByaXZhdGUgX2RhdGU6IERhdGU7XHJcbiAgcHJpdmF0ZSBfd2VhdGhlckRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfd2luZFNwZWVkOiBudW1iZXI7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVyaWVzXHJcbiAgZ2V0IHRlbXAoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMuX3RlbXApO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGUoKTogRGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0ZTtcclxuICB9XHJcblxyXG4gIGdldCB3ZWF0aGVyRGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl93ZWF0aGVyRGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXQgd2luZFNwZWVkKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fd2luZFNwZWVkO1xyXG4gIH1cclxuXHJcbiAgc2V0IGRhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy5fZGF0ZSA9IGRhdGU7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKHRlbXA6IG51bWJlciwgZGF0ZTogc3RyaW5nLCB3ZWF0aGVyRGVzY3JpcHRpb246IHN0cmluZywgd2luZFNwZWVkOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX3RlbXAgPSB0ZW1wO1xyXG4gICAgdGhpcy5fZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgdGhpcy5fd2VhdGhlckRlc2NyaXB0aW9uID0gd2VhdGhlckRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5fd2luZFNwZWVkID0gd2luZFNwZWVkO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgcHVibGljIGdldERheU5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImNzLUNaXCIsIHsgd2Vla2RheTogXCJsb25nXCIgfSkuZm9ybWF0KHRoaXMuZGF0ZSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG59XHJcbiIsIi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gbcSbc3RvXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2l0eSB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcclxuICBwcml2YXRlIF9jb3VudHJ5OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfc3VucmlzZTogbnVtYmVyO1xyXG4gIHByaXZhdGUgX3N1bnNldDogbnVtYmVyO1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3BlcnRpZXNcclxuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgfVxyXG5cclxuICBnZXQgY291bnRyeSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvdW50cnk7XHJcbiAgfVxyXG5cclxuICBnZXQgc3VucmlzZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N1bnJpc2U7XHJcbiAgfVxyXG5cclxuICBnZXQgc3Vuc2V0KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3Vuc2V0O1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGVydGllc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBjb3VudHJ5OiBzdHJpbmcsIHN1bnJpc2U6IG51bWJlciwgc3Vuc2V0OiBudW1iZXIpIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fY291bnRyeSA9IGNvdW50cnk7XHJcbiAgICB0aGlzLl9zdW5yaXNlID0gc3VucmlzZTtcclxuICAgIHRoaXMuX3N1bnNldCA9IHN1bnNldDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG59XHJcbiIsImltcG9ydCB7IFRocmVlSG91ckZvcmVjYXN0IH0gZnJvbSBcIi4vVGhyZWVIb3VyRm9yZWNhc3RcIjtcclxuaW1wb3J0IHsgQ2l0eSB9IGZyb20gXCIuL0NpdHlcIjtcclxuaW1wb3J0IHsgZ3JvdXBBcnJCeVByb3BlcnR5LCBnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFyciB9IGZyb20gXCIuLi9VdGlscy9hcnJheS11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBwxZllZHBvdsSbxI8gcG/EjWFzw60gbmEgNSBkbsOtLCBwbyAzIGhvZGluw6FjaCwgcHJvIGRhbsOpIG3Em3N0b1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml2ZURheUZvcmVjYXN0IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfY29kOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfdHJlZUhvdXJGb3JlY2FzdHM6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PiA9IG5ldyBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4oKTtcclxuICBwcml2YXRlIF9jaXR5OiBDaXR5O1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3BlcnRpZXNcclxuICBnZXQgY29kKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29kO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNpdHkoKTogQ2l0eSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2l0eTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKGpzb25PYmplY3Q6IGFueSkge1xyXG4gICAgdGhpcy5fY29kID0ganNvbk9iamVjdC5jb2Q7XHJcblxyXG4gICAgaWYgKHRoaXMuX2NvZCA9PT0gXCIyMDBcIikge1xyXG4gICAgICBmb3IgKGxldCB0aHJlZUhvdXJGb3JlY2FzdCBvZiBqc29uT2JqZWN0Lmxpc3QpIHtcclxuICAgICAgICB0aGlzLl90cmVlSG91ckZvcmVjYXN0cy5wdXNoKFxyXG4gICAgICAgICAgbmV3IFRocmVlSG91ckZvcmVjYXN0KFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC5tYWluLnRlbXAsXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0LmR0X3R4dCxcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3Qud2VhdGhlclswXS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3Qud2luZC5zcGVlZFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuX2NpdHkgPSBuZXcgQ2l0eShcclxuICAgICAgICBqc29uT2JqZWN0LmNpdHkubmFtZSxcclxuICAgICAgICBqc29uT2JqZWN0LmNpdHkuY291bnRyeSxcclxuICAgICAgICBqc29uT2JqZWN0LmNpdHkuc3VucmlzZSxcclxuICAgICAgICBqc29uT2JqZWN0LmNpdHkuc3Vuc2V0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBWcsOhdMOtIHBvbGUgdMWZw61ob2Rpbm92w71jaCBwxZllZHBvdsSbZMOtIHMgbmVqdnnFocWhw60gdGVwbG90b3UgcHJvIGthxb5kw70gZGVuXHJcbiAgICovXHJcbiAgcHVibGljIGdldEZvcmVjYXN0c1dpdGhIaWdoZXN0VGVtcEZvckV2ZXJ5RGF5KCk6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PiB7XHJcbiAgICBjb25zdCB0aHJlZUhvdXJGb3JlY2FzdHMgPSB0aGlzLl9nZXRGb3JlY2FzdHNXaXRob3V0SG91cnModGhpcy5fdHJlZUhvdXJGb3JlY2FzdHMpO1xyXG4gICAgY29uc3QgdGhyZWVIb3VyRm9yZWNhc3RzR3JvdXBlZEJ5RGF0ZSA9IGdyb3VwQXJyQnlQcm9wZXJ0eSh0aHJlZUhvdXJGb3JlY2FzdHMsIFwiZGF0ZVwiKTtcclxuICAgIGNvbnN0IHRocmVlSG91ckZvcmVjYXN0c1dpdGhNYXhUZW1wID0gZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIodGhyZWVIb3VyRm9yZWNhc3RzR3JvdXBlZEJ5RGF0ZSwgXCJ0ZW1wXCIpO1xyXG5cclxuICAgIHJldHVybiB0aHJlZUhvdXJGb3JlY2FzdHNXaXRoTWF4VGVtcDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZyw6F0w60gcG9sZSB0xZnDrWhvZGlub3bDvWNoIHDFmWVkcG92xJtkw60gamVuIHMgZGF0dW1lbSBiZXogxI1hc292w6lobyDDumRhamVcclxuICAgKiBAcGFyYW0ge3BvbGUgb2JqZWt0xa8gdHlwdSBGb3JlY2FzdH0gZm9yZWNhc3RzQXJyXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfZ2V0Rm9yZWNhc3RzV2l0aG91dEhvdXJzKGZvcmVjYXN0c0FycjogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+KTogQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+IHtcclxuICAgIHJldHVybiBmb3JlY2FzdHNBcnIubWFwKChmb3JlY2FzdCkgPT4ge1xyXG4gICAgICBmb3JlY2FzdC5kYXRlID0gbmV3IERhdGUoXHJcbiAgICAgICAgYCR7Zm9yZWNhc3QuZGF0ZS5nZXRGdWxsWWVhcigpfS0ke2ZvcmVjYXN0LmRhdGUuZ2V0TW9udGgoKSArIDF9LSR7Zm9yZWNhc3QuZGF0ZS5nZXREYXRlKCl9YFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gZm9yZWNhc3Q7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCIvKipcclxuICogU2Vza3Vww60gcHJ2a3kgcG9sZSBkbyBza3VwaW4sIGt0ZXLDqSBtYWrDrSBzdGVqbm91IGhvZG5vdHUgemFkYW7DqSBwcm9wZXJ0eVxyXG4gKiBAcGFyYW0ge3BvbGUgb2JqZWt0xa99IGFyclxyXG4gKiBAcGFyYW0ge3ZsYXN0bm9zdCBvYmpla3R1IHBvbGV9IHByb3BlcnR5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBBcnJCeVByb3BlcnR5KGFyciwgcHJvcGVydHkpIHtcclxuICByZXR1cm4gYXJyLnJlZHVjZSgoYWNjLCBvYmopID0+IHtcclxuICAgIGxldCBrZXkgPSBvYmpbcHJvcGVydHldO1xyXG4gICAgaWYgKCFhY2Nba2V5XSkge1xyXG4gICAgICBhY2Nba2V5XSA9IFtdO1xyXG4gICAgfVxyXG4gICAgYWNjW2tleV0ucHVzaChvYmopO1xyXG4gICAgcmV0dXJuIGFjYztcclxuICB9LCB7fSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBaZSBzZXNrdXBlbsOpaG8gcG9sZSB2csOhdMOtIHBybyBrYcW+ZG91IHNrdXBpbnUgb2JqZWt0IHMgbmVqdnnFocWhw60gaG9kbm90b3UgcHJvcGVydHlcclxuICogQHBhcmFtIHtwb2xlIG9iamVrdMWvLCBrdGVyw6kganNvdSBzZXNrdXBlbnkgcG9kbGUgamVkbsOpIHogcHJvcGVydHkgb2JqZWt0dX0gZ3JvdXBlZEFyclxyXG4gKiBAcGFyYW0ge3Byb3BlcnR5IG9iamVrdHUgcG9sZSwgcHJvIGt0ZXJvdSBzZSB2IGthxb5kw6kgc2t1cGluxJsgaGxlZMOhIG5lanZ5xaHFocOtIGhvZG5vdGF9IHByb3BlcnR5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIoZ3JvdXBlZEFyciwgcHJvcGVydHkpIHtcclxuICBsZXQgbWF4VmFsdWVzRnJvbUdyb3VwQXJyID0gbmV3IEFycmF5KCk7XHJcblxyXG4gIGZvciAobGV0IGdyb3VwS2V5IGluIGdyb3VwZWRBcnIpIHtcclxuICAgIGNvbnN0IG1heCA9IGdyb3VwZWRBcnJbZ3JvdXBLZXldLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gcHJldltwcm9wZXJ0eV0gPiBjdXJyZW50W3Byb3BlcnR5XSA/IHByZXYgOiBjdXJyZW50O1xyXG4gICAgfSk7XHJcbiAgICBtYXhWYWx1ZXNGcm9tR3JvdXBBcnIucHVzaChtYXgpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1heFZhbHVlc0Zyb21Hcm91cEFycjtcclxufVxyXG4iLCJpbXBvcnQgRml2ZURheUZvcmVjYXN0IGZyb20gXCIuL0ZpdmVEYXlGb3JlY2FzdFwiO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcHJvIHrDrXNrw6Fuw60gYSBwcsOhY2kgcyBkYXR5LCBrdGVyw6EgesOtc2thbGEgeiBkYW7DqSBVUkxcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBNb2RlbCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3VybDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2NpdHlOYW1lOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfdW5pdHM6IHN0cmluZztcclxuICBwcml2YXRlIF9sYXRpdHVkZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2xvbmdpdHVkZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2ZvcmVjYXN0OiBGaXZlRGF5Rm9yZWNhc3Q7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gUHJvcGVydGllc1xyXG4gIGdldCBmb3JlY2FzdCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9mb3JlY2FzdDtcclxuICB9XHJcblxyXG4gIHNldCBjaXR5TmFtZShjaXR5TmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9jaXR5TmFtZSA9IGNpdHlOYW1lO1xyXG4gIH1cclxuXHJcbiAgc2V0IGxhdGl0dWRlKGxhdGl0dWRlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX2xhdGl0dWRlID0gbGF0aXR1ZGU7XHJcbiAgfVxyXG5cclxuICBzZXQgbG9uZ2l0dWRlKGxvbmdpdHVkZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9sb25naXR1ZGUgPSBsb25naXR1ZGU7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgY2l0eU5hbWU6IHN0cmluZywgdW5pdHMgPSBcIm1ldHJpY1wiKSB7XHJcbiAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICB0aGlzLl9jaXR5TmFtZSA9IGNpdHlOYW1lO1xyXG4gICAgdGhpcy5fdW5pdHMgPSB1bml0cztcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIC8qKlxyXG4gICAqIFrDrXNrw6EgYSBuYXN0YXbDrSBwxZllZHBvdsSbxI8gcG/EjWFzw60gbmEgNSBkbsOtIHBybyBkYW7DqSBtxJtzdG8gbmVibyBwb2xvaHUgYSBqZWRub3RreSwgdmUga3RlcsOpIHNlIHpvYnJhenVqZSB0ZXBsb3RhXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoaW5pdGlhbGl6ZUJ5Q2l0eU5hbWUgPSB0cnVlKSB7XHJcbiAgICBsZXQgcmVzdWx0VXJsID0gXCJcIjtcclxuXHJcbiAgICBpZiAoaW5pdGlhbGl6ZUJ5Q2l0eU5hbWUpIHtcclxuICAgICAgcmVzdWx0VXJsID0gdGhpcy5fdXJsLmNvbmNhdChcIiZxPVwiLCB0aGlzLl9jaXR5TmFtZSwgXCImdW5pdHM9XCIsIHRoaXMuX3VuaXRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdFVybCA9IHRoaXMuX3VybC5jb25jYXQoXCImbGF0PVwiLCB0aGlzLl9sYXRpdHVkZSwgXCImbG9uPVwiLCB0aGlzLl9sb25naXR1ZGUsIFwiJnVuaXRzPVwiLCB0aGlzLl91bml0cyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmb3JlY2FzdCA9IGF3YWl0IHRoaXMuZmV0Y2hGb3JlY2FzdChyZXN1bHRVcmwpO1xyXG4gICAgdGhpcy5fZm9yZWNhc3QgPSBuZXcgRml2ZURheUZvcmVjYXN0KGZvcmVjYXN0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5hxI10ZSBwxZllZHBvdsSbZCB6IGRhbsOpIHVybFxyXG4gICAqIEBwYXJhbSB7YWRyZXNhLCB6ZSBrdGVyw6kgc2UgbmHEjcOtdGFqw60gZGF0YX0gdXJsXHJcbiAgICogQHJldHVybnMgcG9sZSBvYmpla3TFryBzIMO6ZGFqaSBvIHDFmWVkcG92xJtkaVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hGb3JlY2FzdCh1cmw6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xyXG4gICAgY29uc3QgZm9yZWNhc3QgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICByZXR1cm4gZm9yZWNhc3Q7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcclxuPHN0eWxlPlxyXG4gICAgaDMge1xyXG4gICAgICAgIGNvbG9yOiBjb3JhbDtcclxuICAgIH0gIFxyXG48L3N0eWxlPlxyXG48ZGl2IGNsYXNzPVwid2VhdGhlci1hcHBfX2NhcmRcIj5cclxuICAgIDxoMj48c2xvdCBuYW1lPVwiZGF5XCIgLz48L2gyPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJ0ZW1wXCIvPjwvaDM+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cImRlc2NyaXB0aW9uXCIvPjw8L2gzPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJ3aW5kXCIvPjw8L2gzPlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gSFRNTEVsZW1lbnQgPHdlYXRoZXItYXBwLWNhcmQ+LCBrdGVyw70gc2xvdcW+w60gcHJvIHpvYnJhemVuw60gcMWZZWRwb3bEm2RpIHBvxI1hc8OtIG5hIDEgZGVuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwQ2FyZCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcbn1cclxuIiwiY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbnRlbXBsYXRlLmlubmVySFRNTCA9IGBcclxuICA8Zm9ybSBpZD1cInNlYXJjaC1mb3JtXCI+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiTsOhemV2IGhsZWRhbsOpaG8gbcSbc3RhXCI+XHJcbiAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkhsZWRhdDwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIGlkPVwibG9jYXRpb25cIj5HZW8gbG9rYWNlPC9idXR0b24+XHJcbiAgPC9mb3JtPlxyXG5gO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBIVE1MRWxlbWVudCA8d2VhdGhlci1hcHAtc2VhcmNoPiwga3RlcsO9IHNsb3XFvsOtIHBybyB6b2JyYXplbsOtIHBvbGUgYSB0bGHEjcOtdGthIHBybyB2eWhsZWTDoW7DrSBtxJtzdGFcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBTZWFyY2ggZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX2lucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIC8qKlxyXG4gICAgICogUG8ga2xpa251dMOtIG5hIDxidXR0b24+IHMgaWQ9XCJsb2NhdGlvblwiIGRvamRlIGsgb2Rlc2zDoW7DrSB2bGFzdG7DrWhvIGV2ZW50dSwga3RlcsO9IHZ5dm9sw6EgemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHlcclxuICAgICAqL1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZ2V0R2VvbG9jYXRpb25cIikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBLZHnFviAnc2VhcmNoLWZvcm0nIG9kY2h5dMOtIHVkw6Fsb3N0ICdzdWJtaXQnIHZ5dHZvxZnDrSB2bGFzdG7DrSBldmVudCBhIHRlbiBvZGXFoWxlLlxyXG4gICAgICogViBwxZnDrXBhZMSbLCDFvmUgZG8gaW5wdXR1IGJ5bGEgemFkw6FuYSBob2Rub3RhLCB0YWsgcG/FoWxlIGkgamkuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcInNlYXJjaC1mb3JtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gdGhpcy5faW5wdXQudmFsdWU7XHJcbiAgICAgIGlmIChpbnB1dFZhbHVlID09PSBcIlwiKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImVtcHR5SW5wdXRcIikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGlucHV0VmFsdWUgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgV2VhdGhlckFwcFNlYXJjaCBmcm9tIFwiLi9XZWF0aGVyQXBwU2VhcmNoXCI7XHJcblxyXG5jb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG48ZGl2PlxyXG4gICAgPHdlYXRoZXItYXBwLXNlYXJjaD48L3dlYXRoZXItYXBwLXNlYXJjaD5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwiZXJyb3JNZXNzYWdlXCI+PC9zbG90PjwvaDM+XHJcbiAgICA8aDE+PHNsb3QgbmFtZT1cImNpdHlcIj48L3Nsb3Q+PC9oMT5cclxuICAgIDxkaXYgY2xhc3M9XCJ3ZWF0aGVyLWFwcF9fY2FyZHNcIj5cclxuICAgICAgPHNsb3QgbmFtZT1cIndlYXRoZXItYXBwLWNhcmRcIj48L3Nsb3Q+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcD4sIGt0ZXLDvSB6b2JyYXp1amUgdnlobGVkw6F2YWPDrSBwb2xlIHMgdGxhxI3DrXRrZW0gYSB0YWvDqSBwxZllZHBvdsSbZGkgcG/EjWFzw60gbmEgNSBkbsOtIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHAgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3dlYXRoZXJBcHBTZWFyY2g6IFdlYXRoZXJBcHBTZWFyY2g7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwid2VhdGhlci1hcHAtc2VhcmNoXCIpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAvLyBQb2t1ZCA8d2VhdGhlci1hcHAtc2VhcmNoPiBvZGNoeXTDrSB1ZMOhbG9zdCAnZW1wdHlJbnB1dCcgcG/FoWxlIHVkw6Fsb3N0LCBrdGVyw6kgdnl2b2zDoSBvZHN0cmFuxJtuw60gbsOhenZ1IG3Em3N0YSBhIHDFmWVkcG92xJtkw60gYSBuYXN0YXbDrSBjaHlib3ZvdSBobMOhxaFrdVxyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJlbXB0eUlucHV0XCIsIHsgZGV0YWlsOiBcIlZ5cGzFiCBuw6F6ZXYgbcSbc3RhIGJyw6HFoWtvLlwiIH0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFBva3VkIDx3ZWF0aGVyLWFwcC1zZWFyY2g+IG9kY2h5dMOtIHVkw6Fsb3N0ICdzZWFyY2hTdWJtaXQnLCB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQgYSB0ZW4gb2RlxaFsZSBzcG9sdSBzIG7DoXp2ZW0gbcSbc3RhLCBwcm8ga3RlcsOpIHNlIG3DoSB2eWhsZWRhdCBwxZllZHBvdsSbxI9cclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcInNlYXJjaFN1Ym1pdFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzZWFyY2hTdWJtaXRcIiwgeyBkZXRhaWw6IGV2ZW50LmRldGFpbCB9KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQb2t1ZDwgd2VhdGhlci1hcHAtc2VhcmNoPiBvZGNoeXTDrSB1ZMOhbG9zdCAnZ2V0R2VvbG9jYXRpb24nLCB2eXR2b8WZw60gdmxhc3Ruw60gZXZlbnQsIGt0ZXLDvSB2eXZvbMOhIHpqacWhdMSbbsOtIGFrdHXDoWxuw60gcG9sb2h5XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJnZXRHZW9sb2NhdGlvblwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJnZXRHZW9sb2NhdGlvblwiKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuLi9Nb2RlbHMvVGhyZWVIb3VyRm9yZWNhc3RcIjtcclxuaW1wb3J0IHsgQ2l0eSB9IGZyb20gXCIuLi9Nb2RlbHMvQ2l0eVwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcENhcmQgZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcENhcmRcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBTZWFyY2ggZnJvbSBcIi4vQ3VzdG9tRWxlbWVudHMvV2VhdGhlckFwcFNlYXJjaFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcCBmcm9tIFwiLi9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwXCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSBzZSBzdGFyw6EgbyBVSSBhcGxpa2FjZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFZpZXcge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF93ZWF0aGVyQXBwOiBIVE1MRWxlbWVudDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcFwiLCBXZWF0aGVyQXBwKTtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcC1zZWFyY2hcIiwgV2VhdGhlckFwcFNlYXJjaCk7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwid2VhdGhlci1hcHAtY2FyZFwiLCBXZWF0aGVyQXBwQ2FyZCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ3ZWF0aGVyLWFwcFwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmQodGhpcy5fd2VhdGhlckFwcCk7XHJcblxyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwiZW1wdHlJbnB1dFwiLCAoZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5jcmVhdGVFcnJvck1lc3NhZ2UoZXZlbnQuZGV0YWlsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogVnlrcmVzbMOtIHDFmWVkcG92xJtkaSBwcm8gemFkYW7DqSBtxJtzdG9cclxuICAgKiBAcGFyYW0ge0FycmF5PFRocmVlSG91ckZvcmVjYXN0Pn0gZm9yZWNhc3RzIC0gcG9sZSBwxZllZHBvdsSbZMOtLCBrdGVyw6kgc2UgbWFqw60gdnlrcmVzbGl0XHJcbiAgICogQHBhcmFtIHtDaXR5fSBjaXR5IC0gbcSbc3RvLCBwcm8ga3RlcsOpIHNlIHDFmWVkcG92xJvEjyB2eWtyZXNsdWplXHJcbiAgICovXHJcbiAgcHVibGljIHJlbmRlckZvcmVjYXN0c0ZvckNpdHkoZm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4sIGNpdHk6IENpdHkpIHtcclxuICAgIC8vIE9kc3RyYW7DrSBlbGVtZW50eSBzIG7DoXp2ZW0gbcSbc3RhIGEgcMWZZWRwb3bEm2RpXHJcbiAgICB0aGlzLnJlbW92ZUNpdHlOYW1lQW5kRm9yZWNhc3RzKCk7XHJcblxyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnQgcyBuw6F6dmVtIG3Em3N0YSBhIHDFmWlwb2rDrSBobyBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIGNvbnN0IGNpdHlUZXh0Tm9kZSA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImNpdHlcIiwgYCR7Y2l0eS5uYW1lfWApO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hcHBlbmRDaGlsZChjaXR5VGV4dE5vZGUpO1xyXG4gICAgLy8gVnl0dm/FmcOtIGVsZW1lbnR5IDx3ZWF0aGVyLWFwcC1jYXJkPiBhIHDFmWlwb2rDrSBqZSBrIDx3ZWF0aGVyLWFwcD5cclxuICAgIHRoaXMuX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2RzdHJhbsOtIGVsZW1lbnR5IHMgbsOhenZlbSBtxJtzdGEgYSBqZWRub3RsaXbDqSBwxZllZHBvdsSbZGlcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKSB7XHJcbiAgICB3aGlsZSAodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKSB7XHJcbiAgICAgIHRoaXMuX3dlYXRoZXJBcHAucmVtb3ZlQ2hpbGQodGhpcy5fd2VhdGhlckFwcC5maXJzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5hc3RhdsOtIGVsZW1lbnR1IDx3ZWF0aGVyLWFwcD4gY2h5Ym92b3UgenByw6F2dVxyXG4gICAqIEBwYXJhbSBlcnJvck1lc3NhZ2UgY2h5Ym92w6EgenByw6F2YVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZVNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJlcnJvck1lc3NhZ2VcIiwgZXJyb3JNZXNzYWdlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlU2xvdCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWeXR2b8WZw60gZWxlbWVudHkgPHdlYXRoZXItYXBwLWNhcmQ+IHpvYnJhenVqw61jw60gZGVuLCB0ZXBsb3R1LCBwb3BpcyBwb8SNYXPDrSBhIHJ5Y2hsb3N0IHbEm3RydVxyXG4gICAqIEthxb5kw70geiB2eXR2b8WZZW7DvWNoIGVsZW1lbnTFryBwxZlpcG9qw60gayA8d2VhdGhlci1hcHA+XHJcbiAgICogQHBhcmFtIGZvcmVjYXN0cyBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NyZWF0ZVdlYXRoZXJBcHBDYXJkcyhmb3JlY2FzdHM6IFRocmVlSG91ckZvcmVjYXN0W10pIHtcclxuICAgIGZvcmVjYXN0cy5mb3JFYWNoKChmb3JlY2FzdCkgPT4ge1xyXG4gICAgICAvLyBWeXR2b8WZw60gZWxlbWVudCA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgY29uc3Qgd2VhdGhlckFwcENhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwid2VhdGhlci1hcHAtY2FyZFwiKTtcclxuICAgICAgd2VhdGhlckFwcENhcmQuc2V0QXR0cmlidXRlKFwic2xvdFwiLCBcIndlYXRoZXItYXBwLWNhcmRcIik7XHJcblxyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIG7DoXpldiBkbmVcclxuICAgICAgY29uc3QgZGF5U2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImRheVwiLCBmb3JlY2FzdC5nZXREYXlOYW1lKCkpO1xyXG4gICAgICAvLyBWeXR2b8WZw60gPHRleHRub2RlPiB6b2JyYXp1asOtY8OtIHRlcGxvdHVcclxuICAgICAgY29uc3QgdGVtcFNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJ0ZW1wXCIsIGAke2ZvcmVjYXN0LnRlbXB9YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcG9waXMgcG/EjWFzw61cclxuICAgICAgY29uc3QgZGVzY1Nsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJkZXNjcmlwdGlvblwiLCBgJHtmb3JlY2FzdC53ZWF0aGVyRGVzY3JpcHRpb259YCk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gcnljaGxvc3QgdsSbdHJ1XHJcbiAgICAgIGNvbnN0IHdpbmRTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwid2luZFwiLCBgJHtmb3JlY2FzdC53aW5kU3BlZWR9YCk7XHJcblxyXG4gICAgICAvLyBWxaFlY2hueSB2eXR2b8WZZW7DqSBlbGVtZW50eSBwxZlpcG9qw60gayA8d2VhdGhlci1hcHAtY2FyZD5cclxuICAgICAgd2VhdGhlckFwcENhcmQuYXBwZW5kKGRheVNsb3QsIHRlbXBTbG90LCBkZXNjU2xvdCwgd2luZFNsb3QpO1xyXG4gICAgICB0aGlzLl93ZWF0aGVyQXBwLmFwcGVuZENoaWxkKHdlYXRoZXJBcHBDYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVnl0dm/FmcOtIGVsZW1lbnQgPHRleHRub2RlPiBzIGRhbm91IGhvZG5vdG91IGF0cmlidXR1ICdzbG90JyBhICdpbm5lckhUTUwnXHJcbiAgICogQHBhcmFtIHNsb3ROYW1lIGhvZG5vdGEgYXRyaWJ1dHUgJ3Nsb3QnXHJcbiAgICogQHBhcmFtIGlubmVySFRNTFZhbHVlIGhvZG5vdGEgJ2lubmVySFRNTCdcclxuICAgKi9cclxuICBwcml2YXRlIF9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoc2xvdE5hbWU6IHN0cmluZywgaW5uZXJIVE1MVmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgdGV4dE5vZGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHROb2RlXCIpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LnNldEF0dHJpYnV0ZShcInNsb3RcIiwgc2xvdE5hbWUpO1xyXG4gICAgdGV4dE5vZGVFbGVtZW50LmlubmVySFRNTCA9IGlubmVySFRNTFZhbHVlO1xyXG4gICAgcmV0dXJuIHRleHROb2RlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9kY2h5dMOtIHVkw6Fsb3N0IHZ5aGxlZMOhbsOtIG7DoXp2dSBtxJtzdGEgYSBub3bDvSBuw6F6ZXYgcG/FoWxlIGRvIFdlYXRoZXJBcHBDb250cm9sbGVydVxyXG4gICAqIEBwYXJhbSBoYW5kbGVyIC0gbWV0b2RhIFdlYXRoZXJBcHBDb250cm9sbGVydSwga3RlcsOhIHNpIG5hIHrDoWtsYWTEmyBuw6F6dnUgbcSbc3RhIHZ5xb7DoWTDoSBub3bDoSBkYXRhIGEgcMWZZWtyZXNsw60gVUlcclxuICAgKi9cclxuICBwdWJsaWMgYmluZFNlYXJjaENpdHkoaGFuZGxlcikge1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwic2VhcmNoU3VibWl0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgaGFuZGxlcihldmVudC5kZXRhaWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPZGNoeXTDrSB1ZMOhbG9zdCBwcm8gemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHkgYSBuw6FzbGVkbsSbIHDFmWVrcmVzbMOtIFVJXHJcbiAgICogQHBhcmFtIGhhbmRsZXIgbWV0b2RhIFdlYXRoZXJBcHBDb250cm9sbGVydSwga3RlcsOhIHZ5dm9sw6EgemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHkgYSBuw6FzbGVkbsSbIHDFmWVrcmVzbGVuw60gVUlcclxuICAgKi9cclxuICBwdWJsaWMgYmluZEdldEdlb2xvY2F0aW9uKGhhbmRsZXIpIHtcclxuICAgIHRoaXMuX3dlYXRoZXJBcHAuYWRkRXZlbnRMaXN0ZW5lcihcImdldEdlb2xvY2F0aW9uXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBoYW5kbGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJpbXBvcnQgV2VhdGhlckFwcENvbnRyb2xsZXIgZnJvbSBcIi4vQ29udHJvbGxlci9XZWF0aGVyQXBwQ29udHJvbGVyXCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwTW9kZWwgZnJvbSBcIi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4vVmlld3MvV2VhdGhlckFwcFZpZXdcIjtcclxuXHJcbmNvbnN0IFJFU09VUkNFX1VSTDogc3RyaW5nID1cclxuICBcImh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdD8mYXBwaWQ9NGE3MTAyNzdiNDFkN2RhNzkxZTQ0YmY1MTViYWM2ZjcmbGFuZz1DWlwiO1xyXG5cclxuLyoqXHJcbiAqIFZ5dHZvxZnDrSBhcGxpa2FjaSB6b2JyYXp1asOtY8OtIHDFmWVkcG92xJvEjyBwb8SNYXPDrSBuYSBuw6FzbGVkdWrDrWNoIDUgZG7DrSB6IGRhdCwga3RlcsOhIHrDrXNrw6EgbmEgemFkYW7DqSBVUkwgYWRyZXNlXHJcbiAqIC0gem5pY2lhbGl6dWplIE1vZGVsLCBDb250cm9sbGVyIGEgVmlld1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2VhdGhlckFwcCh1cmw6IHN0cmluZykge1xyXG4gIGNvbnN0IG1vZGVsID0gbmV3IFdlYXRoZXJBcHBNb2RlbCh1cmwsIFwiVG92YcSNb3ZcIik7XHJcbiAgYXdhaXQgbW9kZWwuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICBjb25zdCBjb250cm9sbGVyID0gbmV3IFdlYXRoZXJBcHBDb250cm9sbGVyKG1vZGVsLCBuZXcgV2VhdGhlckFwcFZpZXcoKSk7XHJcbn1cclxuXHJcbmNyZWF0ZVdlYXRoZXJBcHAoUkVTT1VSQ0VfVVJMKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==