!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class o{constructor(e,t){this._model=e,this._view=t,this._view.bindSearchCity(this.handleSearchCity.bind(this)),this._view.bindGetGeolocation(this.handleGetGeolocation.bind(this)),this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city)}handleSearchCity(e){return r(this,void 0,void 0,(function*(){this._model.cityName=e,yield this._model.initialize(),"200"===this._model.forecast.cod?this._view.renderForecastsForCity(this._model.forecast.getForecastsWithHighestTempForEveryDay(),this._model.forecast.city):(this._view.removeCityNameAndForecasts(),this._view.createErrorMessage(`Pro město s názvem '${e}' se nepodařilo najít předpověď.`))}))}handleGetGeolocation(){console.log("sem handler more")}}class i{constructor(e,t,n,r){this._temp=e,this._date=new Date(t),this._weatherDescription=n,this._windSpeed=r}get temp(){return Math.round(this._temp)}get date(){return this._date}get weatherDescription(){return this._weatherDescription}get windSpeed(){return this._windSpeed}set date(e){this._date=e}getDayName(){return new Intl.DateTimeFormat("cs-CZ",{weekday:"long"}).format(this.date)}}class s{constructor(e,t,n,r){this._name=e,this._country=t,this._sunrise=n,this._sunset=r}get name(){return this._name}get country(){return this._country}get sunrise(){return this._sunrise}get sunset(){return this._sunset}}class a{constructor(e){if(this._treeHourForecasts=new Array,this._cod=e.cod,"200"===this._cod){for(let t of e.list)this._treeHourForecasts.push(new i(t.main.temp,t.dt_txt,t.weather[0].description,t.wind.speed));this._city=new s(e.city.name,e.city.country,e.city.sunrise,e.city.sunset)}}get cod(){return this._cod}get city(){return this._city}getForecastsWithHighestTempForEveryDay(){const e=this._getForecastsWithoutHours(this._treeHourForecasts);var t;return function(e,t){let n=new Array;for(let r in e){const o=e[r].reduce((e,n)=>e[t]>n[t]?e:n);n.push(o)}return n}((t="date",e.reduce((e,n)=>{let r=n[t];return e[r]||(e[r]=[]),e[r].push(n),e},{})),"temp")}_getForecastsWithoutHours(e){return e.map(e=>(e.date=new Date(`${e.date.getFullYear()}-${e.date.getMonth()+1}-${e.date.getDate()}`),e))}}var c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class h{constructor(e,t,n="metric"){this._url=e,this._cityName=t,this._units=n}get forecast(){return this._forecast}set cityName(e){this._cityName=e}initialize(){return c(this,void 0,void 0,(function*(){const e=this._url.concat("&q=",this._cityName,"&units=",this._units),t=yield this.fetchForecast(e);this._forecast=new a(t)}))}fetchForecast(e){return c(this,void 0,void 0,(function*(){const t=yield fetch(e);return yield t.json()}))}}const d=document.createElement("template");d.innerHTML='\n<style>\n    h3 {\n        color: coral;\n    }  \n</style>\n<div class="weather-app__card">\n    <h2><slot name="day" /></h2>\n    <h3><slot name="temp"/></h3>\n    <h3><slot name="description"/><</h3>\n    <h3><slot name="wind"/><</h3>\n</div>\n';class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(d.content.cloneNode(!0))}}const l=document.createElement("template");l.innerHTML='\n  <form id="search-form">\n      <input type="text" placeholder="Název hledaného města">\n      <button type="submit">Hledat</button>\n      <button id="location">Geo lokace</button>\n  </form>\n';class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(l.content.cloneNode(!0)),this._input=this.shadowRoot.querySelector("input")}connectedCallback(){this.shadowRoot.getElementById("location").addEventListener("click",e=>{e.preventDefault(),this.dispatchEvent(new CustomEvent("getGeolocation"))}),this.shadowRoot.getElementById("search-form").addEventListener("submit",e=>{e.preventDefault();const t=this._input.value;""===t?this.dispatchEvent(new CustomEvent("emptyInput")):this.dispatchEvent(new CustomEvent("searchSubmit",{detail:t}))})}}const m=document.createElement("template");m.innerHTML='\n<div>\n    <weather-app-search></weather-app-search>\n    <h3><slot name="errorMessage"></slot></h3>\n    <h1><slot name="city"></slot></h1>\n    <div class="weather-app__cards">\n      <slot name="weather-app-card"></slot>\n    </div>\n</div>\n';class w extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(m.content.cloneNode(!0)),this._weatherAppSearch=this.shadowRoot.querySelector("weather-app-search")}connectedCallback(){this._weatherAppSearch.addEventListener("emptyInput",e=>{this.dispatchEvent(new CustomEvent("emptyInput",{detail:"Vyplň název města bráško."}))}),this._weatherAppSearch.addEventListener("searchSubmit",e=>{this.dispatchEvent(new CustomEvent("searchSubmit",{detail:e.detail}))}),this._weatherAppSearch.addEventListener("getGeolocation",e=>{this.dispatchEvent(new CustomEvent("getGeolocation"))})}}class _{constructor(){window.customElements.define("weather-app",w),window.customElements.define("weather-app-search",p),window.customElements.define("weather-app-card",u),this._weatherApp=document.createElement("weather-app"),document.getElementsByTagName("body")[0].append(this._weatherApp),this._weatherApp.addEventListener("emptyInput",e=>{this.removeCityNameAndForecasts(),this.createErrorMessage(e.detail)})}renderForecastsForCity(e,t){this.removeCityNameAndForecasts();const n=this._createTextNodeSetSlotAndInnerHTML("city",""+t.name);this._weatherApp.appendChild(n),this._createWeatherAppCards(e)}removeCityNameAndForecasts(){for(;this._weatherApp.firstChild;)this._weatherApp.removeChild(this._weatherApp.firstChild)}createErrorMessage(e){const t=this._createTextNodeSetSlotAndInnerHTML("errorMessage",e);this._weatherApp.appendChild(t)}_createWeatherAppCards(e){e.forEach(e=>{const t=document.createElement("weather-app-card");t.setAttribute("slot","weather-app-card");const n=this._createTextNodeSetSlotAndInnerHTML("day",e.getDayName()),r=this._createTextNodeSetSlotAndInnerHTML("temp",""+e.temp),o=this._createTextNodeSetSlotAndInnerHTML("description",""+e.weatherDescription),i=this._createTextNodeSetSlotAndInnerHTML("wind",""+e.windSpeed);t.append(n,r,o,i),this._weatherApp.appendChild(t)})}_createTextNodeSetSlotAndInnerHTML(e,t){const n=document.createElement("textNode");return n.setAttribute("slot",e),n.innerHTML=t,n}bindSearchCity(e){this._weatherApp.addEventListener("searchSubmit",t=>{e(t.detail)})}bindGetGeolocation(e){this._weatherApp.addEventListener("getGeolocation",t=>{e()})}}var f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){f(this,void 0,void 0,(function*(){const t=new h(e,"Tovačov");yield t.initialize();new o(t,new _)}))}("https://api.openweathermap.org/data/2.5/forecast?&appid=4a710277b41d7da791e44bf515bac6f7&lang=CZ")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvV2VhdGhlckFwcENvbnRyb2xlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL1RocmVlSG91ckZvcmVjYXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9Nb2RlbHMvQ2l0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWxzL0ZpdmVEYXlGb3JlY2FzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvYXJyYXktdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vZGVscy9XZWF0aGVyQXBwTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXdzL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3cy9XZWF0aGVyQXBwVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldlYXRoZXJBcHBDb250cm9sbGVyIiwibW9kZWwiLCJ2aWV3IiwidGhpcyIsIl9tb2RlbCIsIl92aWV3IiwiYmluZFNlYXJjaENpdHkiLCJoYW5kbGVTZWFyY2hDaXR5IiwiYmluZEdldEdlb2xvY2F0aW9uIiwiaGFuZGxlR2V0R2VvbG9jYXRpb24iLCJyZW5kZXJGb3JlY2FzdHNGb3JDaXR5IiwiZm9yZWNhc3QiLCJnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSIsImNpdHkiLCJjaXR5TmFtZSIsImluaXRpYWxpemUiLCJjb2QiLCJyZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cyIsImNyZWF0ZUVycm9yTWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJUaHJlZUhvdXJGb3JlY2FzdCIsInRlbXAiLCJkYXRlIiwid2VhdGhlckRlc2NyaXB0aW9uIiwid2luZFNwZWVkIiwiX3RlbXAiLCJfZGF0ZSIsIkRhdGUiLCJfd2VhdGhlckRlc2NyaXB0aW9uIiwiX3dpbmRTcGVlZCIsIk1hdGgiLCJyb3VuZCIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsIndlZWtkYXkiLCJmb3JtYXQiLCJDaXR5IiwiY291bnRyeSIsInN1bnJpc2UiLCJzdW5zZXQiLCJfbmFtZSIsIl9jb3VudHJ5IiwiX3N1bnJpc2UiLCJfc3Vuc2V0IiwianNvbk9iamVjdCIsIl90cmVlSG91ckZvcmVjYXN0cyIsIkFycmF5IiwiX2NvZCIsInRocmVlSG91ckZvcmVjYXN0IiwibGlzdCIsInB1c2giLCJtYWluIiwiZHRfdHh0Iiwid2VhdGhlciIsImRlc2NyaXB0aW9uIiwid2luZCIsInNwZWVkIiwiX2NpdHkiLCJ0aHJlZUhvdXJGb3JlY2FzdHMiLCJfZ2V0Rm9yZWNhc3RzV2l0aG91dEhvdXJzIiwiZ3JvdXBlZEFyciIsIm1heFZhbHVlc0Zyb21Hcm91cEFyciIsImdyb3VwS2V5IiwibWF4IiwicmVkdWNlIiwicHJldiIsImN1cnJlbnQiLCJnZXRNYXhWYWx1ZXNGcm9tR3JvdXBlZEFyciIsImFjYyIsIm9iaiIsImZvcmVjYXN0c0FyciIsIm1hcCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwidXJsIiwidW5pdHMiLCJfdXJsIiwiX2NpdHlOYW1lIiwiX3VuaXRzIiwiX2ZvcmVjYXN0IiwidXJsV2l0aENpdHlOYW1lQW5kVW5pdHMiLCJjb25jYXQiLCJmZXRjaEZvcmVjYXN0IiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIldlYXRoZXJBcHBDYXJkIiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsImF0dGFjaFNoYWRvdyIsInNoYWRvd1Jvb3QiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJXZWF0aGVyQXBwU2VhcmNoIiwiX2lucHV0IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJpbnB1dFZhbHVlIiwiZGV0YWlsIiwiV2VhdGhlckFwcCIsIl93ZWF0aGVyQXBwU2VhcmNoIiwid2luZG93IiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJfd2VhdGhlckFwcCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kIiwiZm9yZWNhc3RzIiwiY2l0eVRleHROb2RlIiwiX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTCIsIl9jcmVhdGVXZWF0aGVyQXBwQ2FyZHMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VTbG90IiwiZm9yRWFjaCIsIndlYXRoZXJBcHBDYXJkIiwic2V0QXR0cmlidXRlIiwiZGF5U2xvdCIsImdldERheU5hbWUiLCJ0ZW1wU2xvdCIsImRlc2NTbG90Iiwid2luZFNsb3QiLCJzbG90TmFtZSIsImlubmVySFRNTFZhbHVlIiwidGV4dE5vZGVFbGVtZW50IiwiaGFuZGxl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QUFtQyxNQUFPOUcsRUFBU3dILGNBRWxFQyxFQUFXakksS0FBS3NILG1DQUFtQyxPQUFRLEdBQUc5RyxFQUFTVyxNQUV2RStHLEVBQVdsSSxLQUFLc0gsbUNBQW1DLGNBQWUsR0FBRzlHLEVBQVNhLG9CQUU5RThHLEVBQVduSSxLQUFLc0gsbUNBQW1DLE9BQVEsR0FBRzlHLEVBQVNjLFdBRzdFdUcsRUFBZVYsT0FBT1ksRUFBU0UsRUFBVUMsRUFBVUMsR0FDbkRuSSxLQUFLaUgsWUFBWW5CLFlBQVkrQixLQVN6QixtQ0FBbUNPLEVBQWtCQyxHQUMzRCxNQUFNQyxFQUFrQmhELFNBQVNDLGNBQWMsWUFHL0MsT0FGQStDLEVBQWdCUixhQUFhLE9BQVFNLEdBQ3JDRSxFQUFnQjlDLFVBQVk2QyxFQUNyQkMsRUFPRixlQUFlQyxHQUNwQnZJLEtBQUtpSCxZQUFZWixpQkFBaUIsZUFBaUJDLElBQ2pEaUMsRUFBUWpDLEVBQU1LLFVBUVgsbUJBQW1CNEIsR0FDeEJ2SSxLQUFLaUgsWUFBWVosaUJBQWlCLGlCQUFtQkMsSUFDbkRpQyxPLDJTQzVHTixTQUFnQzlELEcsa0NBQzlCLE1BQU0zRSxFQUFRLElBQUksRUFBZ0IyRSxFQUFLLGlCQUNqQzNFLEVBQU1jLGFBRU8sSUFBSWYsRUFBcUJDLEVBQU8sSUFBSSxNQUd6RDBJLENBYkUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFdlYXRoZXJBcHBNb2RlbCBmcm9tIFwiLi4vTW9kZWxzL1dlYXRoZXJBcHBNb2RlbFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFZpZXcgZnJvbSBcIi4uL1ZpZXdzL1dlYXRoZXJBcHBWaWV3XCI7XHJcblxyXG4vKipcclxuICogVMWZw61kYSB6YWrDrcWhxaV1asOtY8OtIGtvbXVuaWthY2kgbWV6aSBkYXR5IGEgVUkgYXBsaWthY2VcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDb250cm9sbGVyIHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfbW9kZWw6IFdlYXRoZXJBcHBNb2RlbDtcclxuICBwcml2YXRlIF92aWV3OiBXZWF0aGVyQXBwVmlldztcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihtb2RlbDogV2VhdGhlckFwcE1vZGVsLCB2aWV3OiBXZWF0aGVyQXBwVmlldykge1xyXG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuX3ZpZXcgPSB2aWV3O1xyXG5cclxuICAgIHRoaXMuX3ZpZXcuYmluZFNlYXJjaENpdHkodGhpcy5oYW5kbGVTZWFyY2hDaXR5LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fdmlldy5iaW5kR2V0R2VvbG9jYXRpb24odGhpcy5oYW5kbGVHZXRHZW9sb2NhdGlvbi5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl92aWV3LnJlbmRlckZvcmVjYXN0c0ZvckNpdHkoXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmdldEZvcmVjYXN0c1dpdGhIaWdoZXN0VGVtcEZvckV2ZXJ5RGF5KCksXHJcbiAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBQcm8gemFkYW7DvSBuw6F6ZXYgbcSbc3RhIHZ5aGxlZMOhIHDFmWVkcG92xJvEjyBhIHDFmWVrcmVzbMOtIHBvZGxlIG7DrSBVSVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaXR5TmFtZSAtIG7DoXpldiBtxJtzdGEsIHBybyBrdGVyw6kgc2UgbcOhIHpqaXN0aXQgcMWZZWRwb3bEm8SPXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGhhbmRsZVNlYXJjaENpdHkoY2l0eU5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbW9kZWwuY2l0eU5hbWUgPSBjaXR5TmFtZTtcclxuICAgIGF3YWl0IHRoaXMuX21vZGVsLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fbW9kZWwuZm9yZWNhc3QuY29kID09PSBcIjIwMFwiKSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVuZGVyRm9yZWNhc3RzRm9yQ2l0eShcclxuICAgICAgICB0aGlzLl9tb2RlbC5mb3JlY2FzdC5nZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpLFxyXG4gICAgICAgIHRoaXMuX21vZGVsLmZvcmVjYXN0LmNpdHlcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3ZpZXcucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuICAgICAgdGhpcy5fdmlldy5jcmVhdGVFcnJvck1lc3NhZ2UoYFBybyBtxJtzdG8gcyBuw6F6dmVtICcke2NpdHlOYW1lfScgc2UgbmVwb2RhxZlpbG8gbmFqw610IHDFmWVkcG92xJvEjy5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFpqaXN0w60gYWt0dcOhbG7DrSBwb2xvaHkgYSB2eWhsZWTDoSBwb2RsZSBuw60gcMWZZWRwb3bEm8SPIGEgbsOhc2xlZG7EmyBwxZlla3Jlc2zDrSBVSVxyXG4gICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVHZXRHZW9sb2NhdGlvbigpIHtcclxuICAgIGNvbnNvbGUubG9nKFwic2VtIGhhbmRsZXIgbW9yZVwiKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIHTFmcOtaG9kaW5vdSBwxZllZHBvdsSbxI9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUaHJlZUhvdXJGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3RlbXA6IG51bWJlcjtcclxuICBwcml2YXRlIF9kYXRlOiBEYXRlO1xyXG4gIHByaXZhdGUgX3dlYXRoZXJEZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3dpbmRTcGVlZDogbnVtYmVyO1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIFByb3Blcmllc1xyXG4gIGdldCB0ZW1wKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0aGlzLl90ZW1wKTtcclxuICB9XHJcblxyXG4gIGdldCBkYXRlKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGU7XHJcbiAgfVxyXG5cclxuICBnZXQgd2VhdGhlckRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fd2VhdGhlckRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHdpbmRTcGVlZCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3dpbmRTcGVlZDtcclxuICB9XHJcblxyXG4gIHNldCBkYXRlKGRhdGU6IERhdGUpIHtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gUHJvcGV0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcih0ZW1wOiBudW1iZXIsIGRhdGU6IHN0cmluZywgd2VhdGhlckRlc2NyaXB0aW9uOiBzdHJpbmcsIHdpbmRTcGVlZDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl90ZW1wID0gdGVtcDtcclxuICAgIHRoaXMuX2RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIHRoaXMuX3dlYXRoZXJEZXNjcmlwdGlvbiA9IHdlYXRoZXJEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3dpbmRTcGVlZCA9IHdpbmRTcGVlZDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIHB1YmxpYyBnZXREYXlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJjcy1DWlwiLCB7IHdlZWtkYXk6IFwibG9uZ1wiIH0pLmZvcm1hdCh0aGlzLmRhdGUpO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb25cclxufVxyXG4iLCIvKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIG3Em3N0b1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENpdHkge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfY291bnRyeTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3N1bnJpc2U6IG51bWJlcjtcclxuICBwcml2YXRlIF9zdW5zZXQ6IG51bWJlcjtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvdW50cnkoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl9jb3VudHJ5O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnJpc2UoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9zdW5yaXNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN1bnNldCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N1bnNldDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIFByb3BlcnRpZXNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgY291bnRyeTogc3RyaW5nLCBzdW5yaXNlOiBudW1iZXIsIHN1bnNldDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2NvdW50cnkgPSBjb3VudHJ5O1xyXG4gICAgdGhpcy5fc3VucmlzZSA9IHN1bnJpc2U7XHJcbiAgICB0aGlzLl9zdW5zZXQgPSBzdW5zZXQ7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxufVxyXG4iLCJpbXBvcnQgeyBUaHJlZUhvdXJGb3JlY2FzdCB9IGZyb20gXCIuL1RocmVlSG91ckZvcmVjYXN0XCI7XHJcbmltcG9ydCB7IENpdHkgfSBmcm9tIFwiLi9DaXR5XCI7XHJcbmltcG9ydCB7IGdyb3VwQXJyQnlQcm9wZXJ0eSwgZ2V0TWF4VmFsdWVzRnJvbUdyb3VwZWRBcnIgfSBmcm9tIFwiLi4vVXRpbHMvYXJyYXktdXRpbHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIDUgZG7DrSwgcG8gMyBob2RpbsOhY2gsIHBybyBkYW7DqSBtxJtzdG9cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpdmVEYXlGb3JlY2FzdCB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX2NvZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3RyZWVIb3VyRm9yZWNhc3RzOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4gPSBuZXcgQXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+KCk7XHJcbiAgcHJpdmF0ZSBfY2l0eTogQ2l0eTtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IGNvZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvZDtcclxuICB9XHJcblxyXG4gIGdldCBjaXR5KCk6IENpdHkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NpdHk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcihqc29uT2JqZWN0OiBhbnkpIHtcclxuICAgIHRoaXMuX2NvZCA9IGpzb25PYmplY3QuY29kO1xyXG5cclxuICAgIGlmICh0aGlzLl9jb2QgPT09IFwiMjAwXCIpIHtcclxuICAgICAgZm9yIChsZXQgdGhyZWVIb3VyRm9yZWNhc3Qgb2YganNvbk9iamVjdC5saXN0KSB7XHJcbiAgICAgICAgdGhpcy5fdHJlZUhvdXJGb3JlY2FzdHMucHVzaChcclxuICAgICAgICAgIG5ldyBUaHJlZUhvdXJGb3JlY2FzdChcclxuICAgICAgICAgICAgdGhyZWVIb3VyRm9yZWNhc3QubWFpbi50ZW1wLFxyXG4gICAgICAgICAgICB0aHJlZUhvdXJGb3JlY2FzdC5kdF90eHQsXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0LndlYXRoZXJbMF0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHRocmVlSG91ckZvcmVjYXN0LndpbmQuc3BlZWRcclxuICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9jaXR5ID0gbmV3IENpdHkoXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5Lm5hbWUsXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LmNvdW50cnksXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LnN1bnJpc2UsXHJcbiAgICAgICAganNvbk9iamVjdC5jaXR5LnN1bnNldFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gQ29uc3RydWN0b3JzXHJcblxyXG4gIC8vI3JlZ2lvbiBNZXRob2RzXHJcbiAgLyoqXHJcbiAgICogVnLDoXTDrSBwb2xlIHTFmcOtaG9kaW5vdsO9Y2ggcMWZZWRwb3bEm2TDrSBzIG5lanZ5xaHFocOtIHRlcGxvdG91IHBybyBrYcW+ZMO9IGRlblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRGb3JlY2FzdHNXaXRoSGlnaGVzdFRlbXBGb3JFdmVyeURheSgpOiBBcnJheTxUaHJlZUhvdXJGb3JlY2FzdD4ge1xyXG4gICAgY29uc3QgdGhyZWVIb3VyRm9yZWNhc3RzID0gdGhpcy5fZ2V0Rm9yZWNhc3RzV2l0aG91dEhvdXJzKHRoaXMuX3RyZWVIb3VyRm9yZWNhc3RzKTtcclxuICAgIGNvbnN0IHRocmVlSG91ckZvcmVjYXN0c0dyb3VwZWRCeURhdGUgPSBncm91cEFyckJ5UHJvcGVydHkodGhyZWVIb3VyRm9yZWNhc3RzLCBcImRhdGVcIik7XHJcbiAgICBjb25zdCB0aHJlZUhvdXJGb3JlY2FzdHNXaXRoTWF4VGVtcCA9IGdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyKHRocmVlSG91ckZvcmVjYXN0c0dyb3VwZWRCeURhdGUsIFwidGVtcFwiKTtcclxuXHJcbiAgICByZXR1cm4gdGhyZWVIb3VyRm9yZWNhc3RzV2l0aE1heFRlbXA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWcsOhdMOtIHBvbGUgdMWZw61ob2Rpbm92w71jaCBwxZllZHBvdsSbZMOtIGplbiBzIGRhdHVtZW0gYmV6IMSNYXNvdsOpaG8gw7pkYWplXHJcbiAgICogQHBhcmFtIHtwb2xlIG9iamVrdMWvIHR5cHUgRm9yZWNhc3R9IGZvcmVjYXN0c0FyclxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2dldEZvcmVjYXN0c1dpdGhvdXRIb3Vycyhmb3JlY2FzdHNBcnI6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0Pik6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PiB7XHJcbiAgICByZXR1cm4gZm9yZWNhc3RzQXJyLm1hcCgoZm9yZWNhc3QpID0+IHtcclxuICAgICAgZm9yZWNhc3QuZGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgIGAke2ZvcmVjYXN0LmRhdGUuZ2V0RnVsbFllYXIoKX0tJHtmb3JlY2FzdC5kYXRlLmdldE1vbnRoKCkgKyAxfS0ke2ZvcmVjYXN0LmRhdGUuZ2V0RGF0ZSgpfWBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGZvcmVjYXN0O1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBNZXRob2RzXHJcbn1cclxuIiwiLyoqXHJcbiAqIFNlc2t1cMOtIHBydmt5IHBvbGUgZG8gc2t1cGluLCBrdGVyw6kgbWFqw60gc3Rlam5vdSBob2Rub3R1IHphZGFuw6kgcHJvcGVydHlcclxuICogQHBhcmFtIHtwb2xlIG9iamVrdMWvfSBhcnJcclxuICogQHBhcmFtIHt2bGFzdG5vc3Qgb2JqZWt0dSBwb2xlfSBwcm9wZXJ0eVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQXJyQnlQcm9wZXJ0eShhcnIsIHByb3BlcnR5KSB7XHJcbiAgcmV0dXJuIGFyci5yZWR1Y2UoKGFjYywgb2JqKSA9PiB7XHJcbiAgICBsZXQga2V5ID0gb2JqW3Byb3BlcnR5XTtcclxuICAgIGlmICghYWNjW2tleV0pIHtcclxuICAgICAgYWNjW2tleV0gPSBbXTtcclxuICAgIH1cclxuICAgIGFjY1trZXldLnB1c2gob2JqKTtcclxuICAgIHJldHVybiBhY2M7XHJcbiAgfSwge30pO1xyXG59XHJcblxyXG4vKipcclxuICogWmUgc2Vza3VwZW7DqWhvIHBvbGUgdnLDoXTDrSBwcm8ga2HFvmRvdSBza3VwaW51IG9iamVrdCBzIG5lanZ5xaHFocOtIGhvZG5vdG91IHByb3BlcnR5XHJcbiAqIEBwYXJhbSB7cG9sZSBvYmpla3TFrywga3RlcsOpIGpzb3Ugc2Vza3VwZW55IHBvZGxlIGplZG7DqSB6IHByb3BlcnR5IG9iamVrdHV9IGdyb3VwZWRBcnJcclxuICogQHBhcmFtIHtwcm9wZXJ0eSBvYmpla3R1IHBvbGUsIHBybyBrdGVyb3Ugc2UgdiBrYcW+ZMOpIHNrdXBpbsSbIGhsZWTDoSBuZWp2ecWhxaHDrSBob2Rub3RhfSBwcm9wZXJ0eVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1heFZhbHVlc0Zyb21Hcm91cGVkQXJyKGdyb3VwZWRBcnIsIHByb3BlcnR5KSB7XHJcbiAgbGV0IG1heFZhbHVlc0Zyb21Hcm91cEFyciA9IG5ldyBBcnJheSgpO1xyXG5cclxuICBmb3IgKGxldCBncm91cEtleSBpbiBncm91cGVkQXJyKSB7XHJcbiAgICBjb25zdCBtYXggPSBncm91cGVkQXJyW2dyb3VwS2V5XS5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHtcclxuICAgICAgcmV0dXJuIHByZXZbcHJvcGVydHldID4gY3VycmVudFtwcm9wZXJ0eV0gPyBwcmV2IDogY3VycmVudDtcclxuICAgIH0pO1xyXG4gICAgbWF4VmFsdWVzRnJvbUdyb3VwQXJyLnB1c2gobWF4KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXhWYWx1ZXNGcm9tR3JvdXBBcnI7XHJcbn1cclxuIiwiaW1wb3J0IEZpdmVEYXlGb3JlY2FzdCBmcm9tIFwiLi9GaXZlRGF5Rm9yZWNhc3RcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHBybyB6w61za8OhbsOtIGEgcHLDoWNpIHMgZGF0eSwga3RlcsOhIHrDrXNrYWxhIHogZGFuw6kgVVJMXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwTW9kZWwge1xyXG4gIC8vI3JlZ2lvbiBGaWVsZHNcclxuICBwcml2YXRlIF91cmw6IHN0cmluZztcclxuICBwcml2YXRlIF9jaXR5TmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3VuaXRzOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfZm9yZWNhc3Q6IEZpdmVEYXlGb3JlY2FzdDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBQcm9wZXJ0aWVzXHJcbiAgZ2V0IGZvcmVjYXN0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZvcmVjYXN0O1xyXG4gIH1cclxuXHJcbiAgc2V0IGNpdHlOYW1lKGNpdHlOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX2NpdHlOYW1lID0gY2l0eU5hbWU7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBQcm9wZXJ0aWVzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgY2l0eU5hbWU6IHN0cmluZywgdW5pdHMgPSBcIm1ldHJpY1wiKSB7XHJcbiAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICB0aGlzLl9jaXR5TmFtZSA9IGNpdHlOYW1lO1xyXG4gICAgdGhpcy5fdW5pdHMgPSB1bml0cztcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIC8qKlxyXG4gICAqIFrDrXNrw6EgYSBuYXN0YXbDrSBwxZllZHBvdsSbxI8gcG/EjWFzw60gbmEgNSBkbsOtIHBybyBkYW7DqSBtxJtzdG8gYSBqZWRub3RrdSwgdmUga3RlcsOpIHNlIHpvYnJhenVqZSB0ZXBsb3RhXHJcbiAgICovXHJcbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICBjb25zdCB1cmxXaXRoQ2l0eU5hbWVBbmRVbml0cyA9IHRoaXMuX3VybC5jb25jYXQoXCImcT1cIiwgdGhpcy5fY2l0eU5hbWUsIFwiJnVuaXRzPVwiLCB0aGlzLl91bml0cyk7XHJcbiAgICBjb25zdCBmb3JlY2FzdCA9IGF3YWl0IHRoaXMuZmV0Y2hGb3JlY2FzdCh1cmxXaXRoQ2l0eU5hbWVBbmRVbml0cyk7XHJcbiAgICB0aGlzLl9mb3JlY2FzdCA9IG5ldyBGaXZlRGF5Rm9yZWNhc3QoZm9yZWNhc3QpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTmHEjXRlIHDFmWVkcG92xJtkIHogZGFuw6kgdXJsXHJcbiAgICogQHBhcmFtIHthZHJlc2EsIHplIGt0ZXLDqSBzZSBuYcSNw610YWrDrSBkYXRhfSB1cmxcclxuICAgKiBAcmV0dXJucyBwb2xlIG9iamVrdMWvIHMgw7pkYWppIG8gcMWZZWRwb3bEm2RpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBmZXRjaEZvcmVjYXN0KHVybDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgICBjb25zdCBmb3JlY2FzdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIHJldHVybiBmb3JlY2FzdDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIE1ldGhvZHNcclxufVxyXG4iLCJjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG48c3R5bGU+XHJcbiAgICBoMyB7XHJcbiAgICAgICAgY29sb3I6IGNvcmFsO1xyXG4gICAgfSAgXHJcbjwvc3R5bGU+XHJcbjxkaXYgY2xhc3M9XCJ3ZWF0aGVyLWFwcF9fY2FyZFwiPlxyXG4gICAgPGgyPjxzbG90IG5hbWU9XCJkYXlcIiAvPjwvaDI+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cInRlbXBcIi8+PC9oMz5cclxuICAgIDxoMz48c2xvdCBuYW1lPVwiZGVzY3JpcHRpb25cIi8+PDwvaDM+XHJcbiAgICA8aDM+PHNsb3QgbmFtZT1cIndpbmRcIi8+PDwvaDM+XHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuLyoqXHJcbiAqIFTFmcOtZGEgcmVwcmV6ZW50dWrDrWPDrSBIVE1MRWxlbWVudCA8d2VhdGhlci1hcHAtY2FyZD4sIGt0ZXLDvSBzbG91xb7DrSBwcm8gem9icmF6ZW7DrSBwxZllZHBvdsSbZGkgcG/EjWFzw60gbmEgMSBkZW5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXRoZXJBcHBDYXJkIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxufVxyXG4iLCJjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcclxudGVtcGxhdGUuaW5uZXJIVE1MID0gYFxyXG4gIDxmb3JtIGlkPVwic2VhcmNoLWZvcm1cIj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJOw6F6ZXYgaGxlZGFuw6lobyBtxJtzdGFcIj5cclxuICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+SGxlZGF0PC9idXR0b24+XHJcbiAgICAgIDxidXR0b24gaWQ9XCJsb2NhdGlvblwiPkdlbyBsb2thY2U8L2J1dHRvbj5cclxuICA8L2Zvcm0+XHJcbmA7XHJcblxyXG4vKipcclxuICogVMWZw61kYSByZXByZXplbnR1asOtY8OtIEhUTUxFbGVtZW50IDx3ZWF0aGVyLWFwcC1zZWFyY2g+LCBrdGVyw70gc2xvdcW+w60gcHJvIHpvYnJhemVuw60gcG9sZSBhIHRsYcSNw610a2EgcHJvIHZ5aGxlZMOhbsOtIG3Em3N0YVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcFNlYXJjaCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgLy8jZW5kcmVnaW9uIEZpZWxkc1xyXG5cclxuICAvLyNyZWdpb24gQ29uc3RydWN0b3JzXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogXCJvcGVuXCIgfSk7XHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uIENvbnN0cnVjdG9yc1xyXG5cclxuICAvLyNyZWdpb24gTWV0aG9kc1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQbyBrbGlrbnV0w60gbmEgPGJ1dHRvbj4gcyBpZD1cImxvY2F0aW9uXCIgZG9qZGUgayBvZGVzbMOhbsOtIHZsYXN0bsOtaG8gZXZlbnR1LCBrdGVyw70gdnl2b2zDoSB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeVxyXG4gICAgICovXHJcbiAgICB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhdGlvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJnZXRHZW9sb2NhdGlvblwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEtkecW+ICdzZWFyY2gtZm9ybScgb2RjaHl0w60gdWTDoWxvc3QgJ3N1Ym1pdCcgdnl0dm/FmcOtIHZsYXN0bsOtIGV2ZW50IGEgdGVuIG9kZcWhbGUuXHJcbiAgICAgKiBWIHDFmcOtcGFkxJssIMW+ZSBkbyBpbnB1dHUgYnlsYSB6YWTDoW5hIGhvZG5vdGEsIHRhayBwb8WhbGUgaSBqaS5cclxuICAgICAqL1xyXG4gICAgdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSB0aGlzLl9pbnB1dC52YWx1ZTtcclxuICAgICAgaWYgKGlucHV0VmFsdWUgPT09IFwiXCIpIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZW1wdHlJbnB1dFwiKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInNlYXJjaFN1Ym1pdFwiLCB7IGRldGFpbDogaW5wdXRWYWx1ZSB9KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsImltcG9ydCBXZWF0aGVyQXBwU2VhcmNoIGZyb20gXCIuL1dlYXRoZXJBcHBTZWFyY2hcIjtcclxuXHJcbmNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG50ZW1wbGF0ZS5pbm5lckhUTUwgPSBgXHJcbjxkaXY+XHJcbiAgICA8d2VhdGhlci1hcHAtc2VhcmNoPjwvd2VhdGhlci1hcHAtc2VhcmNoPlxyXG4gICAgPGgzPjxzbG90IG5hbWU9XCJlcnJvck1lc3NhZ2VcIj48L3Nsb3Q+PC9oMz5cclxuICAgIDxoMT48c2xvdCBuYW1lPVwiY2l0eVwiPjwvc2xvdD48L2gxPlxyXG4gICAgPGRpdiBjbGFzcz1cIndlYXRoZXItYXBwX19jYXJkc1wiPlxyXG4gICAgICA8c2xvdCBuYW1lPVwid2VhdGhlci1hcHAtY2FyZFwiPjwvc2xvdD5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHJlcHJlemVudHVqw61jw60gSFRNTEVsZW1lbnQgPHdlYXRoZXItYXBwPiwga3RlcsO9IHpvYnJhenVqZSB2eWhsZWTDoXZhY8OtIHBvbGUgcyB0bGHEjcOtdGtlbSBhIHRha8OpIHDFmWVkcG92xJtkaSBwb8SNYXPDrSBuYSA1IGRuw60gcHJvIGRhbsOpIG3Em3N0b1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlckFwcCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAvLyNyZWdpb24gRmllbGRzXHJcbiAgcHJpdmF0ZSBfd2VhdGhlckFwcFNlYXJjaDogV2VhdGhlckFwcFNlYXJjaDtcclxuICAvLyNlbmRyZWdpb24gRmllbGRzXHJcblxyXG4gIC8vI3JlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiBcIm9wZW5cIiB9KTtcclxuICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwU2VhcmNoID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJ3ZWF0aGVyLWFwcC1zZWFyY2hcIik7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIC8vIFBva3VkIDx3ZWF0aGVyLWFwcC1zZWFyY2g+IG9kY2h5dMOtIHVkw6Fsb3N0ICdlbXB0eUlucHV0JyBwb8WhbGUgdWTDoWxvc3QsIGt0ZXLDqSB2eXZvbMOhIG9kc3RyYW7Em27DrSBuw6F6dnUgbcSbc3RhIGEgcMWZZWRwb3bEm2TDrSBhIG5hc3RhdsOtIGNoeWJvdm91IGhsw6HFoWt1XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJlbXB0eUlucHV0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImVtcHR5SW5wdXRcIiwgeyBkZXRhaWw6IFwiVnlwbMWIIG7DoXpldiBtxJtzdGEgYnLDocWha28uXCIgfSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUG9rdWQgPHdlYXRoZXItYXBwLXNlYXJjaD4gb2RjaHl0w60gdWTDoWxvc3QgJ3NlYXJjaFN1Ym1pdCcsIHZ5dHZvxZnDrSB2bGFzdG7DrSBldmVudCBhIHRlbiBvZGXFoWxlIHNwb2x1IHMgbsOhenZlbSBtxJtzdGEsIHBybyBrdGVyw6kgc2UgbcOhIHZ5aGxlZGF0IHDFmWVkcG92xJvEj1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwic2VhcmNoU3VibWl0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInNlYXJjaFN1Ym1pdFwiLCB7IGRldGFpbDogZXZlbnQuZGV0YWlsIH0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFBva3VkPCB3ZWF0aGVyLWFwcC1zZWFyY2g+IG9kY2h5dMOtIHVkw6Fsb3N0ICdnZXRHZW9sb2NhdGlvbicsIHZ5dHZvxZnDrSB2bGFzdG7DrSBldmVudCwga3RlcsO9IHZ5dm9sw6EgemppxaF0xJtuw60gYWt0dcOhbG7DrSBwb2xvaHlcclxuICAgIHRoaXMuX3dlYXRoZXJBcHBTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImdldEdlb2xvY2F0aW9uXCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImdldEdlb2xvY2F0aW9uXCIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsImltcG9ydCB7IFRocmVlSG91ckZvcmVjYXN0IH0gZnJvbSBcIi4uL01vZGVscy9UaHJlZUhvdXJGb3JlY2FzdFwiO1xyXG5pbXBvcnQgeyBDaXR5IH0gZnJvbSBcIi4uL01vZGVscy9DaXR5XCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwQ2FyZCBmcm9tIFwiLi9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwQ2FyZFwiO1xyXG5pbXBvcnQgV2VhdGhlckFwcFNlYXJjaCBmcm9tIFwiLi9DdXN0b21FbGVtZW50cy9XZWF0aGVyQXBwU2VhcmNoXCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwIGZyb20gXCIuL0N1c3RvbUVsZW1lbnRzL1dlYXRoZXJBcHBcIjtcclxuXHJcbi8qKlxyXG4gKiBUxZnDrWRhIHNlIHN0YXLDoSBvIFVJIGFwbGlrYWNlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF0aGVyQXBwVmlldyB7XHJcbiAgLy8jcmVnaW9uIEZpZWxkc1xyXG4gIHByaXZhdGUgX3dlYXRoZXJBcHA6IEhUTUxFbGVtZW50O1xyXG4gIC8vI2VuZHJlZ2lvbiBGaWVsZHNcclxuXHJcbiAgLy8jcmVnaW9uIENvbnN0cnVjdG9yc1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShcIndlYXRoZXItYXBwXCIsIFdlYXRoZXJBcHApO1xyXG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShcIndlYXRoZXItYXBwLXNlYXJjaFwiLCBXZWF0aGVyQXBwU2VhcmNoKTtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoXCJ3ZWF0aGVyLWFwcC1jYXJkXCIsIFdlYXRoZXJBcHBDYXJkKTtcclxuXHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIndlYXRoZXItYXBwXCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmFwcGVuZCh0aGlzLl93ZWF0aGVyQXBwKTtcclxuXHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwLmFkZEV2ZW50TGlzdGVuZXIoXCJlbXB0eUlucHV0XCIsIChldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5yZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpO1xyXG4gICAgICB0aGlzLmNyZWF0ZUVycm9yTWVzc2FnZShldmVudC5kZXRhaWwpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvbiBDb25zdHJ1Y3RvcnNcclxuXHJcbiAgLy8jcmVnaW9uIE1ldGhvZHNcclxuICAvKipcclxuICAgKiBWeWtyZXNsw60gcMWZZWRwb3bEm2RpIHBybyB6YWRhbsOpIG3Em3N0b1xyXG4gICAqIEBwYXJhbSB7QXJyYXk8VGhyZWVIb3VyRm9yZWNhc3Q+fSBmb3JlY2FzdHMgLSBwb2xlIHDFmWVkcG92xJtkw60sIGt0ZXLDqSBzZSBtYWrDrSB2eWtyZXNsaXRcclxuICAgKiBAcGFyYW0ge0NpdHl9IGNpdHkgLSBtxJtzdG8sIHBybyBrdGVyw6kgc2UgcMWZZWRwb3bEm8SPIHZ5a3Jlc2x1amVcclxuICAgKi9cclxuICBwdWJsaWMgcmVuZGVyRm9yZWNhc3RzRm9yQ2l0eShmb3JlY2FzdHM6IEFycmF5PFRocmVlSG91ckZvcmVjYXN0PiwgY2l0eTogQ2l0eSkge1xyXG4gICAgLy8gT2RzdHJhbsOtIGVsZW1lbnR5IHMgbsOhenZlbSBtxJtzdGEgYSBwxZllZHBvdsSbZGlcclxuICAgIHRoaXMucmVtb3ZlQ2l0eU5hbWVBbmRGb3JlY2FzdHMoKTtcclxuXHJcbiAgICAvLyBWeXR2b8WZw60gZWxlbWVudCBzIG7DoXp2ZW0gbcSbc3RhIGEgcMWZaXBvasOtIGhvIGsgPHdlYXRoZXItYXBwPlxyXG4gICAgY29uc3QgY2l0eVRleHROb2RlID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwiY2l0eVwiLCBgJHtjaXR5Lm5hbWV9YCk7XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwLmFwcGVuZENoaWxkKGNpdHlUZXh0Tm9kZSk7XHJcbiAgICAvLyBWeXR2b8WZw60gZWxlbWVudHkgPHdlYXRoZXItYXBwLWNhcmQ+IGEgcMWZaXBvasOtIGplIGsgPHdlYXRoZXItYXBwPlxyXG4gICAgdGhpcy5fY3JlYXRlV2VhdGhlckFwcENhcmRzKGZvcmVjYXN0cyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBPZHN0cmFuw60gZWxlbWVudHkgcyBuw6F6dmVtIG3Em3N0YSBhIGplZG5vdGxpdsOpIHDFmWVkcG92xJtkaVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW1vdmVDaXR5TmFtZUFuZEZvcmVjYXN0cygpIHtcclxuICAgIHdoaWxlICh0aGlzLl93ZWF0aGVyQXBwLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgdGhpcy5fd2VhdGhlckFwcC5yZW1vdmVDaGlsZCh0aGlzLl93ZWF0aGVyQXBwLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTmFzdGF2w60gZWxlbWVudHUgPHdlYXRoZXItYXBwPiBjaHlib3ZvdSB6cHLDoXZ1XHJcbiAgICogQHBhcmFtIGVycm9yTWVzc2FnZSBjaHlib3bDoSB6cHLDoXZhXHJcbiAgICovXHJcbiAgcHVibGljIGNyZWF0ZUVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlU2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImVycm9yTWVzc2FnZVwiLCBlcnJvck1lc3NhZ2UpO1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hcHBlbmRDaGlsZChlcnJvck1lc3NhZ2VTbG90KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZ5dHZvxZnDrSBlbGVtZW50eSA8d2VhdGhlci1hcHAtY2FyZD4gem9icmF6dWrDrWPDrSBkZW4sIHRlcGxvdHUsIHBvcGlzIHBvxI1hc8OtIGEgcnljaGxvc3QgdsSbdHJ1XHJcbiAgICogS2HFvmTDvSB6IHZ5dHZvxZllbsO9Y2ggZWxlbWVudMWvIHDFmWlwb2rDrSBrIDx3ZWF0aGVyLWFwcD5cclxuICAgKiBAcGFyYW0gZm9yZWNhc3RzIHBvbGUgdMWZw61ob2Rpbm92w71jaCBwxZllZHBvdsSbZMOtXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfY3JlYXRlV2VhdGhlckFwcENhcmRzKGZvcmVjYXN0czogVGhyZWVIb3VyRm9yZWNhc3RbXSkge1xyXG4gICAgZm9yZWNhc3RzLmZvckVhY2goKGZvcmVjYXN0KSA9PiB7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSBlbGVtZW50IDx3ZWF0aGVyLWFwcC1jYXJkPlxyXG4gICAgICBjb25zdCB3ZWF0aGVyQXBwQ2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ3ZWF0aGVyLWFwcC1jYXJkXCIpO1xyXG4gICAgICB3ZWF0aGVyQXBwQ2FyZC5zZXRBdHRyaWJ1dGUoXCJzbG90XCIsIFwid2VhdGhlci1hcHAtY2FyZFwiKTtcclxuXHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gbsOhemV2IGRuZVxyXG4gICAgICBjb25zdCBkYXlTbG90ID0gdGhpcy5fY3JlYXRlVGV4dE5vZGVTZXRTbG90QW5kSW5uZXJIVE1MKFwiZGF5XCIsIGZvcmVjYXN0LmdldERheU5hbWUoKSk7XHJcbiAgICAgIC8vIFZ5dHZvxZnDrSA8dGV4dG5vZGU+IHpvYnJhenVqw61jw60gdGVwbG90dVxyXG4gICAgICBjb25zdCB0ZW1wU2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcInRlbXBcIiwgYCR7Zm9yZWNhc3QudGVtcH1gKTtcclxuICAgICAgLy8gVnl0dm/FmcOtIDx0ZXh0bm9kZT4gem9icmF6dWrDrWPDrSBwb3BpcyBwb8SNYXPDrVxyXG4gICAgICBjb25zdCBkZXNjU2xvdCA9IHRoaXMuX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChcImRlc2NyaXB0aW9uXCIsIGAke2ZvcmVjYXN0LndlYXRoZXJEZXNjcmlwdGlvbn1gKTtcclxuICAgICAgLy8gVnl0dm/FmcOtIDx0ZXh0bm9kZT4gem9icmF6dWrDrWPDrSByeWNobG9zdCB2xJt0cnVcclxuICAgICAgY29uc3Qgd2luZFNsb3QgPSB0aGlzLl9jcmVhdGVUZXh0Tm9kZVNldFNsb3RBbmRJbm5lckhUTUwoXCJ3aW5kXCIsIGAke2ZvcmVjYXN0LndpbmRTcGVlZH1gKTtcclxuXHJcbiAgICAgIC8vIFbFoWVjaG55IHZ5dHZvxZllbsOpIGVsZW1lbnR5IHDFmWlwb2rDrSBrIDx3ZWF0aGVyLWFwcC1jYXJkPlxyXG4gICAgICB3ZWF0aGVyQXBwQ2FyZC5hcHBlbmQoZGF5U2xvdCwgdGVtcFNsb3QsIGRlc2NTbG90LCB3aW5kU2xvdCk7XHJcbiAgICAgIHRoaXMuX3dlYXRoZXJBcHAuYXBwZW5kQ2hpbGQod2VhdGhlckFwcENhcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWeXR2b8WZw60gZWxlbWVudCA8dGV4dG5vZGU+IHMgZGFub3UgaG9kbm90b3UgYXRyaWJ1dHUgJ3Nsb3QnIGEgJ2lubmVySFRNTCdcclxuICAgKiBAcGFyYW0gc2xvdE5hbWUgaG9kbm90YSBhdHJpYnV0dSAnc2xvdCdcclxuICAgKiBAcGFyYW0gaW5uZXJIVE1MVmFsdWUgaG9kbm90YSAnaW5uZXJIVE1MJ1xyXG4gICAqL1xyXG4gIHByaXZhdGUgX2NyZWF0ZVRleHROb2RlU2V0U2xvdEFuZElubmVySFRNTChzbG90TmFtZTogc3RyaW5nLCBpbm5lckhUTUxWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB0ZXh0Tm9kZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dE5vZGVcIik7XHJcbiAgICB0ZXh0Tm9kZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic2xvdFwiLCBzbG90TmFtZSk7XHJcbiAgICB0ZXh0Tm9kZUVsZW1lbnQuaW5uZXJIVE1MID0gaW5uZXJIVE1MVmFsdWU7XHJcbiAgICByZXR1cm4gdGV4dE5vZGVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT2RjaHl0w60gdWTDoWxvc3QgdnlobGVkw6Fuw60gbsOhenZ1IG3Em3N0YSBhIG5vdsO9IG7DoXpldiBwb8WhbGUgZG8gV2VhdGhlckFwcENvbnRyb2xsZXJ1XHJcbiAgICogQHBhcmFtIGhhbmRsZXIgLSBtZXRvZGEgV2VhdGhlckFwcENvbnRyb2xsZXJ1LCBrdGVyw6Egc2kgbmEgesOha2xhZMSbIG7DoXp2dSBtxJtzdGEgdnnFvsOhZMOhIG5vdsOhIGRhdGEgYSBwxZlla3Jlc2zDrSBVSVxyXG4gICAqL1xyXG4gIHB1YmxpYyBiaW5kU2VhcmNoQ2l0eShoYW5kbGVyKSB7XHJcbiAgICB0aGlzLl93ZWF0aGVyQXBwLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWFyY2hTdWJtaXRcIiwgKGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICBoYW5kbGVyKGV2ZW50LmRldGFpbCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9kY2h5dMOtIHVkw6Fsb3N0IHBybyB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeSBhIG7DoXNsZWRuxJsgcMWZZWtyZXNsw60gVUlcclxuICAgKiBAcGFyYW0gaGFuZGxlciBtZXRvZGEgV2VhdGhlckFwcENvbnRyb2xsZXJ1LCBrdGVyw6Egdnl2b2zDoSB6amnFoXTEm27DrSBha3R1w6FsbsOtIHBvbG9oeSBhIG7DoXNsZWRuxJsgcMWZZWtyZXNsZW7DrSBVSVxyXG4gICAqL1xyXG4gIHB1YmxpYyBiaW5kR2V0R2VvbG9jYXRpb24oaGFuZGxlcikge1xyXG4gICAgdGhpcy5fd2VhdGhlckFwcC5hZGRFdmVudExpc3RlbmVyKFwiZ2V0R2VvbG9jYXRpb25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGhhbmRsZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvLyNlbmRyZWdpb24gTWV0aG9kc1xyXG59XHJcbiIsImltcG9ydCBXZWF0aGVyQXBwQ29udHJvbGxlciBmcm9tIFwiLi9Db250cm9sbGVyL1dlYXRoZXJBcHBDb250cm9sZXJcIjtcclxuaW1wb3J0IFdlYXRoZXJBcHBNb2RlbCBmcm9tIFwiLi9Nb2RlbHMvV2VhdGhlckFwcE1vZGVsXCI7XHJcbmltcG9ydCBXZWF0aGVyQXBwVmlldyBmcm9tIFwiLi9WaWV3cy9XZWF0aGVyQXBwVmlld1wiO1xyXG5cclxuY29uc3QgUkVTT1VSQ0VfVVJMOiBzdHJpbmcgPVxyXG4gIFwiaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0PyZhcHBpZD00YTcxMDI3N2I0MWQ3ZGE3OTFlNDRiZjUxNWJhYzZmNyZsYW5nPUNaXCI7XHJcblxyXG4vKipcclxuICogVnl0dm/FmcOtIGFwbGlrYWNpIHpvYnJhenVqw61jw60gcMWZZWRwb3bEm8SPIHBvxI1hc8OtIG5hIG7DoXNsZWR1asOtY2ggNSBkbsOtIHogZGF0LCBrdGVyw6EgesOtc2vDoSBuYSB6YWRhbsOpIFVSTCBhZHJlc2VcclxuICogLSB6bmljaWFsaXp1amUgTW9kZWwsIENvbnRyb2xsZXIgYSBWaWV3XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVXZWF0aGVyQXBwKHVybDogc3RyaW5nKSB7XHJcbiAgY29uc3QgbW9kZWwgPSBuZXcgV2VhdGhlckFwcE1vZGVsKHVybCwgXCJUb3ZhxI1vdlwiKTtcclxuICBhd2FpdCBtb2RlbC5pbml0aWFsaXplKCk7XHJcblxyXG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgV2VhdGhlckFwcENvbnRyb2xsZXIobW9kZWwsIG5ldyBXZWF0aGVyQXBwVmlldygpKTtcclxufVxyXG5cclxuY3JlYXRlV2VhdGhlckFwcChSRVNPVVJDRV9VUkwpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9